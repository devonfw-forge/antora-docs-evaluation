<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="devon4net" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Devon4net</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/devon4net/edit/develop/modules/ROOT/pages/cobiGen.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_devon4net_cobigen_guide">devon4net Cobigen Guide</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_getting_things_ready">Getting things ready</a></li>
<li><a href="#_devonfw_distribution">devonfw Distribution</a></li>
<li><a href="#_devon4net_templates">devon4net Templates</a></li>
<li><a href="#_openapi_file">OpenAPI File</a></li>
<li><a href="#_generating_files">Generating files</a></li>
<li><a href="#_generating_files_through_eclipse">Generating files through Eclipse</a></li>
<li><a href="#_generating_files_through_cobigen_cli">Generating files through Cobigen CLI</a></li>
<li><a href="#_configuration">Configuration</a></li>
<li><a href="#_dependency_injection_configuration">Dependency Injection configuration</a></li>
<li><a href="#_configure_data_base">Configure data base</a></li>
<li><a href="#_configure_services">Configure services</a></li>
<li><a href="#_run_the_application">Run the application</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_devon4net_cobigen_guide"><a class="anchor" href="#_devon4net_cobigen_guide"></a>devon4net Cobigen Guide</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this guide we will explain how to generate a new <code>WebApi</code> project from an OpenAPI 3.0.0 specification. This  means that we are going to use a “contract first” strategy. This is going to be possible due to these type of files that contain all the information about entities, operations, etc…</p>
</div>
<div class="paragraph">
<p>In order to make it work we are using <a href="https://github.com/devonfw/cobigen"><code>CobiGen</code></a>, a powerful tool for generating source code. <code>CobiGen</code> allows users to generate all the structure and code of the components, helping to save a lot of time otherwise wasted on repetitive tasks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_things_ready"><a class="anchor" href="#_getting_things_ready"></a>Getting things ready</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_devonfw_distribution"><a class="anchor" href="#_devonfw_distribution"></a>devonfw Distribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The devonfw distributions can be obtained from the <a href="https://coconet.capgemini.com/sf/frs/do/listReleases/projects.apps2_devon/frs.devon_distribution"><code>TeamForge</code> releases library</a> and are packaged in zips files that include all the needed tools, software and configurations.</p>
</div>
<div class="paragraph">
<p>It is not necessary to install nor configure anything. Just extracting the zip content is enough to have a fully functional devonfw. The only thing you have to do is run <strong>create-or-update-workspace.bat</strong> and then <strong>update-all-workspaces.bat</strong> to set up all the needed tools.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_devon4net_templates"><a class="anchor" href="#_devon4net_templates"></a>devon4net Templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are going to use the template of devon4net as a base to generate all the code, so what we have to do now is to download said template using the following steps.</p>
</div>
<div class="paragraph">
<p>First of all you have to set up all the environment for .NET, you can do this using <a href="https://devon4net.github.io/environment.html">the following tutorial</a>. Next we are going to create a new folder where we want to have the WebAPI project, lastly we are going to open the terminal there.</p>
</div>
<div class="paragraph">
<p>Type the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dotnet new -i `Devon4Net`.WebAPI.Template</pre>
</div>
</div>
<div class="paragraph">
<p>and then:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dotnet new Devon4NetAPI</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openapi_file"><a class="anchor" href="#_openapi_file"></a>OpenAPI File</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to let <code>CobiGen</code> generate all the files, we first have to make some modifications to our OpenAPI file.</p>
</div>
<div class="paragraph">
<p>It is obligatory to put the <em>“x-rootpackage”</em> tag to indicate where <code>CobiGen</code> will place the generated files as well as the <em>"x-component"</em> tags for each component, keep in mind that due to `CobiGen&#8217;s limitations each component <strong><em>must</em></strong> have its own entity.</p>
</div>
<div class="paragraph">
<p>You can read more information about how to configure your OpenAPI file and a working example <a href="https://github.com/devonfw/cobigen/wiki/cobigen-openapiplugin#full-example">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generating_files"><a class="anchor" href="#_generating_files"></a>Generating files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cobigen allow us to generate the files in two different ways. One of them is using Eclipse which it can be done by using the its graphical interface. The other way to generate the code is using the Cobigen CLI tool.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generating_files_through_eclipse"><a class="anchor" href="#_generating_files_through_eclipse"></a>Generating files through Eclipse</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to generate the files using Eclipse we need to follow some simple steps.</p>
</div>
<div class="paragraph">
<p>First we are going to import our basic devon4net WebAPI Project into Eclipse. to do so open Eclipse with the “eclipse-main.bat” file that can be found in the devon distribution root folder. Once we are inside of Eclipse we go to <strong>File &gt; Open projects from file system&#8230;&#8203;</strong> and, under "Directory", search for your project.</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/Project_selection.png""><img src="_images/images/Project_selection.png" alt="cobigen" width="= "600""></a>
</div>
</div>
<div class="paragraph">
<p>Next we copy our OpenAPI file into the root folder of the project.</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/OpenAPI_file_root_folder.png""><img src="_images/images/OpenAPI_file_root_folder.png" alt="cobigen" width="= "300""></a>
</div>
</div>
<div class="paragraph">
<p>And then we right click on OpenAPI file and then select <strong>CobiGen &gt; Generate&#8230;&#8203;</strong> It will display a window like this:</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/cobigen_generate0.png""><img src="_images/images/cobigen_generate0.png" alt="cobigen" width="= "800""></a>
</div>
</div>
<div class="paragraph">
<p>To select all .NET features choose <strong>CRUD devon4net Server</strong> otherwise you can select only those that interest you.</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/cobigen_generate1.png"><img src="_images/images/cobigen_generate1.png" alt="cobigen" width="= "800""></a>
</div>
</div>
<div class="paragraph">
<p>Ones you select all the files that you want to generate, click on the <em>“Finish”</em> button to generate all the source code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generating_files_through_cobigen_cli"><a class="anchor" href="#_generating_files_through_cobigen_cli"></a>Generating files through Cobigen CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to generate the files using the Cobigen CLI it is needed to do the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to devonfw distribution folder</p>
</li>
<li>
<p>Run <strong>console.bat</strong>, this will open a console.</p>
</li>
<li>
<p>Go to the folder you downloaded the <strong>devon4net template</strong> and your <strong>yml</strong> file.</p>
</li>
<li>
<p>Run the command:</p>
<div class="literalblock">
<div class="content">
<pre>cobigen generate {yourOpenAPIFile}.yml</pre>
</div>
</div>
</li>
<li>
<p>A list of increments will be printed so that you can start the generation. It has to be selected <strong>CRUD devon4net Server</strong> increment.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_dependency_injection_configuration"><a class="anchor" href="#_dependency_injection_configuration"></a>Dependency Injection configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point it is needed to make some modifications in the code in order to configure correctly the server. To do so it is needed to locate the services and the repositories files that were created in <strong>Devon4Net.WebAPI.Implementation</strong></p>
</div>
<div class="paragraph">
<p>Services location:</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/Services.png"><img src="_images/images/Services.png" alt="cobigen" width="= "300""></a>
</div>
</div>
<div class="paragraph">
<p>Repositories location:</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/Repositories.png"><img src="_images/images/Repositories.png" alt="cobigen" width="= "300""></a>
</div>
</div>
<div class="paragraph">
<p>Now, we are going to open the following file <code><strong>Devon4Net.WebAPI.Implementation\Configure\DevonConfiguration.cs</strong></code>.
In there we have to add the Dependency Injection for the services and the repositories that Cobigen has generated. The following image is an example of what is needed to add.</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/BussinessConfiguration.png"><img src="_images/images/BussinessConfiguration.png" alt="cobigen" width="= "800""></a>
</div>
</div>
<div class="paragraph">
<p>Moreover it is needed to remove the last line in order to be able to run the application:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`throw new NotImplementedException(...);`</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_data_base"><a class="anchor" href="#_configure_data_base"></a>Configure data base</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cobigen is generating an empty context that has to be filled with manually in order to be able to work with the database. The context can be found in <code><strong>[Project_Name]/Devon4Net.WebAPI.Implementation/Domain/Database/CobigenContext.cs</strong></code>.</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/CobigenContextLocation.png"><img src="_images/images/CobigenContextLocation.png" alt="cobigen" width="= "350""></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_services"><a class="anchor" href="#_configure_services"></a>Configure services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to finish the configuration of the services it is needed to go to each service file of the managements generated.</p>
</div>
<div class="paragraph">
<p>In there we will see some <code>"NotImplementedExceptions"</code>, so it is needed to read carefully each comment inside of each exception in order to be able to use the service. It can be shown an example of the service with its <code>NotImplementedExceptions</code> comments:</p>
</div>
<div id="img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="= "images/ServiceExample.png"><img src="_images/images/ServiceExample.png" alt="cobigen" width="= "800""></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_the_application"><a class="anchor" href="#_run_the_application"></a>Run the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After doing all the steps defined above, open a terminal in path: <strong>[Project_Name]/Devon4Net.Application.WebAPI</strong> and then type:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dotnet run</pre>
</div>
</div>
<div class="paragraph">
<p>This will deploy our application in our localhost with the port 8081, so when you click <a href="https://localhost:8082/swagger/index.html">here</a> (<a href="https://localhost:8082/swagger" class="bare">https://localhost:8082/swagger</a>) you can see, in swagger, all the services and the data model.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
