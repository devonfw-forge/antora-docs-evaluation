<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="devon4node" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Devon4node</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/devon4node/edit/develop/modules/ROOT/pages/guides-code-generation.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#code-generation">Code Generation</a></li>
<li><a href="#nest-cli-and-devon4node-schematics">Nest CLI and Devon4node schematics</a></li>
<li><a href="#install-devon4node-schematics">Install devon4node schematics</a></li>
<li><a href="#">==</a></li>
<li><a href="#generate-new-devon4node-application">Generate new devon4node application</a></li>
<li><a href="#generate-code-for-typeorm">Generate code for TypeORM</a></li>
<li><a href="#generate-crud">Generate CRUD</a></li>
<li><a href="#generate-typeorm-entity">Generate TypeORM entity</a></li>
<li><a href="#add-config-module">Add config-module</a></li>
<li><a href="#add-mailer-module">Add mailer module</a></li>
<li><a href="#add-swagger-module">Add swagger module</a></li>
<li><a href="#add-auth-jwt-module">Add auth-jwt module</a></li>
<li><a href="#add-security">Add security</a></li>
<li><a href="#generate-database-migrations">Generate database migrations</a></li>
<li><a href="#cobigen">CobiGen</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="code-generation"><a class="anchor" href="#code-generation"></a>Code Generation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As we mention in the page <a href="guide-key-principles">key principles</a>, one of our key principles is Productivity. In order to provide that productivity, we have some tools to generate code. These tools will help you generate the common parts of the application so that you can focus only on the specific functionality.</p>
</div>
<div class="paragraph">
<p>Those tools are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.npmjs.com/package/@devon4node/schematics">devon4node schematics through Nest CLI</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/cobigen">CobiGen</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nest-cli-and-devon4node-schematics"><a class="anchor" href="#nest-cli-and-devon4node-schematics"></a>Nest CLI and Devon4node schematics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are going to use the Nest CLI to generate code of our application, you can know more about NodeJs CLI in the official <a href="https://docs.nestjs.com/cli/overview:">documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-devon4node-schematics"><a class="anchor" href="#install-devon4node-schematics"></a>Install devon4node schematics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First of all, you need to install Nest CLI</p>
</div>
<div class="paragraph">
<p>Execute the command <code>yarn global add @nestjs/cli</code>.
You can also use npm: <code>npm install -g @nestjs/cli</code></p>
</div>
<div class="paragraph">
<p>And then Devon4node schematics globally with the following command:</p>
</div>
<div class="paragraph">
<p><code>yarn global add @devon4node/schematics</code> or <code>npm install -g @devon4node/schematics</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id=""><a class="anchor" href="#"></a>==</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you get an error trying execute any devon4node schematic related to collection not found, try to reinstall devon4node/schematics on the project folder or be sure that schematics folder is inside @devon4node in node_modules.
<code>yarn add @devon4node/schematics</code>
== ==</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-new-devon4node-application"><a class="anchor" href="#generate-new-devon4node-application"></a>Generate new devon4node application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To start creating a devon4node application, execute the command:</p>
</div>
<div class="paragraph">
<p><code>nest g -c @devon4node/schematics application [application-name]</code></p>
</div>
<div class="paragraph">
<p>If you do not put a name, the command line will ask you for one.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-code-for-typeorm"><a class="anchor" href="#generate-code-for-typeorm"></a>Generate code for TypeORM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Initialize TypeORM into your current project in a correct way.</p>
</div>
<div class="paragraph">
<p><code>nest g -c @devon4node/schematics typeorm</code></p>
</div>
<div class="paragraph">
<p>Then, you will be asked about which DB you want to use.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/typeorm-schematic.PNG" alt="typeorm schematic"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-crud"><a class="anchor" href="#generate-crud"></a>Generate CRUD</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Generate CRUD methods for a entity. Requires TypeORM installed in the project.</p>
</div>
<div class="paragraph">
<p>It will add the @nestjsx/crud module as a project dependency. Then, generates an entity, a CRUD controller and a CRUD service. It also register the entity, controller and service in the module.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics crud</code> and then you will need to write a name for the crud.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/crud-schematic.PNG" alt="crud schematic">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-typeorm-entity"><a class="anchor" href="#generate-typeorm-entity"></a>Generate TypeORM entity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add a TypeORM entity to your project. Requires TypeORM installed in the project.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics entity</code> and you will be asked for an entity name.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-config-module"><a class="anchor" href="#add-config-module"></a>Add config-module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add the config module to the project.</p>
</div>
<div class="paragraph">
<p>It will add the @devon4node/common module as a project dependency. Then, it will generate the configuration module into your project and add it in the core module. Also, it generates the config files for the most common environments.</p>
</div>
<div class="paragraph">
<p>The command to execute will be <code>nest g -c @devon4node/schematics config-module</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-mailer-module"><a class="anchor" href="#add-mailer-module"></a>Add mailer module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add @devon4node/mailer module to project.</p>
</div>
<div class="paragraph">
<p>It will add the @devon4node/mailer module as a project dependency. Also, it will add it to the core module and it will generate some email template examples.</p>
</div>
<div class="paragraph">
<p>Write the command <code>nest g -c @devon4node/schematics mailer</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-swagger-module"><a class="anchor" href="#add-swagger-module"></a>Add swagger module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add swagger module to project.</p>
</div>
<div class="paragraph">
<p>It will add the @nestjs/swagger module as a project dependency. Also, it will update the main.ts file in order to expose the endpoint for swagger. The default endpoint is: /v1/api</p>
</div>
<div class="paragraph">
<p>Execute the command <code>nest g -c @devon4node/schematics swagger</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-auth-jwt-module"><a class="anchor" href="#add-auth-jwt-module"></a>Add auth-jwt module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add the auth JWT module to the project.</p>
</div>
<div class="paragraph">
<p>It will add to your project the auth-jwt and user module. Also, it will import those modules into the core module.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics auth-jwt</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-security"><a class="anchor" href="#add-security"></a>Add security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add cors and helmet to your project.</p>
</div>
<div class="paragraph">
<p>It will add helmet package as project dependency and update the main.ts file in order to enable the cors and helmet in your application.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics security</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-database-migrations"><a class="anchor" href="#generate-database-migrations"></a>Generate database migrations</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate database migrations</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In order to create migration scripts with TypeORM, you need to install ts-node: <code>yarn global add ts-node</code> or <code>npm i -g ts-node</code></p>
</li>
<li>
<p>Generate the tables creation migration: <code>yarn run typeorm migration:generate -n CreateTables</code></p>
<div class="imageblock">
<div class="content">
<img src="_images/images/insert-data.PNG" alt="insert data">
</div>
</div>
<div class="paragraph">
<p>It will connect to the database, read all entities and then it will generate a migration file with all sql queries need to transform the current status of the database to the status defined by the entities. If the database is empty, it will generate all sql queries need to create all tables defined in the entities. You can find a example in the todo example</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>As TypeORM is the tool used for DB. You can check official documentation for more information.
See <a href="https://typeorm.io/#/using-cli">TypeORM CLI documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cobigen"><a class="anchor" href="#cobigen"></a>CobiGen</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently, we do not have templates to generate devon4node code (we have planned to do that in the future). Instead, we have templates that read the code of a devon4node application and generate a devon4ng application. Visit the <a href="https://github.com/devonfw/cobigen">CobiGen</a> page for more information.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
