<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="production-line" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Production-line</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/production-line/edit/master/modules/ROOT/pages/devon4net.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#devon4net-template-for-production-line">devon4net Template for Production Line</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#how-to-insert-the-template">How to insert the Template</a></li>
<li><a href="#how-to-run-the-template">How to run the Template</a></li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/devon4node-pl/pl.png" alt="400" width="300">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/devon4node-pl/devonfw.png" alt="400" width="300">
</div>
</div>
<div class="sect1">
<h2 id="devon4net-template-for-production-line"><a class="anchor" href="#devon4net-template-for-production-line"></a>devon4net Template for Production Line</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This template will configure your PL instance to have a 'ready to use' devon4net template. It can be used as a starting point for your .NET projects.<br>
This includes CICD files for a devonfw technology stack with configuration for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ProductionLine instance</p>
</li>
<li>
<p>docker or openshift deployment</p>
</li>
<li>
<p>pushing artifacts to nexus3</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be able to run Jenkins Node job under ProductionLine you need to configure below settings in Jenkins and Gitlab</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jenkins<br></p>
<div class="ulist">
<ul>
<li>
<p>Execute the <a href="./initialize-instance.adoc">initialize instance template</a></p>
</li>
<li>
<p>If you plan to deploy into OpenShift, you need to execute <a href="./openshift-configuration.adoc">openshift-configuration</a> template also.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Gitlab<br></p>
<div class="ulist">
<ul>
<li>
<p>Generate User Private Token<br>
Go to your Profile in Gitlab<br></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/devon4node-pl/profile.png" alt="500" width="400">
</div>
</div>
<div class="paragraph">
<p>Next click on the pen icon<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/devon4node-pl/pen.png" alt="500" width="400">
</div>
</div>
<div class="paragraph">
<p>On the left menu choose Access Tokens and put token name and check fields like below<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/devon4node-pl/token.JPG" alt="600" width="500">
</div>
</div>
<div class="paragraph">
<p>Click "Create personal access token", you should receive notification about created token and token string. Copy the token string.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/devon4node-pl/created_token.JPG" alt="600" width="500">
</div>
</div>
<div class="paragraph">
<p>The GitLab API user needs to have API access and the rights to create a new group. To set this permission follow the next steps:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter the Admin control panel</p>
</li>
<li>
<p>Select 'Users'</p>
</li>
<li>
<p>Select the user(s) in question and click 'Edit'</p>
</li>
<li>
<p>Scroll down to 'Access' and un-tick 'Can Create Group'</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-insert-the-template"><a class="anchor" href="#how-to-insert-the-template"></a>How to insert the Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to add the template, you can follow the <a href="./how-to-add-a-template.adoc">guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-run-the-template"><a class="anchor" href="#how-to-run-the-template"></a>How to run the Template</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Build the job with parameters:</p>
<div class="ulist">
<ul>
<li>
<p>PROJECT_NAME: The project name.</p>
</li>
<li>
<p>PROJECT_SUFFIX: The project name suffix. As your project can have multiple assets (backend, frontend, middleware&#8230;&#8203;), you can define a suffix in order to identify each one with a different name</p>
</li>
<li>
<p>GROUP_ID: The group id of the project.</p>
</li>
<li>
<p>GITLAB_USER_PRIVATE_TOKEN: Private Token of a Production Line Gitlab User that can be used to create repositories. Created as prerequisite, you only need to add it as credential with GitLab API token <strong>Kind</strong>.</p>
</li>
<li>
<p>GITLAB_CREATE_GROUP_NAME: Name of the GitLab group. The repository will be create inside this group.</p>
</li>
<li>
<p>GITLAB_CREATE_PROJECT_DESCRIPTION: Description of the repository.</p>
</li>
<li>
<p>DEPLOY: Choose the environment where you want to deploy. The deployment could be <strong>none</strong>, <strong>docker</strong> or <strong>openshift</strong>. If <strong>docker</strong> or <strong>openshift</strong> were selected, extra parameters will be required in their dedicated steps:</p>
<div class="ulist">
<ul>
<li>
<p>Configuring DOCKER:</p>
<div class="ulist">
<ul>
<li>
<p>DOCKER_URL: The remote docker daemon URL</p>
</li>
<li>
<p>DOCKER_CERT: Credentials to access docker daemon. If the daemon is not secure, you can leave this empty.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configuring Openshift:</p>
<div class="ulist">
<ul>
<li>
<p>OC_NAME: Openshift cluster name. It was defined in the Openshift Configuration template</p>
</li>
<li>
<p>DOCKER_REGISTRY_CREDENTIALS: Nexus docker registry user credentials. It was created in the initialize instance pipeline. The default username is nexus-api, the default password is the same as your service account.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>After executing this template, you will have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A new GitLab repository.</p>
<div class="ulist">
<ul>
<li>
<p>The repository group is the value passed in the GITLAB_CREATE_GROUP_NAME parameter.</p>
</li>
<li>
<p>The repository name is <em>PROJECT_NAME</em>-<em>PROJECT_SUFFIX</em></p>
</li>
<li>
<p>The repository contains a clean devon4net project.</p>
</li>
<li>
<p>The repository contains a Jenkinsfile.</p>
</li>
<li>
<p>The repository has already configured the jenkins webhook.</p>
</li>
<li>
<p>The repository protects the branches master and release/* to only maintainers to push. Develop is the default branch.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A new multibranch pipeline in jenkins inside the folder <em>PROJECT_NAME</em> with the name <em>PROJECT_NAME</em>-<em>PROJECT_SUFFIX</em>. As the webhook is already configured, it should be executed on every push to GitLab repository.</p>
</li>
<li>
<p>If you choose docker for deployment, your Jenkinsfile should contain two extra stages in order to build and deploy the docker image. Also, the repository should contain the Dockerfiles to create the docker images.</p>
</li>
<li>
<p>If you choose OpenShift for deployment, three new applications should be created in your OpenShift. Those applications represent three environments of your application: develop, uat and stage. Also, your Jenkinsfile should contain three extra stages in order to build and deploy the docker image and check that the pod is running without errors. Also, the repository should contain the Dockerfiles to create the docker images.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
