<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="devon4quarkus" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Devon4quarkus</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/devon4quarkus/edit/master/modules/ROOT/pages/guide-logging.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_logging">Logging</a></li>
<li><a href="#_usage">Usage</a></li>
<li><a href="#_maven_integration">Maven integration</a></li>
<li><a href="#">==</a></li>
<li><a href="#_logger_access">Logger access</a></li>
<li><a href="#_using_the_logger">Using the logger</a></li>
<li><a href="#_configuration">Configuration</a></li>
<li><a href="#_log_levels">==  Log levels</a></li>
<li><a href="#_format">==  Format</a></li>
<li><a href="#_customizing_log_messages">Customizing log messages</a></li>
<li><a href="#_json_logging">JSON Logging</a></li>
<li><a href="#_centralized_log_management">Centralized Log Management</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_logging"><a class="anchor" href="#_logging"></a>Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Logging is the recording of messages during the execution of an application. The log messages provide information for developers or administrators that can be used to troubleshoot or maintain the application, such as errors and warnings, but also info messages such as runtime statistics that can be used for analysis.</p>
</div>
<div class="paragraph">
<p>One must distinguish between a logging API and logging implementations. A logging API provides a standardised interface, while the specific implementation is a framework that is developed against and uses the API.</p>
</div>
<div class="paragraph">
<p>Internally, Quarkus uses the JBoss Logging facade, an abstraction layer that provides support for multiple logging APIs and JBoss LogManager, which provides implementations for the specific APIs. The following logging APIs are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.jboss.org/hibernate/orm/current/topical/html_single/logging/Logging.html">JBoss Logging</a></p>
</li>
<li>
<p><a href="http://www.slf4j.org/">SLF4j</a></p>
</li>
<li>
<p><a href="https://commons.apache.org/proper/commons-logging/">Apache Commons Logging</a></p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/logging/package-summary.html">JDK JUL (java.util.logging)</a></p>
</li>
<li>
<p><a href="https://logging.apache.org/log4j/2.x/">Log4j</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_maven_integration"><a class="anchor" href="#_maven_integration"></a>Maven integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend using SLF4j as the logging API. Since Quarkus uses JBoss logging internally, you can use it out of the box and do not need to add any dependencies to your project to use it. JBoss LogManager will send it to the appropriate implementation.</p>
</div>
<div class="paragraph">
<p><strong>Exceptional case:</strong>
If you use a dependency in your project that has dependencies on other logging libraries like SLF4j, then you need to exclude them from the dependency and use a JBoss Logging adapter. For more information, see <a href="https://quarkus.io/guides/logging#logging-adapters">here</a>.
For example, if you have a dependency that uses SLF4j, you need to add the following dependency to your <code>pom.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.slf4j&lt;/groupId&gt;
    &lt;artifactId&gt;slf4j-jboss-logmanager&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id=""><a class="anchor" href="#"></a>==</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is not needed for libraries that are dependencies of a Quarkus extension as the extension will take care of this for you.
== ==</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logger_access"><a class="anchor" href="#_logger_access"></a>Logger access</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The general pattern for accessing an instance of a logger class is to use static instances. So for SLF4j, the following lines are sufficient to create a log object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>...
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class MyClass {
    private static final Logger log = LoggerFactory.getLogger(MyClass.class);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are use <a href="https://projectlombok.org/api/lombok/extern/slf4j/Slf4j.html">Lombok</a> in your project, you can simply add the <code>@SLF4J</code> annotation to your class. Lombok will then automatically create a logger instance that you can use in your code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_logger"><a class="anchor" href="#_using_the_logger"></a>Using the logger</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you have created the logger instance, you can simply use one of the log methods of the corresponding object. Different logging APIs provide different methods for creating log messages. When using SLF4j, there are several methods such as <code>info</code>, <code>warn</code>, <code>error</code> that are logged depending on the log level set  (see <a href="#configuration">[configuration]</a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>...
public void myMethod(...) {
    log.info("your log message");
}
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>For detailed documentation on the SLF4j API, see <a href="http://www.slf4j.org/manual.html">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div id="configuration" class="paragraph">
<p>The are several options you can set in the <code>application.properties</code> file to configure the bahaviour of the logger. For example, to set the log level or the format of the log messages.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_log_levels"><a class="anchor" href="#_log_levels"></a>==  Log levels</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus supports eight different log levels (see <a href="https://quarkus.io/guides/logging#logging-levels">here</a> for an overview). Use <code>quarkus.log.level</code> to set the default log level of the application (default is <code>INFO</code>).  To define more specific log levels, you can set different levels per category.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>quarkus.log.level=INFO
quarkus.log.category."org.hibernate".level=DEBUG</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would set the default log level in your application to <code>INFO</code> and the Hibernate log level to <code>DEBUG</code>.</p>
</div>
<div class="paragraph">
<p>To understand when to use which log level, you can take a look at the <a href="https://github.com/devonfw/devon4j/blob/master/documentation/guide-logging.adoc#how-to-log">devon4j logging guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_format"><a class="anchor" href="#_format"></a>==  Format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To configure the output format of the log messages, set the property <code>quarkus.log.console.format</code>. Information on the supported options can be found <a href="https://quarkus.io/guides/logging#logging-format">here</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>quarkus.log.console.format=[D: %d] [P: %p] [C: %X] [T: %t] [L: %c] [M: %m]%n</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>[D: 2021-07-20 11:54:33,127] [P: DEBUG] [C: «MDC values»] [T: executor-thread-0] [L: my.package.MyClass] [M: log message...]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customizing_log_messages"><a class="anchor" href="#_customizing_log_messages"></a>Customizing log messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use <a href="http://www.slf4j.org/manual.html#mdc">Mapped Diagnostic Context</a> to add custom fields to your log messages. MDC is a simple map consisting of key-value pairs to store additional useful information such as session or request ids that can be helpful when filtering log messages or debugging applications.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.MDC;

...
public class MyClass {

    private static final Logger log = LoggerFactory.getLogger(SLF4JLoggingResource.class);

    public String myMethod() {
    	MDC.put("yourKey", "yourValue");
    	log.info("log message ...");
    }

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>[D: 2021-07-20 11:54:33,127] [P: DEBUG] [C: {yourKey=yourValue}] [T: executor-thread-0] [L: my.package.MyClass] [M: log message...]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_json_logging"><a class="anchor" href="#_json_logging"></a>JSON Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For production environments we suggest to use JSON logs instead of plain text. The JSON output can be captured by external services for storing and analysis. To do this add the <code>quarkus-logging-json</code> extension to your project`s <code>pom.xml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-logging-json&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will change the output format by default. Since it makes sense in development environments to have the output format in a human readable format, you can disable JSON logging for development (or test) environments by adding the following properties to your <code>application.properties</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>%dev.quarkus.log.console.json=false
%test.quarkus.log.console.json=false</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_centralized_log_management"><a class="anchor" href="#_centralized_log_management"></a>Centralized Log Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As mentioned in the section on JSON logging, in production environments it makes sense to have a service to store and analyse the logs. For this, you can use a central log management system like <a href="https://www.graylog.org/">Graylog</a> or <a href="https://www.elastic.co/logstash/">Logstash</a> in combination with <a href="https://www.elastic.co/elasticsearch/">Elasticsearch</a>, which provides you with a powerful search engine.</p>
</div>
<div class="paragraph">
<p>For this, Quarkus provides the <code>quarkus-logging-gelf</code> extension to send the logs in the <a href="https://www.graylog.org/features/gelf">Graylog Extended Log Format (GELF)</a> to your log management system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-logging-gelf&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You do not have to extend your code, just configure the GELF log handler to your management system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>quarkus.log.handler.gelf.enabled=true
quarkus.log.handler.gelf.host=tcp:localhost
quarkus.log.handler.gelf.port=12201</code></pre>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
