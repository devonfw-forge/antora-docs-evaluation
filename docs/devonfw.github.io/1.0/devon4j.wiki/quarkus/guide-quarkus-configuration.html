<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="devonfw.github.io" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">devonfw.github.io</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/marvdan/devonfw.github.io/edit/developAntoraGhPage/docs/modules/ROOT/pages/devon4j.wiki/quarkus/guide-quarkus-configuration.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_external_application_configuration">External Application Configuration</a>
<ul class="sectlevel2">
<li><a href="#_database_configuration">Database Configuration</a></li>
<li><a href="#_database_system_and_access">Database System and Access</a></li>
<li><a href="#_database_logging">Database Logging</a></li>
</ul>
</li>
<li><a href="#_secrets_and_environment_specific_configurations">Secrets and environment specific configurations</a>
<ul class="sectlevel2">
<li><a href="#_environment_variables">Environment variables</a></li>
<li><a href="#_custom_config_sources">Custom config sources</a></li>
<li><a href="#_credential_encryption">Credential encryption</a></li>
<li><a href="#_hashicorp_vault">HashiCorp Vault</a></li>
</ul>
</li>
</ul>
</div>
<div class="paragraph">
<p>==Configuration</p>
</div>
<div class="paragraph">
<p><a href="quarkus">Quarkus</a> provides a comprehensive guide on configuration <a href="https://quarkus.io/guides/config-reference">here</a>.</p>
</div>
<div class="sect1">
<h2 id="_external_application_configuration"><a class="anchor" href="#_external_application_configuration"></a>External Application Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_database_configuration"><a class="anchor" href="#_database_configuration"></a>Database Configuration</h3>
<div class="paragraph">
<p>In Quarkus, Hibernate is provided by the <code>quarkus-hibernate-orm</code> extension. Ensure the extension is added to your <code>pom.xml</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-hibernate-orm&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, you have to add the respective JDBC driver extension to your <code>pom.xml</code>. There are different drivers for different database types. See <a href="https://quarkus.io/guides/hibernate-orm#setting-up-and-configuring-hibernate-orm">Quarkus Hibernate guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_database_system_and_access"><a class="anchor" href="#_database_system_and_access"></a>Database System and Access</h3>
<div class="paragraph">
<p>You need to configure which database type you want to use, as well as the location and credentials to access it. The defaults are configured in <code>application.properties</code>. The file should therefore contain the properties as in the given example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.jdbc.url=jdbc:postgresql://database.enterprise.com/app
quarkus.datasource.username=appuser01
quarkus.datasource.password=************
quarkus.datasource.db-kind=postgresql

##drop and create the database at startup (use only for local development)
quarkus.hibernate-orm.database.generation=drop-and-create</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_database_logging"><a class="anchor" href="#_database_logging"></a>Database Logging</h3>
<div class="paragraph">
<p>Add the following properties to <code>application.properties</code> to enable logging of database queries for debugging purposes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.format-sql=true

#Logs SQL bind parameters. Setting it to true is obviously not recommended in production.
quarkus.hibernate-orm.log.bind-parameters=true</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_secrets_and_environment_specific_configurations"><a class="anchor" href="#_secrets_and_environment_specific_configurations"></a>Secrets and environment specific configurations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_environment_variables"><a class="anchor" href="#_environment_variables"></a>Environment variables</h3>
<div class="paragraph">
<p>There are also some libraries to make Jasypt work with Quarkus, such as <a href="https://camel.apache.org/camel-quarkus/latest/reference/extensions/jasypt.html">Camel Quarkus Jasypt</a>. Unfortunately, this feature only works in JVM mode and not in native mode.</p>
</div>
<div class="paragraph">
<p>Quarkus supports many credential providers with official extensions, such as HashiCorp Vault.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-vault&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus reads configuration values from several locations, ordered by a certain priority. An overview of these can be found at the official  <a href="https://quarkus.io/guides/config-extending-support">Quarkus config guide</a>.</p>
</div>
<div class="paragraph">
<p>Environment variables have a higher ordinal number and are therefore higher prioritized than e.g. the <code>application.properties</code> file.
So instead of storing secrets in plain text in the configuration files, it is better to use environment variables for critical values to configure the application.</p>
</div>
<div class="paragraph">
<p>Environment variables also have the advantage that they can be easily integrated into a containerized environment.
When using Kubernetes, the secrets can be stored as <em>Kubernetes secret</em> and then passed to the containers as an environment variable.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_config_sources"><a class="anchor" href="#_custom_config_sources"></a>Custom config sources</h3>
<div class="paragraph">
<p>Quarkus provides the possability to add custom config sources, which can be used to retrieve configuration values from custom locations.
For a description of this feature, see the <a href="https://quarkus.io/guides/config-extending-support#custom-config-source">corresponding Quarkus guide</a>.</p>
</div>
<div class="sect3">
<h4 id="_config_interceptors"><a class="anchor" href="#_config_interceptors"></a>Config interceptors</h4>
<div class="paragraph">
<p>Quarkus also allows with the concept of interceptors to hook into the resolution of configuration values. This can be useful when configuration values are encrypted or need to be extracted.
To do this, you have to implement a <code>ConfigSourceInterceptor</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">public class CustomConfigInterceptor implements ConfigSourceInterceptor {

  @Override
  public ConfigValue getValue(ConfigSourceInterceptorContext context, String name) {

    ConfigValue configValue = context.proceed(name);
    if (name.equals("config-value-to-resolve")) {
      configValue = new ConfigValue.ConfigValueBuilder()
          .withName(name)
          .withValue(resolveConfigurationValue(name))
          .build();
    }

    return configValue;
  }

  private String resolveConfigurationValue(String name) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use the Interceptor, you must register it. To do this, create a file  <code>io.smallrye.config.ConfigSourceInterceptor</code> in the folder <code>src/main/resources/META-INF/services</code> and register the interceptor register the interceptor by writing the fully qualified class name to this file.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_credential_encryption"><a class="anchor" href="#_credential_encryption"></a>Credential encryption</h3>
<div class="paragraph">
<p>As for <a href="../spring/guide-spring-configuration#security">Spring</a>, there are also some libraries that let Jasypt work with Quarkus such as <a href="https://camel.apache.org/camel-quarkus/latest/reference/extensions/jasypt.html">Camel Quarkus Jasypt</a>. Unfortunately, this feature only works in JVM mode and not in native mode, so it is not a suitable approach.</p>
</div>
<div class="paragraph">
<p>If you want to store usernames or passwords in encrypted form or retrieve them from a custom store, you can use a custom <code>CredentialsProvider</code> for this purpose.
Consider the use case where you want to store your database credentials in encrypted form rather than in plain text. Then you can implement a credentials provider as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">@ApplicationScoped
@Unremovable
public class DatabaseCredentialsProvider implements CredentialsProvider {

  @Override
  public Map&lt;String, String&gt; getCredentials(String credentialsProviderName) {

    Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();
    properties.put(USER_PROPERTY_NAME, decryptUsername());
    properties.put(PASSWORD_PROPERTY_NAME, decryptPassword());
    return properties;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>application.properties</code> file you need to set <code>quarkus.datasource.credentials-provider=custom</code>.
For more information about the credentials provider, see the official <a href="https://quarkus.io/guides/credentials-provider">Quarkus guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hashicorp_vault"><a class="anchor" href="#_hashicorp_vault"></a>HashiCorp Vault</h3>
<div class="paragraph">
<p>For centralized management of secrets and other critical configuration values, you can use <a href="https://www.vaultproject.io/">HashiCorp Vault</a> as external management tool.</p>
</div>
<div class="paragraph">
<p>For detailed instructions on how to integrate Vault into your Quarkus application, see the official <a href="https://quarkus.io/guides/vault">Quarkus guide</a>.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
