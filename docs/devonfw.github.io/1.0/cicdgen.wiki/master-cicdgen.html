<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="devonfw.github.io" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">devonfw.github.io</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/marvdan/devonfw.github.io/edit/developAntoraGhPage/docs/modules/ROOT/pages/cicdgen.wiki/master-cicdgen.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="paragraph">
<p>==cicdgen</p>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==CICDGEN</p>
</div>
<div class="paragraph">
<p>cicdgen is a devonfw tool for generate all code/files related to CICD. It will include/modify into your project all files that the project needs run a Jenkins cicd pipeline, to create a docker image based on your project, etc. Itâ€™s based on angular schematics, so you can add it as a dependency into your project and generate the code using ng generate. In addition, it has its own CLI for those projects that are not angular based.</p>
</div>
<div class="sect3">
<h4 id="what-is-angular-schematics"><a class="anchor" href="#what-is-angular-schematics"></a>What is angular schematics?</h4>
<div class="paragraph">
<p>Schematics are generators that transform an existing <code>filesystem</code>. They can create files, refactor existing files, or move files from one place to another.</p>
</div>
<div class="paragraph">
<p>What distinguishes Schematics from other generators, such as Yeoman or Yarn Create, is that schematics are purely descriptive; no changes are applied to the actual <code>filesystem</code> until everything is ready to be committed. There is no side effect, by design, in Schematics.</p>
</div>
</div>
<div class="sect3">
<h4 id="cicdgen-cli"><a class="anchor" href="#cicdgen-cli"></a>cicdgen CLI</h4>
<div class="paragraph">
<p>In order to know more about how to use the cicdgen CLI, you can check the <a href="cicdgen-cli.adoc">CLI page</a></p>
</div>
</div>
<div class="sect3">
<h4 id="cicdgen-schematics"><a class="anchor" href="#cicdgen-schematics"></a>cicdgen Schematics</h4>
<div class="paragraph">
<p>In order to know more about how to use the cicdgen schematics, you can check the <a href="cicdgen-schematics.adoc">schematics page</a></p>
</div>
</div>
<div class="sect3">
<h4 id="usage-example"><a class="anchor" href="#usage-example"></a>Usage example</h4>
<div class="paragraph">
<p>A <a href="usage-example.adoc">specific page</a> about how to use cicdgen is also available.</p>
</div>
</div>
<div class="sect1">
<h2 id="cicdgen-cli-2"><a class="anchor" href="#cicdgen-cli-2"></a>cicdgen CLI</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="sect4">
<h5 id="cicdgen-cli-3"><a class="anchor" href="#cicdgen-cli-3"></a>CICDGEN CLI</h5>
<div class="paragraph">
<p>cicdgen is a command line interface that helps you with some CICD in a devonfw project. At this moment we can only generate files related to CICD in a project but we plan to add more functionality in a future.</p>
</div>
<div class="sect5">
<h6 id="installation"><a class="anchor" href="#installation"></a>Installation</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ npm i -g @devonfw/cicdgen</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="usage"><a class="anchor" href="#usage"></a>Usage</h6>
<div class="sect6">
<h7 id="global-arguments"><a class="anchor" href="#global-arguments"></a>Global arguments</h7>
<div class="ulist">
<ul>
<li>
<p>--version</p>
<div class="literalblock">
<div class="content">
<pre>Prints the cicdgen version number</pre>
</div>
</div>
</li>
<li>
<p>--help</p>
<div class="literalblock">
<div class="content">
<pre>Shows the usage of the command</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="commands"><a class="anchor" href="#commands"></a>Commands</h7>
<div class="sect7">
<h8 id="generate"><a class="anchor" href="#generate"></a>Generate.</h8>
<div class="paragraph">
<p>This command wraps the usage of angular schematics CLI. With this we generate files in a easy way and also print a better help about usage.</p>
</div>
<div class="paragraph">
<p>Available schematics that generate the code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="devon4j/devon4j-schematic.adoc">devon4j</a></p>
</li>
<li>
<p><a href="devon4j/devon4ng-schematic.adoc">devon4ng</a></p>
</li>
<li>
<p><a href="devon4j/devon4net-schematic.adoc">devon4net</a></p>
</li>
<li>
<p><a href="devon4j/devon4node-schematic.adoc">devon4node</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect6">
<h7 id="examples"><a class="anchor" href="#examples"></a>Examples</h7>
<div class="ulist">
<ul>
<li>
<p>Generate all CICD files related to a devon4j project</p>
<div class="listingblock">
<div class="content">
<pre>$ cicdgen generate devon4j</pre>
</div>
</div>
</li>
<li>
<p>Generate all CICD files related to a devon4ng project with docker deployment.</p>
<div class="listingblock">
<div class="content">
<pre>$ cicdgen generate devon4ng --groupid com.devonfw --docker --registryurl docker-registry-devon.s2-eu.capgemini.com</pre>
</div>
</div>
</li>
<li>
<p>Generate all CICD files related to a devon4node project with OpenShift deployment.</p>
<div class="listingblock">
<div class="content">
<pre>$ cicdgen generate devon4ng --groupid com.devonfw --openshift --registryurl docker-registry-devon.s2-eu.capgemini.com --ocname default --ocn devonfw</pre>
</div>
</div>
</li>
</ul>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect4">
<h5 id="cicdgen-usage-example"><a class="anchor" href="#cicdgen-usage-example"></a>cicdgen usage example</h5>
<div class="paragraph">
<p>In this example we are going to show how to use cicdgen step by step in a devon4ng project.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install cicdgen</p>
<div class="paragraph">
<p>cicdgen is already included in the devonfw distribution, but if you want to use it outside the devonfw console you can execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ npm i -g cicdgen</pre>
</div>
</div>
</li>
<li>
<p>Generate a new devon4ng project using devonfw ide.</p>
<div class="paragraph">
<p>Inside a devonfw ide distribution execute the command (<code>devon ng create &lt;app-name&gt;</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ devon ng create devon4ng</pre>
</div>
</div>
</li>
<li>
<p>Execute cicdgen generate command</p>
<div class="paragraph">
<p>As we want to send notifications to MS Teams, we need to create the connector first:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Go to a channel in teams and click at the connectors button. Then click at the jenkins configure button.</p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/teams-1.png" alt="teams 1"></span></p>
</div>
</li>
<li>
<p>Put a name for the connector</p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/teams-2.png" alt="teams 2"></span></p>
</div>
</li>
<li>
<p>Copy the name and the Webhook URL, we will use it later.</p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/teams-3.png" alt="teams 3"></span></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>With the values that we get in the previous steps, we will execute the cicdgen command inside the project folder. If you have any doubt you can use the help.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/help-1.png" alt="help 1"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/help-2.png" alt="help 2"></span></p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cicdgen generate devon4ng --groupid com.devonfw --docker --dockerurl tpc://127.0.0.1:2376 `--registryurl docker-registry-devon.s2-eu.capgemini.com --teams --teamsname devon4ng --teamsurl https://outlook.office.com/webhook/...`</pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/cicdgen-command.png" alt="cicdgen command"></span></p>
</div>
</li>
<li>
<p>Create a git repository and upload the code</p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/gitlab.png" alt="gitlab"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/gitlab-2.png" alt="gitlab 2"></span></p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git remote add origin https://devon.s2-eu.capgemini.com/gitlab/darrodri/devon4ng.git
$ git push -u origin master</pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/push-code.png" alt="push code"></span></p>
</div>
<div class="paragraph">
<p>As you can see, no git init or git commit is required, cicdgen do it for you.</p>
</div>
</li>
<li>
<p>Create a multibranch-pipeline in Jenkins</p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/new-pipeline.png" alt="new pipeline"></span></p>
</div>
<div class="paragraph">
<p>When you push the save button, it will download the repository and execute the pipeline defined in the Jenkinsfile. If you get any problem, check the environment variables defined in the Jenkinsfile. Here we show all variables related with Jenkins:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>chrome</p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/chrome-stable.png" alt="chrome stable"></span></p>
</div>
</li>
<li>
<p><code>sonarTool</code></p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/sonar-tool.png" alt="sonar tool"></span></p>
</div>
</li>
<li>
<p><code>sonarEnv</code></p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/sonar-env.png" alt="sonar env"></span></p>
</div>
</li>
<li>
<p><code>repositoryId</code></p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/repository-id.png" alt="repository id"></span></p>
</div>
</li>
<li>
<p><code>globalSettingsId</code></p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/global-settings-id.png" alt="global settings id"></span></p>
</div>
</li>
<li>
<p><code>mavenInstallation</code></p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/maven-installation.png" alt="maven installation"></span></p>
</div>
</li>
<li>
<p><code>dockerTool</code></p>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/docker-global.png" alt="docker global"></span></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Add a <code>webhook</code> in GitLab</p>
<div class="paragraph">
<p>In order to run the pipeline every time that you push code to GitLab, you need to configure a <code>webhook</code> in your repository.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/example/gitlab-webhook.png" alt="gitlab webhook"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now your project is ready to work following a CICD strategy.</p>
</div>
<div class="paragraph">
<p>The last thing to take into account is the branch naming. We prepare the pipeline in order to work following the git-flow strategy. So all stages of the pipeline will be executed for the branches: develop, release/*, master. For the branches: feature/*, <code>hotfix</code>/*, bugfix/* only the steps related to unit testing will be executed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cicdgen-schematics-2"><a class="anchor" href="#cicdgen-schematics-2"></a>cicdgen Schematics</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="sect4">
<h5 id="cicdgen-schematics-3"><a class="anchor" href="#cicdgen-schematics-3"></a>CICDGEN SCHEMATICS</h5>
<div class="paragraph">
<p>We use angular schematics to create and update an existing devonfw project in order to adapt it to a CICD environment. All schematics are prepared to work with Production Line, a Capgemini CICD platform, but it can also work in other environment which have the following tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jenkins</p>
</li>
<li>
<p>GitLab</p>
</li>
<li>
<p>Nexus 3</p>
</li>
<li>
<p>SonarQube</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The list of available schematics are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="./devon4j-schematic.adoc">devon4j</a></p>
</li>
<li>
<p><a href="./devon4ng-schematic.adoc">devon4ng</a></p>
</li>
<li>
<p><a href="./devon4net-schematic.adoc">devon4net</a></p>
</li>
<li>
<p><a href="./devon4node-schematic.adoc">devon4node</a></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="how-to-run-the-schematics"><a class="anchor" href="#how-to-run-the-schematics"></a>How to run the schematics</h6>
<div class="paragraph">
<p>You can run the schematics using the schematics CLI provided by the angular team, but the easiest way to run it is using the <a href="cicdgen-cli">cicdgen CLI</a> which is a wrapper for the schematics CLI in order to use it in a easy way.</p>
</div>
<div class="paragraph">
<p>To generate files you only need to run the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cicdgen generate &lt;schematic-name&gt; [arguments]</pre>
</div>
</div>
<div class="paragraph">
<p>&lt;schematic-name&gt; is the name of the schematic that you want to execute.</p>
</div>
<div class="paragraph">
<p>You can find all information about arguments in the schematic section.</p>
</div>
<!-- toc disabled -->
</div>
<div class="sect5">
<h6 id="merge-strategies"><a class="anchor" href="#merge-strategies"></a>Merge Strategies</h6>
<div class="paragraph">
<p>When you execute cicdgen in a project, is possible that you already have some files that cicdgen will generate. Until version 1.5 the behaviour in these cases was to throw an error and not create/modify any file. Since version 1.6 you can choose what to do in case of conflict. In this page we will explain who to choose one merge strategy and how it works.</p>
</div>
<div class="sect6">
<h7 id="choose-a-merge-strategy"><a class="anchor" href="#choose-a-merge-strategy"></a>Choose a merge strategy</h7>
<div class="paragraph">
<p>To choose a merge strategy, you must pass to cicdgen the merge parameter followed by the name of the strategy. The strategies available are: <strong>error</strong>, <strong>keep</strong>, <strong>override</strong>, <strong>combine</strong>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cicdgen generate devon4j --merge keep</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="merge-strategies-2"><a class="anchor" href="#merge-strategies-2"></a>Merge strategies</h7>
<div class="ulist">
<ul>
<li>
<p><strong>error</strong>: The <strong>error</strong> strategy is the same as until version 1.5, throwing an error and do not create/modify any file. This is the default value, if you do not pass the merge parameter this value will be taken.</p>
</li>
<li>
<p><strong>keep</strong>: The <strong>keep</strong> strategy will keep the actual content of your files in case of conflict. If there is no conflict, the file will be created with the new content.</p>
</li>
<li>
<p><strong>override</strong>: The <strong>override</strong> strategy will override your current files, without throwing any error, and create a new ones with the new content. If there is no conflict, the file will be created with the new content.</p>
</li>
<li>
<p><strong>combine</strong>: The <strong>combine</strong> strategy will create a new file combining the current content with the new content. In order to combine both files, it will apply a diff algorithm and it will show the conflicts in the same way that git does. If there is no conflict, the file will be created with the new content.</p>
<div class="paragraph">
<p>By resolving the conflicts in the same way as git, you can use the same tools in order to solve them. For example, you can use VSCode:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/merge-combine-vscode.png" alt="merge combine vscode"></span></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="paragraph">
<p><strong>keep</strong>
Current file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 1
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p>New file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 5
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p>The result will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 1
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p><strong>override</strong>
Current file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 1
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p>New file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 5
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p>The result will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 5
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p><strong>combine</strong>
Current file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 1
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p>New file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Line 5
Line 2
Line 3
Line 4</pre>
</div>
</div>
<div class="paragraph">
<p>The result will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
Line 1
=======
Line 5
&gt;&gt;&gt;&gt;&gt;&gt;&gt; new_content
Line 2
Line 3
Line 4</pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect4">
<h5 id="devon4j-schematic"><a class="anchor" href="#devon4j-schematic"></a>devon4j schematic</h5>
<div class="paragraph">
<p>With the <code>cicdgen generate devon4j</code> command you will be able to generate some files required for CICD. In this section we will explain the arguments of this command and also the files that will be generated.</p>
</div>
<div class="sect5">
<h6 id="devon4j-schematic-arguments"><a class="anchor" href="#devon4j-schematic-arguments"></a>devon4j schematic arguments</h6>
<div class="paragraph">
<p>When you execute the <code>cicdgen generate devon4j</code> command you can also add some arguments in order to modify the behaviour of the command. Those arguments are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>--docker</p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, docker related files and pipeline stage will be also generated. For more details see docker section of Jenkinsfile and <a href="#devon4j-docker-generated-files">files generated for docker</a></p>
</div>
</li>
<li>
<p><code>--dockerurl</code></p>
<div class="paragraph">
<p>The URL of your external docker daemon. Example: tcp://127.0.0.1:2376</p>
</div>
</li>
<li>
<p><code>--dockercertid</code></p>
<div class="paragraph">
<p>The Jenkins credential id for your docker daemon certificate. It is only required when your docker daemon is secure.</p>
</div>
</li>
<li>
<p><code>--registryurl</code></p>
<div class="paragraph">
<p>Your docker registry URL. It is required when <code>--docker</code> is true, and it will be used to know where the docker image will be uploaded.</p>
</div>
</li>
<li>
<p><code>--openshift</code></p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, OpenShift related files and pipeline stage will be also generated. For more details see OpenShift section of Jenkinsfile and <a href="#devon4j-docker-generated-files">files generated for docker</a> (same as <code>--docker</code>)</p>
</div>
</li>
<li>
<p><code>--ocname</code></p>
<div class="paragraph">
<p>The name used for register your OpenShift cluster in Jenkins.</p>
</div>
</li>
<li>
<p><code>--ocn</code></p>
<div class="paragraph">
<p>OpenShift cluster namespace</p>
</div>
</li>
<li>
<p>--teams</p>
<div class="paragraph">
<p>With this argument we can add the teams notification option in the <a href="#jenkinsfile-teams">Jenkinsfile</a>.</p>
</div>
</li>
<li>
<p><code>--teamsname</code></p>
<div class="paragraph">
<p>The name of the Microsoft Teams <code>webhook</code>. It is defined at Microsoft Teams connectors.</p>
</div>
</li>
<li>
<p><code>--teamsurl</code></p>
<div class="paragraph">
<p>The url of the Microsoft Teams <code>webhook</code>. It is returned by Microsoft Teams when you create a connector.</p>
</div>
</li>
<li>
<p>--merge</p>
<div class="paragraph">
<p>If you have used cicdgen previously, you can choose what you want to do in case of file conflict. The default behavior is to throw an error and not modify any file. You can see the other strategies on their <a href="merge-strategies.adoc">specific page</a>.</p>
</div>
</li>
<li>
<p>--commit</p>
<div class="paragraph">
<p>If true, all changes will be committed at the end of the process (if possible). In order to send a false value, you need to write <code>--commit=false</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="devon4ng-generated-files"><a class="anchor" href="#devon4ng-generated-files"></a>Devon4ng generated files</h6>
<div class="paragraph">
<p>When you execute the generate devon4ng command, some files will be added/updated in your project.</p>
</div>
<div class="sect6">
<h7 id="files"><a class="anchor" href="#files"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>.gitignore</p>
<div class="paragraph">
<p>Defines all files that git will ignore. e.g: compiled files, IDE configurations. It will download the content from: <a href="https://gitignore.io/api/java,maven,eclipse,intellij,intellij+all,intellij+iml,visualstudiocode" class="bare">https://gitignore.io/api/java,maven,eclipse,intellij,intellij+all,intellij+iml,visualstudiocode</a></p>
</div>
</li>
<li>
<p>pom.xml</p>
<div class="paragraph">
<p>The pom.xml is modified in order to add, if needed, the <code>distributionManagement</code>.</p>
</div>
</li>
<li>
<p>Jenkinsfile</p>
<div class="paragraph">
<p>The Jenkinsfile is the file which define the Jenkins pipeline of our project. With this we can execute the test, build the application and deploy it automatically following a CICD methodology. This file is prepared to work with the Production Line default values, but it is also fully configurable to your needs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prerequisites</p>
<div class="ulist">
<ul>
<li>
<p>A Production Line instance. It can works also if you have a Jenkins, SonarQube and Nexus3, but in this case maybe you need to configure them properly.</p>
</li>
<li>
<p>Java 11 installed in Jenkins as a global tool.</p>
</li>
<li>
<p>SonarQube installed in Jenkins as a global tool.</p>
</li>
<li>
<p>Maven3 installed in Jenkins as a global tool.</p>
</li>
<li>
<p>A maven global settings properly configured in Jenkins.</p>
</li>
<li>
<p>If you will use docker to deploy:</p>
<div class="ulist">
<ul>
<li>
<p>Docker installed in Jenkins as a global custom tool.</p>
</li>
<li>
<p>The Nexus3 with a docker repository.</p>
</li>
<li>
<p>A machine with docker installed where the build and deploy will happen.</p>
</li>
<li>
<p>A docker network called application.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you will use OpenShift to deploy:</p>
<div class="ulist">
<ul>
<li>
<p>An OpenShift instance</p>
</li>
<li>
<p>The OpenShift projects created</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The Jenkins syntax</p>
<div class="paragraph">
<p>In this section we will  explain a little bit the syntax of the Jenkins, so if you need to change something you will be able to do it properly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>agent: Here you can specify the Jenkins agent where the pipeline will be executed. The default value is any.</p>
</li>
<li>
<p>options: Here you can set global options to the pipeline. By default, we add a build discarded to delete old artifacts/build of the pipeline and also we disable the concurrent builds.</p>
<div id="jenkinsfile-teams" class="paragraph">
<p>If the teams option is passed to cicdgen, we add a new option in order to send notifications to Microsoft Teams with the status of the pipeline executions.</p>
</div>
</li>
<li>
<p>environment: Here all environment variables are defined. All values defined here matches with the Production Line defaults. If you Jenkins has other values, you need to update it manually.</p>
</li>
<li>
<p>stages: Here are defined all stages that our pipeline will execute. Those stages are:</p>
<div class="ulist">
<ul>
<li>
<p>Loading Custom Tools: Load some custom tools that can not be loaded in the tools section. Also set some variables depending on the git branch which you are executing. Also, we set properly the version number in all pom files. It means that if your branch is develop, your version should end with the word <code>-SNAPSHOT</code>, in order case, if <code>-SNAPSHOT</code> is present it will be removed.</p>
</li>
<li>
<p>Fresh Dependency Installation: install all packages need to build/run your java project.</p>
</li>
<li>
<p>Unit Tests: execute the <code>mvn test</code> command.</p>
</li>
<li>
<p>SonarQube code analysis: send the project to SonarQube in order to get the static code analysis of your project.</p>
</li>
<li>
<p>Deliver application into Nexus: build the project and send all bundle files to Nexsus3.</p>
</li>
<li>
<p>If <code>--docker</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application using the image created in the previous stage. The previous version is removed.</p>
<div class="paragraph">
<p><code><a id="jenkinsfile-openshift"></a></code></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>--openshift</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project using a OpenShift build config.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application in OpenShift.</p>
</li>
<li>
<p>Check pod status: checks that the application deployed in the previous stage is running properly. If the application does not run the pipeline will fail.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>post: actions that will be executed after the stages. We use it to clean up all files.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="devon4j-docker-generated-files"><a class="anchor" href="#devon4j-docker-generated-files"></a>devon4j Docker generated files</h6>
<div class="paragraph">
<p>When you generate the files for a devon4ng you can also pass the option <code>--docker</code>. It will generate also some extra files related to docker.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you pass the <code>--docker</code> option the option <code>--registryurl</code> is also required. It will be used to upload the images to a docker registry. Example: if your registry url is <code>docker-registry-test.s2-eu.capgemini.com</code> you should execute the command in this way: <code>cicdgen generate devon4node --groupid com.devonfw --docker --registryurl docker-registry-test.s2-eu.capgemini.com</code>.
</td>
</tr>
</table>
</div>
<div class="sect6">
<h7 id="files-2"><a class="anchor" href="#files-2"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>Dockerfile</p>
<div class="paragraph">
<p>This file contains the instructions to build a docker image for you project. This Dockerfile is for local development purposes, you can use it in your machine executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd &lt;path-to-your-project&gt;
$ docker build -t &lt;project-name&gt;/&lt;tag&gt; .</pre>
</div>
</div>
<div class="paragraph">
<p>This build is using a multi-stage build. First, it use a maven image in order to compile the source code, then it will use a java image to run the application. With the multi-stage build we keep the final image as clean as possible.</p>
</div>
</li>
<li>
<p><code>Dockerfile.ci</code></p>
<div class="paragraph">
<p>This file contains the instructions to create a docker image for you project. The main difference with the Dockerfile is that this file will be only used in the Jenkins pipeline. Instead of compiling again the code, it takes the compiled war from Jenkins to the image.</p>
</div>
</li>
</ul>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect4">
<h5 id="devon4ng-schematic"><a class="anchor" href="#devon4ng-schematic"></a>devon4ng schematic</h5>
<div class="paragraph">
<p>With the <code>cicdgen generate devon4ng</code> command you can generate some files required for CICD. In this section we will explain the arguments of this command and also the files that will be generated.</p>
</div>
<div class="sect5">
<h6 id="devon4ng-schematic-arguments"><a class="anchor" href="#devon4ng-schematic-arguments"></a>devon4ng schematic arguments</h6>
<div class="paragraph">
<p>When you execute the <code>cicdgen generate devon4ng</code> command you can also add some arguments in order to modify the behaviour of the command. Those arguments are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>--docker</p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, docker related files and pipeline stage will be also generated. For more details see docker section of Jenkinsfile and <a href="#devon4ng-docker-generated-files">files generated for docker</a></p>
</div>
</li>
<li>
<p><code>--dockerurl</code></p>
<div class="paragraph">
<p>The URL of your external docker daemon. Example: tcp://127.0.0.1:2376</p>
</div>
</li>
<li>
<p><code>--dockercertid</code></p>
<div class="paragraph">
<p>The Jenkins credential id for your docker daemon certificate. It is only required when your docker daemon is secure.</p>
</div>
</li>
<li>
<p><code>--registryurl</code></p>
<div class="paragraph">
<p>Your docker registry URL. It is required when <code>--docker</code> is true, and it will be used to know where the docker image will be uploaded.</p>
</div>
</li>
<li>
<p><code>--openshift</code></p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, OpenShift related files and pipeline stage will be also generated. For more details see OpenShift section of Jenkinsfile and <a href="#devon4ng-docker-generated-files">files generated for OpenShift</a> (same as <code>--docker</code>)</p>
</div>
</li>
<li>
<p><code>--ocname</code></p>
<div class="paragraph">
<p>The name used for register your OpenShift cluster in Jenkins.</p>
</div>
</li>
<li>
<p><code>--ocn</code></p>
<div class="paragraph">
<p>OpenShift cluster namespace</p>
</div>
</li>
<li>
<p>--groupid</p>
<div class="paragraph">
<p>The project <code>groupId</code>. This argument is required. It will be used for store the project in a maven repository at Nexus 3. Why maven? Because is the kind of repository where we can upload/download a zip file easily. Npm repository needs a package.json file but, as we compile the angular application to static javascript and html files, the package.json is no needed anymore.</p>
</div>
</li>
<li>
<p>--teams</p>
<div class="paragraph">
<p>With this argument we can add the teams notification option in the <code><a href="#jenkinsfile-teams</code>">Jenkinsfile</a>.</p>
</div>
</li>
<li>
<p><code>--teamsname</code></p>
<div class="paragraph">
<p>The name of the Microsoft Teams <code>webhook</code>. It is defined at Microsoft Teams connectors.</p>
</div>
</li>
<li>
<p><code>--teamsurl</code></p>
<div class="paragraph">
<p>The url of the Microsoft Teams <code>webhook</code>. It is returned by Microsoft Teams when you create a connector.</p>
</div>
</li>
<li>
<p>--merge</p>
<div class="paragraph">
<p>If you have used cicdgen previously, you can choose what you want to do in case of file conflict. The default behavior is to throw an error and not modify any file. You can see the other strategies on their <a href="merge-strategies.adoc">specific page</a>.</p>
</div>
</li>
<li>
<p>--commit</p>
<div class="paragraph">
<p>If true, all changes will be committed at the end of the process (if possible). In order to send a false value, you need to write <code>--commit=false</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="devon4ng-generated-files-2"><a class="anchor" href="#devon4ng-generated-files-2"></a>devon4ng generated files</h6>
<div class="paragraph">
<p>When you execute the generate devon4ng command, some files will be added/updated in your project.</p>
</div>
<div class="sect6">
<h7 id="files-3"><a class="anchor" href="#files-3"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>angular.json</p>
<div class="paragraph">
<p>The angular.json is modified in order to change the compiled files destination folder. Now, when you make a build of your project, the compiled files will be generated into dist folder instead of dist/&lt;project-name&gt; folder.</p>
</div>
</li>
<li>
<p>package.json</p>
<div class="paragraph">
<p>The package.json is modified in order to add a script for test the application using Chrome Headless instead of a regular chrome. This script is called <code>test:ci</code>.</p>
</div>
</li>
<li>
<p><code>karma.conf.js</code></p>
<div class="paragraph">
<p>The <code>karma.conf.js</code> is also modified in order to add the Chrome Headless as a browser to execute test. The coverage output folder is change to <code>./coverage</code> instead of <code>./coverage/&lt;project-name&gt;</code></p>
</div>
</li>
<li>
<p>Jenkinsfile</p>
<div class="paragraph">
<p>The Jenkinsfile is the file which define the Jenkins pipeline of our project. With this we can execute the test, build the application and deploy it automatically following a CICD methodology. This file is prepared to work with the Production Line default values, but it is also fully configurable to your needs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prerequisites</p>
<div class="ulist">
<ul>
<li>
<p>A Production Line instance. It can works also if you have a Jenkins, SonarQube and Nexus3, but in this case maybe you need to configure them properly.</p>
</li>
<li>
<p>NodeJS installed in Jenkins as a global tool.</p>
</li>
<li>
<p>Google Chrome installed in Jenkins as a global custom tool.</p>
</li>
<li>
<p>SonarQube installed in Jenkins as a global tool.</p>
</li>
<li>
<p>Maven3 installed in Jenkins as a global tool.</p>
</li>
<li>
<p>A maven global settings properly configured in Jenkins.</p>
</li>
<li>
<p>If you will use docker :</p>
<div class="ulist">
<ul>
<li>
<p>Docker installed in Jenkins as a global custom tool.</p>
</li>
<li>
<p>The Nexus3 with a docker repository.</p>
</li>
<li>
<p>A machine with docker installed where the build and deploy will happen.</p>
</li>
<li>
<p>A docker network called application.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you will use OpenShift :</p>
<div class="ulist">
<ul>
<li>
<p>An OpenShift instance</p>
</li>
<li>
<p>The OpenShift projects created</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The Jenkins syntax</p>
<div class="paragraph">
<p>In this section we will  explain a little bit the syntax of the Jenkins, so if you need to change something you will be able to do it properly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>agent: Here you can specify the Jenkins agent where the pipeline will be executed. The default value is any.</p>
</li>
<li>
<p>options: Here you can set global options for the pipeline. By default, we add a build discarded to delete old artifacts/build of the pipeline and also we disable the concurrent builds.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-teams</code>]]
If the teams option is passed to cicdgen, we add a new option in order to send notifications to Microsoft Teams with the status of the pipeline executions.</p>
</div>
</li>
<li>
<p>tools: Here we define the global tools configurations. By default a version of nodejs is added here.</p>
</li>
<li>
<p>environment: Here all environment variables are defined. All values defined here matches with the Production Line defaults. If you Jenkins has other values, you need to update it manually.</p>
</li>
<li>
<p>stages: Here are defined all stages that our pipeline will execute. Those stages are:</p>
<div class="ulist">
<ul>
<li>
<p>Loading Custom Tools: in this stage some custom tools are loaded. Also we set some variables depending on the git branch which you are executing.</p>
</li>
<li>
<p>Fresh Dependency Installation: install all packages need to build/run your angular project.</p>
</li>
<li>
<p>Code Linting: execute the linter analysis.</p>
</li>
<li>
<p>Execute Angular tests: execute the angular test in a Chrome Headless.</p>
</li>
<li>
<p>SonarQube code analysis: send the project to SonarQube in order to get the static code analysis of your project.</p>
</li>
<li>
<p>Build Application: compile the application to be ready to deploy in a web server.</p>
</li>
<li>
<p>Deliver application into Nexus: store all compiled files in Nexus3 as a zip file.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-docker</code>]]</p>
</div>
</li>
<li>
<p>If <code>--docker</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application using the image created in the previous stage. The previous version is removed.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-openshift</code>]]</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>--openshift</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project using a OpenShift build config.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application in OpenShift.</p>
</li>
<li>
<p>Check pod status: checks that the application deployed in the previous stage is running properly. If the application does not run the pipeline will fail.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>post: actions that will be executed after the stages. We use it to clean up all files.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="devon4ng-docker-generated-files"><a class="anchor" href="#devon4ng-docker-generated-files"></a>devon4ng Docker generated files</h6>
<div class="paragraph">
<p>When you generate the files for a devon4ng you can also pass the option <code>--docker</code>. It will generate also some extra files related to docker.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you pass the <code>--docker</code> option the option <code>--registryurl</code> is also required. It will be used to upload the images to a docker registry. Example: if your registry url is <code>docker-registry-test.s2-eu.capgemini.com</code> you should execute the command in this way: <code>cicdgen generate devon4node --groupid com.devonfw --docker `--registryurl</code> docker-registry-test.s2-eu.capgemini.com`.
</td>
</tr>
</table>
</div>
<div class="sect6">
<h7 id="files-4"><a class="anchor" href="#files-4"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>.dockerignore</p>
<div class="paragraph">
<p>In this files are defined the folders that will not be copied to the docker image. Fore more information read the <a href="https://docs.docker.com/engine/reference/builder/#dockerignore-file">official documentation</a>.</p>
</div>
</li>
<li>
<p>Dockerfile</p>
<div class="paragraph">
<p>This file contains the instructions to build a docker image for you project. This Dockerfile is for local development purposes, you can use it in your machine executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd &lt;path-to-your-project&gt;
$ docker build -t &lt;project-name&gt;/&lt;tag&gt; .</pre>
</div>
</div>
<div class="paragraph">
<p>This build is using a multi-stage build. First, it use a node image in order to compile the source code, then it will use a nginx image as a web server for our devon4ng application. With the multi-stage build we avoid everything related to <code>node.js</code> in our final image, where we only have a nginx with our application compiled.</p>
</div>
</li>
<li>
<p>Dockerfile.ci</p>
<div class="paragraph">
<p>This file contains the instructions to create a docker image for you project. The main difference with the Dockerfile is that this file will be only used in the Jenkins pipeline. Instead of compiling again the code, it takes all compiled files and the nginx.conf from Jenkins to the image.</p>
</div>
</li>
</ul>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect4">
<h5 id="devon4net-schematic"><a class="anchor" href="#devon4net-schematic"></a>devon4net schematic</h5>
<div class="paragraph">
<p>With the <code>cicdgen generate devon4net</code> command you can generate some files required for CICD. In this section we will explain the arguments of this command and also the files that will be generated.</p>
</div>
<div class="sect5">
<h6 id="devon4net-schematic-arguments"><a class="anchor" href="#devon4net-schematic-arguments"></a>devon4net schematic arguments</h6>
<div class="paragraph">
<p>When you execute the <code>cicdgen generate devon4net</code> command you can also add some arguments in order to modify the behaviour of the command. Those arguments are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--appname</code></p>
<div class="paragraph">
<p>The name of your devon4net application.</p>
</div>
</li>
<li>
<p><code>--appversion</code></p>
<div class="paragraph">
<p>The initial version of your devon4net application</p>
</div>
</li>
<li>
<p>--docker</p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, docker related files and pipeline stage will be also generated. For more details see docker section of Jenkinsfile and <a href="#devon4net-docker-generated-files">files generated for docker</a></p>
</div>
</li>
<li>
<p><code>--dockerurl</code></p>
<div class="paragraph">
<p>The URL of your external docker daemon. Example: tcp://127.0.0.1:2376</p>
</div>
</li>
<li>
<p><code>--dockercertid</code></p>
<div class="paragraph">
<p>The Jenkins credential id for your docker daemon certificate. It is only required when your docker daemon is secure.</p>
</div>
</li>
<li>
<p><code>--registryurl</code></p>
<div class="paragraph">
<p>Your docker registry URL. It is required when <code>--docker</code> is true, and it will be used to know where the docker image will be uploaded.</p>
</div>
</li>
<li>
<p><code>--openshift</code></p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, OpenShift related files and pipeline stage will be also generated. For more details see OpenShift section of Jenkinsfile and <a href="#devon4net-docker-generated-files">files generated for OpenShift</a> (same as <code>--docker</code>)</p>
</div>
</li>
<li>
<p><code>--ocname</code></p>
<div class="paragraph">
<p>The name used for register your OpenShift cluster in Jenkins.</p>
</div>
</li>
<li>
<p><code>--ocn</code></p>
<div class="paragraph">
<p>OpenShift cluster namespace</p>
</div>
</li>
<li>
<p>--groupid</p>
<div class="paragraph">
<p>The project <code>groupId</code>. This argument is required. It will be used for store the project in a maven repository at Nexus 3. Why maven? Because is the kind of repository where we can upload/download a zip file easily. Npm repository needs a package.json file but, as we compile the angular application to static javascript and html files, the package.json is no needed anymore.</p>
</div>
</li>
<li>
<p>--teams</p>
<div class="paragraph">
<p>With this argument we can add the teams notification option in the xref:`jenkinsfile-teams`[Jenkinsfile].</p>
</div>
</li>
<li>
<p><code>--teamsname</code></p>
<div class="paragraph">
<p>The name of the Microsoft Teams <code>webhook</code>. It is defined at Microsoft Teams connectors.</p>
</div>
</li>
<li>
<p><code>--teamsurl</code></p>
<div class="paragraph">
<p>The url of the Microsoft Teams <code>webhook</code>. It is returned by Microsoft Teams when you create a connector.</p>
</div>
</li>
<li>
<p>--merge</p>
<div class="paragraph">
<p>If you have used cicdgen previously, you can choose what you want to do in case of file conflict. The default behavior is to throw an error and not modify any file. You can see the other strategies on their <a href="merge-strategies.adoc">specific page</a>.</p>
</div>
</li>
<li>
<p>--commit</p>
<div class="paragraph">
<p>If true, all changes will be committed at the end of the process (if possible). In order to send a false value, you need to write <code>--commit=false</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="devon4net-generated-files"><a class="anchor" href="#devon4net-generated-files"></a>devon4net generated files</h6>
<div class="paragraph">
<p>When you execute the generate devon4net command, some files will be added/updated in your project.</p>
</div>
<div class="sect6">
<h7 id="files-5"><a class="anchor" href="#files-5"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>Jenkinsfile</p>
<div class="paragraph">
<p>The Jenkinsfile is the file which define the Jenkins pipeline of our project. With this we can execute the test, build the application and deploy it automatically following a CICD methodology. This file is prepared to work with the Production Line default values, but it is also fully configurable to your needs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prerequisites</p>
<div class="ulist">
<ul>
<li>
<p>A Production Line instance. It can works also if you have a Jenkins, SonarQube and Nexus3, but in this case maybe you need to configure them properly.</p>
</li>
<li>
<p>dotnet core installed in Jenkins as a global tool.</p>
</li>
<li>
<p>SonarQube installed in Jenkins as a global tool.</p>
</li>
<li>
<p>Maven3 installed in Jenkins as a global tool.</p>
</li>
<li>
<p>A maven global settings properly configured in Jenkins.</p>
</li>
<li>
<p>If you will use docker :</p>
<div class="ulist">
<ul>
<li>
<p>Docker installed in Jenkins as a global custom tool.</p>
</li>
<li>
<p>The Nexus3 with a docker repository.</p>
</li>
<li>
<p>A machine with docker installed where the build and deploy will happen.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you will use OpenShift :</p>
<div class="ulist">
<ul>
<li>
<p>An OpenShift instance</p>
</li>
<li>
<p>The OpenShift projects created</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The Jenkins syntax</p>
<div class="paragraph">
<p>In this section we will  explain a little bit the syntax of the Jenkins, so if you need to change something you will be able to do it properly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>agent: Here you can specify the Jenkins agent where the pipeline will be executed. The default value is any.</p>
</li>
<li>
<p>options: Here you can set global options for the pipeline. By default, we add a build discarded to delete old artifacts/build of the pipeline and also we disable the concurrent builds.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-teams</code>]]
If the teams option is passed to cicdgen, we add a new option in order to send notifications to Microsoft Teams with the status of the pipeline executions.</p>
</div>
</li>
<li>
<p>tools: Here we define the global tools configurations. By default a version of nodejs is added here.</p>
</li>
<li>
<p>environment: Here all environment variables are defined. All values defined here matches with the Production Line defaults. If you Jenkins has other values, you need to update it manually.</p>
</li>
<li>
<p>stages: Here are defined all stages that our pipeline will execute. Those stages are:</p>
<div class="ulist">
<ul>
<li>
<p>Loading Custom Tools: in this stage some custom tools are loaded. Also we set some variables depending on the git branch which you are executing.</p>
</li>
<li>
<p>Fresh Dependency Installation: install all dependencies need to build/run your dotnet project.</p>
</li>
<li>
<p>Execute dotnet tests: execute the tests.</p>
</li>
<li>
<p>SonarQube code analysis: send the project to SonarQube in order to get the static code analysis of your project.</p>
</li>
<li>
<p>Build Application: compile the application to be ready to deploy in a web server.</p>
</li>
<li>
<p>Deliver application into Nexus: store all compiled files in Nexus3 as a zip file.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-docker</code>]]</p>
</div>
</li>
<li>
<p>If <code>--docker</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application using the image created in the previous stage. The previous version is removed.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-openshift</code>]]</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>--openshift</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project using a OpenShift build config.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application in OpenShift.</p>
</li>
<li>
<p>Check pod status: checks that the application deployed in the previous stage is running properly. If the application does not run the pipeline will fail.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>post: actions that will be executed after the stages. We use it to clean up all files.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="devon4net-docker-generated-files"><a class="anchor" href="#devon4net-docker-generated-files"></a>devon4net Docker generated files</h6>
<div class="paragraph">
<p>When you generate the files for devon4net you can also pass the option <code>--docker</code>. It will generate also some extra files related to docker.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you pass the <code>--docker</code> option the option <code>--registryurl</code> is also required. It will be used to upload the images to a docker registry. Example: if your registry url is <code>docker-registry-test.s2-eu.capgemini.com</code> you should execute the command in this way: <code>cicdgen generate devon4net --groupid com.devonfw --docker `--registryurl</code> docker-registry-test.s2-eu.capgemini.com`.
</td>
</tr>
</table>
</div>
<div class="sect6">
<h7 id="files-6"><a class="anchor" href="#files-6"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>.dockerignore</p>
<div class="paragraph">
<p>In this files are defined the folders that will not be copied to the docker image. Fore more information read the <a href="https://docs.docker.com/engine/reference/builder/#dockerignore-file">official documentation</a>.</p>
</div>
</li>
<li>
<p>Dockerfile</p>
<div class="paragraph">
<p>This file contains the instructions to build a docker image for your project. This Dockerfile is for local development purposes, you can use it in your machine executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd &lt;path-to-your-project&gt;
$ docker build -t &lt;project-name&gt;/&lt;tag&gt; .</pre>
</div>
</div>
</li>
<li>
<p>Dockerfile.ci</p>
<div class="paragraph">
<p>This file contains the instructions to create a docker image for you project. The main difference with the Dockerfile is that this file will be only used in the Jenkins pipeline. Instead of compiling again the code, it takes all compiled files from Jenkins to the image.</p>
</div>
</li>
</ul>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect4">
<h5 id="devon4node-schematic"><a class="anchor" href="#devon4node-schematic"></a>devon4node schematic</h5>
<div class="paragraph">
<p>With the <code>cicdgen generate devon4node</code> command you can generate some files required for CICD. In this section we will explain the arguments of this command and also the files that will be generated.</p>
</div>
<div class="sect5">
<h6 id="devon4node-schematic-arguments"><a class="anchor" href="#devon4node-schematic-arguments"></a>devon4node schematic arguments</h6>
<div class="paragraph">
<p>When you execute the <code>cicdgen generate devon4node</code> command you can also add some arguments in order to modify the behaviour of the command. Those arguments are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>--docker</p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, docker related files and pipeline stage will be also generated. For more details see docker section of Jenkinsfile and <a href="#devon4node-docker-generated-files">files generated for docker</a></p>
</div>
</li>
<li>
<p><code>--dockerurl</code></p>
<div class="paragraph">
<p>The URL of your external docker daemon. Example: tcp://127.0.0.1:2376</p>
</div>
</li>
<li>
<p><code>--dockercertid</code></p>
<div class="paragraph">
<p>The Jenkins credential id for your docker daemon certificate. It is only required when your docker daemon is secure.</p>
</div>
</li>
<li>
<p><code>--registryurl</code></p>
<div class="paragraph">
<p>Your docker registry URL. It is required when <code>--docker</code> is true, and it will be used to know where the docker image will be uploaded.</p>
</div>
</li>
<li>
<p><code>--openshift</code></p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, OpenShift related files and pipeline stage will be also generated. For more details see OpenShift section of Jenkinsfile and <a href="#devon4node-docker-generated-files">files generated for OpenShift</a> (same as <code>--docker</code>)</p>
</div>
</li>
<li>
<p><code>--ocname</code></p>
<div class="paragraph">
<p>The name used for register your OpenShift cluster in Jenkins.</p>
</div>
</li>
<li>
<p><code>--ocn</code></p>
<div class="paragraph">
<p>OpenShift cluster namespace</p>
</div>
</li>
<li>
<p>--groupid</p>
<div class="paragraph">
<p>The project <code>groupId</code>. This argument is required. It will be used for store the project in a maven repository at Nexus 3. Why maven? Because is the kind of repository where we can upload/download a zip file easily. Npm repository needs a package.json file but, as we compile the angular application to static javascript and html files, the package.json is no needed anymore.</p>
</div>
</li>
<li>
<p>--teams</p>
<div class="paragraph">
<p>With this argument we can add the teams notification option in the <code><a href="#jenkinsfile-teams</code>">Jenkinsfile</a>.</p>
</div>
</li>
<li>
<p><code>--teamsname</code></p>
<div class="paragraph">
<p>The name of the Microsoft Teams <code>webhook</code>. It is defined at Microsoft Teams connectors.</p>
</div>
</li>
<li>
<p><code>--teamsurl</code></p>
<div class="paragraph">
<p>The url of the Microsoft Teams <code>webhook</code>. It is returned by Microsoft Teams when you create a connector.</p>
</div>
</li>
<li>
<p>--merge</p>
<div class="paragraph">
<p>If you have used cicdgen previously, you can choose what you want to do in case of file conflict. The default behavior is to throw an error and not modify any file. You can see the other strategies on their <a href="merge-strategies.adoc">specific page</a>.</p>
</div>
</li>
<li>
<p>--commit</p>
<div class="paragraph">
<p>If true, all changes will be committed at the end of the process (if possible). In order to send a false value, you need to write <code>--commit=false</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="devon4node-generated-files"><a class="anchor" href="#devon4node-generated-files"></a>devon4node generated files</h6>
<div class="paragraph">
<p>When you execute the generate devon4node command, some files will be added/updated in your project.</p>
</div>
<div class="sect6">
<h7 id="files-7"><a class="anchor" href="#files-7"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>package.json</p>
<div class="paragraph">
<p>The package.json is modified in order to add a script for run the linter and generate the json report. This script is called <code>lint:ci</code>.</p>
</div>
</li>
<li>
<p>Jenkinsfile</p>
<div class="paragraph">
<p>The Jenkinsfile is the file which define the Jenkins pipeline of our project. With this we can execute the test, build the application and deploy it automatically following a CICD methodology. This file is prepared to work with the Production Line default values, but it is also fully configurable to your needs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prerequisites</p>
<div class="ulist">
<ul>
<li>
<p>A Production Line instance. It can works also if you have a Jenkins, SonarQube and Nexus3, but in this case maybe you need to configure them properly.</p>
</li>
<li>
<p>NodeJS installed in Jenkins as a global tool.</p>
</li>
<li>
<p>SonarQube installed in Jenkins as a global tool.</p>
</li>
<li>
<p>Maven3 installed in Jenkins as a global tool.</p>
</li>
<li>
<p>A maven global settings properly configured in Jenkins.</p>
</li>
<li>
<p>If you will use docker :</p>
<div class="ulist">
<ul>
<li>
<p>Docker installed in Jenkins as a global custom tool.</p>
</li>
<li>
<p>The Nexus3 with a docker repository.</p>
</li>
<li>
<p>A machine with docker installed where the build and deploy will happen.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you will use OpenShift :</p>
<div class="ulist">
<ul>
<li>
<p>An OpenShift instance</p>
</li>
<li>
<p>The OpenShift projects created</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The Jenkins syntax</p>
<div class="paragraph">
<p>In this section we will  explain a little bit the syntax of the Jenkins, so if you need to change something you will be able to do it properly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>agent: Here you can specify the Jenkins agent where the pipeline will be executed. The default value is any.</p>
</li>
<li>
<p>options: Here you can set global options for the pipeline. By default, we add a build discarded to delete old artifacts/build of the pipeline and also we disable the concurrent builds.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-teams</code>]]
If the teams option is passed to cicdgen, we add a new option in order to send notifications to Microsoft Teams with the status of the pipeline executions.</p>
</div>
</li>
<li>
<p>tools: Here we define the global tools configurations. By default a version of nodejs is added here.</p>
</li>
<li>
<p>environment: Here all environment variables are defined. All values defined here matches with the Production Line defaults. If you Jenkins has other values, you need to update it manually.</p>
</li>
<li>
<p>stages: Here are defined all stages that our pipeline will execute. Those stages are:</p>
<div class="ulist">
<ul>
<li>
<p>Loading Custom Tools: in this stage some custom tools are loaded. Also we set some variables depending on the git branch which you are executing.</p>
</li>
<li>
<p>Fresh Dependency Installation: install all packages need to build/run your node project.</p>
</li>
<li>
<p>Code Linting: execute the linter analysis.</p>
</li>
<li>
<p>Execute tests: execute the tests.</p>
</li>
<li>
<p>SonarQube code analysis: send the project to SonarQube in order to get the static code analysis of your project.</p>
</li>
<li>
<p>Build Application: compile the application to be ready to deploy in a web server.</p>
</li>
<li>
<p>Deliver application into Nexus: store all compiled files in Nexus3 as a zip file.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-docker</code>]]</p>
</div>
</li>
<li>
<p>If <code>--docker</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application using the image created in the previous stage. The previous version is removed.</p>
<div class="paragraph">
<p>[[<code>jenkinsfile-openshift</code>]]</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>--openshift</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project using a OpenShift build config.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application in OpenShift.</p>
</li>
<li>
<p>Check pod status: checks that the application deployed in the previous stage is running properly. If the application does not run the pipeline will fail.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>post: actions that will be executed after the stages. We use it to clean up all files.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="devon4node-docker-generated-files"><a class="anchor" href="#devon4node-docker-generated-files"></a>devon4node Docker generated files</h6>
<div class="paragraph">
<p>When you generate the files for a devon4node you can also pass the option <code>--docker</code>. It will generate also some extra files related to docker.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you pass the <code>--docker</code> option the option <code>--registryurl</code> is also required. It will be used to upload the images to a docker registry. Example: if your registry url is <code>docker-registry-test.s2-eu.capgemini.com</code> you should execute the command in this way: <code>cicdgen generate devon4node --groupid com.devonfw --docker `--registryurl</code> docker-registry-test.s2-eu.capgemini.com`.
</td>
</tr>
</table>
</div>
<div class="sect6">
<h7 id="files-8"><a class="anchor" href="#files-8"></a>Files</h7>
<div class="ulist">
<ul>
<li>
<p>.dockerignore</p>
<div class="paragraph">
<p>In this files are defined the folders that will not be copied to the docker image. Fore more information read the <a href="https://docs.docker.com/engine/reference/builder/#dockerignore-file">official documentation</a>.</p>
</div>
</li>
<li>
<p>Dockerfile</p>
<div class="paragraph">
<p>This file contains the instructions to build a docker image for you project. This Dockerfile is for local development purposes, you can use it in your machine executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd &lt;path-to-your-project&gt;
$ docker build -t &lt;project-name&gt;/&lt;tag&gt; .</pre>
</div>
</div>
<div class="paragraph">
<p>This build is installs all dependencies in ordre to build the project and then remove all devDependencies in order to keep only the production dependencies.</p>
</div>
</li>
<li>
<p>.dockerignore.ci</p>
<div class="paragraph">
<p>Another .dockerignore. The purpose of this one is to define de file exclusions in your CI pipeline.</p>
</div>
</li>
<li>
<p>Dockerfile.ci</p>
<div class="paragraph">
<p>This file contains the instructions to create a docker image for you project. The main difference with the Dockerfile is that this file will be only used in the Jenkins pipeline. Instead of compiling again the code, it takes all compiled files from Jenkins to the image.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
