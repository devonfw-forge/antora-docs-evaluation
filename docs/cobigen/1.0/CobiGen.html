<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="cobigen" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Cobigen</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/cobigen/edit/master/modules/ROOT/pages/CobiGen.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_cobigencode_based_incremental_generator"><a class="anchor" href="#_cobigencode_based_incremental_generator"></a>CobiGen&#8201;&#8212;&#8201;Code-based incremental Generator</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_document_description"><a class="anchor" href="#_document_description"></a>Document Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document contains the documentation of the CobiGen core module as well as all CobiGen plug-ins and the CobiGen eclipse integration.</p>
</div>
<div class="paragraph">
<p><strong>Current versions:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>CobiGen - Eclipse Plug-in v4.4.1</p>
</li>
<li>
<p>CobiGen - Maven Build Plug-in v4.1.0</p>
</li>
</ul>
</div>
<hr>
<div class="ulist">
<ul>
<li>
<p>CobiGen v5.3.1</p>
</li>
<li>
<p>CobiGen - Java Plug-in v2.1.0</p>
</li>
<li>
<p>CobiGen - XML Plug-in v4.1.0</p>
</li>
<li>
<p>CobiGen - TypeScript Plug-in v2.2.0</p>
</li>
<li>
<p>CobiGen - Property Plug-in v2.0.0</p>
</li>
<li>
<p>CobiGen - Text Merger v2.0.0</p>
</li>
<li>
<p>CobiGen - JSON Plug-in v2.0.0</p>
</li>
<li>
<p>CobiGen - HTML Plug-in v2.0.1</p>
</li>
<li>
<p>CobiGen - Open API Plug-in v2.3.0</p>
</li>
<li>
<p>CobiGen - FreeMaker Template Engine v2.0.0</p>
</li>
<li>
<p>CobiGen - Velocity Template Engine v2.0.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Authors:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Malte Brunnlieb</p>
</li>
<li>
<p>Jaime Diaz Gonzalez</p>
</li>
<li>
<p>Steffen Holzer</p>
</li>
<li>
<p>Ruben Diaz Martinez</p>
</li>
<li>
<p>Joerg Hohwiller</p>
</li>
<li>
<p>Fabian Kreis</p>
</li>
<li>
<p>Lukas Goerlach</p>
</li>
<li>
<p>Krati Shah</p>
</li>
<li>
<p>Christian Richter</p>
</li>
<li>
<p>Erik Grüner</p>
</li>
<li>
<p>Mike Schumacher</p>
</li>
<li>
<p>Marco Rose</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>==Guide to the Reader</p>
</div>
<div class="paragraph">
<p>Dependent on the intention you are reading this document, you might be most interested in the following chapters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If this is <strong>your first contact with CobiGen</strong>, you will be interested in the <a href="home.adoc">general purpose</a> of CobiGen, in the <a href="mgmt_license-agreement.adoc">licensing of CobiGen</a>, as well as in the <a href="mgmt_shared-service.adoc">Shared Service</a> provided for CobiGen. Additionally, there are some <a href="cobigen-usecases.adoc">general use cases</a>, which are currently implemented and maintained to be used out of the box.</p>
</li>
<li>
<p>As a <strong>user of the CobiGen Eclipse integration</strong>, you should focus on the <a href="cobigen-eclipse_installation">Installation</a> and <a href="cobigen-eclipse_usage">Usage</a> chapters to get a good introduction about how to use CobiGen in eclipse.</p>
</li>
<li>
<p>As a <strong>user of the Maven integration</strong>, you should focus on the <a href="cobigen-maven_configuration">Maven configuration</a> chapter, which guides you through the integration of CobiGen into your build configuration.</p>
</li>
<li>
<p>If you like to <strong>adapt the configuration of CobiGen</strong>, you have to step deeper into the <a href="cobigen-core_configuration.adoc">configuration guide</a> as well as into the plug-in configuration extensions for the <a href="cobigen-javaplugin.adoc">Java Plug-in</a>, <a href="cobigen-xmlplugin.adoc">XML-Plugin</a>, <a href="cobigen-propertyplugin.adoc">Java Property Plug-in</a>, as well as for the <a href="cobigen-textmerger.adoc">Text-Merger Plug-in</a>.</p>
</li>
<li>
<p>Finally, if you want to <strong>develop your own templates</strong>, you will be thankful for <a href="cobigen-templates_helpful-links.adoc">helpful links</a> in addition to the plug-ins documentation as referenced in the previous point.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/CobiGen.adoc - include::Home[]</p>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==General use cases</p>
</div>
<div class="paragraph">
<p>In addition to the <a href="Home#selection-of-current-and-past-cobigen-applications">selection of CobiGen applications</a> introduced before, this chapter provides a more detailed overview about the currently implemented and maintained general use cases. These can be used by any project following a supported reference architecture as e.g. the <a href="https://github.com/devonfw">devonfw</a> or <a href="http://www.bva.bund.de/SharedDocs/Downloads/DE/BIT/RegisterFactory/Whitepaper_Register_Factory.html">Register Factory</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_devon4j"><a class="anchor" href="#_devon4j"></a>devon4j</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With our templates for <a href="https://github.com/devonfw/devon4j">devon4j</a>, you can generate a whole CRUD application from a single Entity class. You save the effort for creating, DAOs, Transfer Objects, simple CRUD use cases with REST services and even the client application can be generated.</p>
</div>
<div class="sect2">
<h3 id="_crud_server_application_for_devon4j"><a class="anchor" href="#_crud_server_application_for_devon4j"></a>CRUD server application for devon4j</h3>
<div class="paragraph">
<p>For the server, the required files for all architectural layers (Data access, logic, and service layer) can be created based on your Entity class. After the generation, you have CRUD functionality for the entity from bottom to top which can be accessed via a RESTful web service. Details are provided in the <a href="https://github.com/devonfw/devon/wiki/tutorial-devon-generator">devonfw wiki</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_crud_client_application_for_devon4ng"><a class="anchor" href="#_crud_client_application_for_devon4ng"></a>CRUD client application for devon4ng</h3>
<div class="paragraph">
<p>Based on the REST services on the server, you can also generate an <a href="https://angularjs.org/">Angular</a> client based on <a href="https://github.com/devonfw/devon4ng">devon4ng</a>. With the help of <a href="https://nodejs.org/">Node.js</a>, you have a working client application for displaying your entities within minutes!</p>
</div>
</div>
<div class="sect2">
<h3 id="_test_data_builder_for_devon4j"><a class="anchor" href="#_test_data_builder_for_devon4j"></a>Test data Builder for devon4j</h3>
<div class="paragraph">
<p>Generating a builder pattern for POJOs to easily create test data in your tests. CobiGen is not only able to generate a plain builder pattern but rather builder, which follow a specific concept to minimize test data generation efforts in your unit tests. The following <code>Person</code> class as an example:</p>
</div>
<div class="listingblock">
<div class="title">Person class</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Person {

    private String firstname;
    private String lastname;
    private int birthyear;
    @NotNull
    private Address address;

    @NotNull
    public String getFirstname() {
        return this.firstname;
    }

    // additional default setter and getter
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is a simple POJO with a validation annotation, to indicate, that <code>firstname</code> should never be <code>null</code>. Creating this object in a test would imply to call every setter, which is kind of nasty. Therefore, the Builder Pattern has been introduced for quite a long time in software engineering, allowing to easily create POJOs with a fluent API. See below.</p>
</div>
<div class="listingblock">
<div class="title">Builder pattern example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Person person = new PersonBuilder()
                .firstname("Heinz")
                .lastname("Erhardt")
                .birthyear(1909)
                .address(
                    new AddressBuilder().postcode("22222")
                        .city("Hamburg").street("Luebecker Str. 123")
                        .createNew())
                .addChild(
                    new PersonBuilder()[...].createNew()).createNew();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Builder API generated by CobiGen allows you to set any setter accessible field of a POJO in a fluent way. But in addition lets assume a test, which should check the birth year as precondition for any business operation. So specifying all other fields of <code>Person</code>, especially <code>firstname</code> as it is mandatory to enter business code, would not make sense. The test behavior should just depend on the specification of the birth year and on no other data. So we would like to just provide this data to the test.</p>
</div>
<div class="paragraph">
<p>The Builder classes generated by CobiGen try to tackle this inconvenience by providing the ability to declare default values for any mandatory field due to validation or database constraints.</p>
</div>
<div class="listingblock">
<div class="title">Builder Outline</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class PersonBuilder {

    private void fillMandatoryFields() {
        firstname("lasdjfaöskdlfja");
        address(new AddressBuilder().createNew());
    };
    private void fillMandatoryFields_custom() {...};

    public PersonBuilder firstname(String value);
    public PersonBuilder lastname(String value);
    ...

    public Person createNew();
    public Person persist(EntityManager em);
    public List&lt;Person&gt; persistAndDuplicate(EntityManager em, int count);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looking at the plotted builder API generated by CobiGen, you will find two <code>private</code> methods. The method <code>fillMandatoryFields</code> will be generated by CobiGen and regenerated every time CobiGen generation will be triggered for the <code>Person</code> class. This method will set every automatically detected field with not <code>null</code> constraints to a default value. However, by implementing <code>fillMandatoryFields_custom</code> on your own, you can reset these values or even specify more default values for any other field of the object. Thus, running <code>new PersonBuilder().birthyear(1909).createNew();</code> will create a valid object of <code>Person</code>, which is already pre-filled such that it does not influence the test execution besides the fact that it circumvents database and validation issues.</p>
</div>
<div class="paragraph">
<p>This even holds for complex data structures as indicated by <code>address(new AddressBuilder().createNew());</code>. Due to the use of the <code>AddressBuilder</code> for setting the default value for the field <code>address</code>, also the default values for <code>Address</code> will be set automatically.</p>
</div>
<div class="paragraph">
<p>Finally, the builder API provides different methods to create new objects.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>createNew()</code> just creates a new object from the builder specification and returns it.</p>
</li>
<li>
<p><code>persist(EntityManager)</code> will create a new object from the builder specification and persists it to the database.</p>
</li>
<li>
<p><code>persistAndDuplicate(EntityManager, int)</code> will create the given amount of objects form the builder specification and persists all of these. After the initial generation of each builder, you might want to adapt the method body as you will most probably not be able to persist more than one object with the same field assignments to the database due to <code>unique</code> constraints. Thus, please see the generated comment in the method to adapt <code>unique</code> fields accordingly before persisting to the database.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_custom_builder_for_business_needs"><a class="anchor" href="#_custom_builder_for_business_needs"></a>Custom Builder for Business Needs</h4>
<div class="paragraph">
<p>CobiGen just generates basic builder for any POJO. However, for project needs you probably would like to have even more complex builders, which enable the easy generation of more complex test data which are encoded in a large object hierarchy. Therefore, the generated builders can just be seen as a tool to achieve this. You can define your own business driven builders in the same way as the generated builders, but explicitly focusing on your business needs. Just take this example as a demonstration of that idea:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  University uni = new ComplexUniversityBuilder()
    .withStudents(200)
    .withProfessors(4)
    .withExternalStudent()
    .createNew();</code></pre>
</div>
</div>
<div class="paragraph">
<p>E.g. the method <code>withExternalStudent()</code> might create a person, which is a student and is flagged to be an external student. Basing this implementation on the generated builders will even assure that you would benefit from any default values you have set before. In addition, you can even imagine any more complex builder methods setting values driven your reusable testing needs based on the specific business knowledge.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_register_factory"><a class="anchor" href="#_register_factory"></a>Register Factory</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_crud_server_application"><a class="anchor" href="#_crud_server_application"></a>CRUD server application</h3>
<div class="paragraph">
<p>Generates a CRUD application with persistence entities as inputs. This includes DAOs, TOs, use cases, as well as a CRUD JSF user interface if needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_test_data_builder"><a class="anchor" href="#_test_data_builder"></a>Test data Builder</h3>
<div class="paragraph">
<p>Analogous to <a href="#testdata-builder-for-devon4j">Test data Builder for devon4J</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_test_documentation"><a class="anchor" href="#_test_documentation"></a>Test documentation</h3>
<div class="paragraph">
<p>Generate test documentation from test classes. The input are the doclet tags of several test classes, which e.g. can specify a description, a cross-reference, or a test target description. The result currently is a csv file, which lists all tests with the corresponding meta-information. Afterwards, this file might be styled and passed to the customer if needed and it will be up-to-date every time!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cobigen"><a class="anchor" href="#_cobigen"></a>CobiGen</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>==Configuration</p>
</div>
<div class="paragraph">
<p>CobiGen is maintaining a home directory further referenced in this documentation as <code>$cghome</code>, which is used to maintain temporary or transient data. The home folder is determined with the following location fall-back:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>System environment variable <code>COBIGEN_HOME</code> (e.g. <code>C:\project\ide\conf\cobigen-home</code>)</p>
</li>
<li>
<p><code>.cobigen</code> directory in OS user home (e.g. <code>~/.cobigen</code>)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The actual configuration of CobiGen is maintained by a single folder or jar. The location can be configured with respect to the implemented configuration fall-back mechanism. CobiGen will search for the location of the configuration in the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A configuration jar or directory, which is passed to CobiGen by the Maven or Eclipse integration or any other program using the CobiGen programming interface:
1.1. the Maven integration allows to configure a jar dependency to be included in the currently running classpath <em>(of interest for <a href="cobigen-maven_configuration#plugin-injection-since-v3.adoc">maven configuration</a></em>
1.2. the Eclipse integration allows to specify a <code>CobiGen_Templates</code> project in the eclipse workspace</p>
</li>
<li>
<p>The file <code>$cghome/.cobigen</code> exists and the property <code>templates</code> is set to a valid configuration (e.g. <code>templates=C:\project\ide\conf\templates</code> or <code>templates=C:\project\ide\conf\templates.jar</code>) <em>Hint: Check for log entry like <code>Value of property templates in $cghome/.cobigen is invalid</code> to identify an invalid configuration which is not taken up as expected</em></p>
</li>
<li>
<p>The folder <code>$cghome/templates/CobiGen_Templates</code> exists</p>
</li>
<li>
<p>The lexicographical sorted first configuration jar of the following path pattern <code>$cghome/templates/templates-([^-]+)-(\\d+\\.?)+.jar</code> if exists (e.g. <code>templates-devon4j-2020.04.001</code>)</p>
</li>
<li>
<p>CobiGen will automatically download the latest jar configuration from maven central with <code>groupId</code> <code>com.devonfw.cobigen</code> and <code>artifactId</code> <code>templates-devon4j</code> and take it like described in 4.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Within the configuration jar or directory you will find the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>CobiGen_Templates
 |- templateFolder1
    |- templates.xml
 |- templateFolder2
    |- templates.xml
 |- context.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find some examples <a href="https://github.com/devonfw/cobigen/tree/master/cobigen-templates">here</a>.</p>
</div>
<div class="sect3">
<h4 id="_context_configuration"><a class="anchor" href="#_context_configuration"></a>Context Configuration</h4>
<div class="paragraph">
<p>The context configuration (<code>context.xml</code>) always has the following root structure:</p>
</div>
<div class="listingblock">
<div class="title">Context Configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;contextConfiguration xmlns="http://capgemini.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      version="1.0"&gt;
    &lt;triggers&gt;
        ...
    &lt;/triggers&gt;
&lt;/contextConfiguration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The context configuration has a <code>version</code> attribute, which should match the XSD version the context configuration is an instance of. It should not state the version of the currently released version of CobiGen. This attribute should be maintained by the context configuration developers. If configured correctly, it will provide a better feedback for the user and thus higher user experience. Currently there is only the version v1.0. For further version there will be a changelog later on.</p>
</div>
<div class="sect4">
<h5 id="_trigger_node"><a class="anchor" href="#_trigger_node"></a>Trigger Node</h5>
<div class="paragraph">
<p>As children of the <code>&lt;triggers&gt;</code> node you can define different triggers. By defining a <code>&lt;trigger&gt;</code> you declare a mapping between special inputs and a <code>templateFolder</code>, which contains all templates, which are worth to be generated with the given input.</p>
</div>
<div class="listingblock">
<div class="title">trigger configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="..." templateFolder="..." inputCharset="UTF-8" &gt;
    ...
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The attribute <code>id</code> should be unique within an context configuration. It is necessary for efficient internal processing.</p>
</li>
<li>
<p>The attribute <code>type</code> declares a specific <em>trigger interpreter</em>, which might be provided by additional plug-ins. A <em>trigger interpreter</em> has to provide an <em>input reader</em>, which reads specific inputs and creates a template object model out of it to be processed by the FreeMarker template engine later on. Have a look at the plug-in&#8217;s documentation of your interest and see, which trigger types and thus inputs are currently supported.</p>
</li>
<li>
<p>The attribute <code>templateFolder</code> declares the relative path to the template folder, which will be used if the trigger gets activated.</p>
</li>
<li>
<p>The attribute <code>inputCharset</code> <em>(optional)</em> determines the charset to be used for reading any input file.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_matcher_node"><a class="anchor" href="#_matcher_node"></a>Matcher Node</h5>
<div class="paragraph">
<p>A trigger will be activated if its matchers hold the following formula:</p>
</div>
<div class="paragraph">
<p><code>!(NOT || &#8230;&#8203; || NOT) &amp;&amp; AND &amp;&amp; &#8230;&#8203; &amp;&amp; AND &amp;&amp; (OR || &#8230;&#8203; || OR)</code></p>
</div>
<div class="paragraph">
<p>Whereas NOT/AND/OR describes the <code>accumulationType</code> of a <em>matcher</em> (see below) and e.g. <code>NOT</code> means 'a <em>matcher</em> with <code>accumulationType</code> NOT matches a given input'. Thus additionally to an <em>input reader</em>, a <em>trigger interpreter</em> has to define at least one set of <em>matchers</em>, which are satisfiable, to be fully functional. A <code>&lt;matcher&gt;</code> node declares a specific characteristics a valid input should have.</p>
</div>
<div class="listingblock">
<div class="title">Matcher Configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;matcher type="..." value="..." accumulationType="..."&gt;
    ...
&lt;/matcher&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The attribute <code>type</code> declares a specific type of <em>matcher</em>, which has to be provided by the surrounding <em>trigger interpreter</em>. Have a look at the plug-in&#8217;s documentation, which also provides the used trigger type for more information about valid matcher and their functionalities.</p>
</li>
<li>
<p>The attribute <code>value</code> might contain any information necessary for processing the <em>matcher&#8217;s</em> functionality. Have a look at the relevant plug-in&#8217;s documentation for more detail.</p>
</li>
<li>
<p>The attribute <code>accumulationType</code> <em>(optional)</em> specifies how the matcher will influence the trigger activation. Valid values are:</p>
<div class="ulist">
<ul>
<li>
<p>OR (default): if any matcher of accumulation type OR <em>matches</em>, the trigger will be activated as long as there are no further matchers with different accumulation types</p>
</li>
<li>
<p>AND: if any matcher with AND accumulation type does <em>not match</em>, the trigger will <em>not</em> be activated</p>
</li>
<li>
<p>NOT: if any matcher with NOT accumulation type <em>matches</em>, the trigger will <em>not</em> be activated</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_variable_assignment_node"><a class="anchor" href="#_variable_assignment_node"></a>Variable Assignment Node</h5>
<div class="paragraph">
<p>Finally, a <code>&lt;matcher&gt;</code> node can have multiple <code>&lt;variableAssignment&gt;</code> nodes as children. <em>Variable assignments</em> allow to parametrize the generation by additional values, which will be added to the object model for template processing. The variables declared using <em>variable assignments</em>, will be made accessible in the templates.xml as well in the object model for template processing via the namespace <code>variables.*</code>.</p>
</div>
<div class="listingblock">
<div class="title">Complete Configuration Pattern</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;contextConfiguration xmlns="http://capgemini.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      version="1.0"&gt;
    &lt;triggers&gt;
        &lt;trigger id="..." type="..." templateFolder="..."&gt;
            &lt;matcher type="..." value="..."&gt;
                &lt;variableAssignment type="..." key="..." value="..." /&gt;
            &lt;/matcher&gt;
        &lt;/trigger&gt;
    &lt;/triggers&gt;
&lt;/contextConfiguration&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The attribute <code>type</code> declares the type of <em>variable assignment</em> to be processed by the <em>trigger interpreter</em> providing plug-in. This attribute enables <em>variable assignments</em> with different dynamic value resolutions.</p>
</li>
<li>
<p>The attribute <code>key</code> declares the namespace under which the resolved value will be accessible later on.</p>
</li>
<li>
<p>The attribute <code>value</code> might declare a constant value to be assigned or any hint for value resolution done by the <em>trigger interpreter</em> providing plug-in. For instance, if <code>type</code> is <code>regex</code>, then on <code>value</code> you will assign the matched group number by the regex (1, 2, 3&#8230;&#8203;)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_container_matcher_node"><a class="anchor" href="#_container_matcher_node"></a>Container Matcher Node</h5>
<div class="paragraph">
<p>The <code>&lt;containerMatcher&gt;</code> node is an additional matcher for matching containers of multiple input objects.
Such a container might be a package, which encloses multiple types or---more generic---a model, which encloses multiple elements. A container matcher can be declared side by side with other matchers:</p>
</div>
<div class="listingblock">
<div class="title"><code>ContainerMatcher</code> Declaration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;contextConfiguration xmlns="http://capgemini.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      version="1.0"&gt;
    &lt;triggers&gt;
        &lt;trigger id="..." type="..." templateFolder="..." &gt;
            &lt;containerMatcher type="..." value="..." retrieveObjectsRecursively="..." /&gt;
            &lt;matcher type="..." value="..."&gt;
                &lt;variableAssignment type="..." variable="..." value="..." /&gt;
            &lt;/matcher&gt;
        &lt;/trigger&gt;
    &lt;/triggers&gt;
&lt;/contextConfiguration&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The attribute <code>type</code> declares a specific type of <em>matcher</em>, which has to be provided by the surrounding <em>trigger interpreter</em>. Have a look at the plug-in&#8217;s documentation, which also provides the used trigger type for more information about valid matcher and their functionalities.</p>
</li>
<li>
<p>The attribute <code>value</code> might contain any information necessary for processing the <em>matcher&#8217;s</em> functionality. Have a look at the relevant plug-in&#8217;s documentation for more detail.</p>
</li>
<li>
<p>The attribute <code>retrieveObjectsRecursively</code> <em>(optional boolean)</em> states, whether the children of the input should be retrieved recursively to find matching inputs for generation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The semantics of a container matchers are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>&lt;containerMatcher&gt;</code> does not declare any <code>&lt;variableAssignment&gt;</code> nodes</p>
</li>
<li>
<p>A <code>&lt;containerMatcher&gt;</code> matches an input if and only if one of its enclosed elements satisfies a set of <code>&lt;matcher&gt;</code> nodes of the same <code>&lt;trigger&gt;</code></p>
</li>
<li>
<p>Inputs, which match a <code>&lt;containerMatcher&gt;</code> will cause a generation for each enclosed element</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_templates_configuration"><a class="anchor" href="#_templates_configuration"></a>Templates Configuration</h4>
<div class="paragraph">
<p>The template configuration (<code>templates.xml</code>) specifies, which templates exist and under which circumstances it will be generated. There are two possible configuration styles:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure the template meta-data for each template file by <a href="#template-node">template nodes</a></p>
</li>
<li>
<p><code><em>(since cobigen-core-v1.2.0)</em></code>: Configure <code><a href="#templatescan-node">templateScan nodes</a></code> to automatically retrieve a default configuration for all files within a configured folder and possibly modify the automatically configured templates using <a href="#templateextension-node"><code>templateExtension</code> nodes</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To get an intuition of the idea, the following will initially describe the first (more extensive) configuration style. Such an configuration root structure looks as follows:</p>
</div>
<div class="listingblock">
<div class="title">Extensive Templates Configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;templatesConfiguration xmlns="http://capgemini.com"
                        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        version="1.0" templateEngine="FreeMarker"&gt;
    &lt;templates&gt;
            ...
    &lt;/templates&gt;
    &lt;increments&gt;
            ...
    &lt;/increments&gt;
&lt;/templatesConfiguration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The root node <code>&lt;templatesConfiguration&gt;</code> specifies two attributes. The attribute <code>version</code> provides further usability support and will be handled analogous to the <code>version</code> attribute of the <a href="#context-configuration">context configuration</a>. The optional attribute <code>templateEngine</code> specifies the template engine to be used for processing the templates (<em>since `cobigen-core-4.0.0`</em>). By default it is set to FreeMarker.</p>
</div>
<div class="paragraph">
<p>The node <code>&lt;templatesConfiguration&gt;</code> allows two different grouping nodes as children. First, there is the <code>&lt;templates&gt;</code> node, which groups all declarations of templates. Second, there is the <code>&lt;increments&gt;</code> node, which groups all declarations about increments.</p>
</div>
<div class="sect4">
<h5 id="_template_node"><a class="anchor" href="#_template_node"></a>Template Node</h5>
<div class="paragraph">
<p>The <code>&lt;templates&gt;</code> node groups multiple <code>&lt;template&gt;</code> declarations, which enables further generation. Each template file should be registered at least once as a template to be considered.</p>
</div>
<div class="listingblock">
<div class="title">Example Template Configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;templates&gt;
    &lt;template name="..." destinationPath="..." templateFile="..." mergeStrategy="..." targetCharset="..." /&gt;
    ...
&lt;/templates&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A template declaration consist of multiple information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The attribute <code>name</code> specifies an unique ID within the templates configuration, which will later be reused in the <a href="#increment-node">increment definitions</a>.</p>
</li>
<li>
<p>The attribute <code>destinationPath</code> specifies the destination path the template will be generated to. It is possible to use all variables defined by <a href="#variableassignment-node">variable assignments</a> within the path declaration using the FreeMarker syntax <code>${variables.*}</code>. While resolving the variable expressions, each dot within the value will be automatically replaced by a slash. This behavior is accounted for by the transformations of Java packages to paths as CobiGen has first been developed in the context of the Java world. Furthermore, the destination path variable resolution provides the following additional built-in operators analogue to the FreeMarker syntax:</p>
<div class="ulist">
<ul>
<li>
<p><code>?cap_first</code> analogue to <a href="http://freemarker.org/docs/ref_builtins_string.html#ref_builtin_cap_first">FreeMarker</a></p>
</li>
<li>
<p><code>?uncap_first</code> analogue to <a href="http://freemarker.org/docs/ref_builtins_string.html#ref_builtin_uncap_first">FreeMarker</a></p>
</li>
<li>
<p><code>?lower_case</code> analogue to <a href="http://freemarker.org/docs/ref_builtins_string.html#ref_builtin_lower_case">FreeMarker</a></p>
</li>
<li>
<p><code>?upper_case</code> analogue to <a href="http://freemarker.org/docs/ref_builtins_string.html#ref_builtin_upper_case">FreeMarker</a></p>
</li>
<li>
<p><code>?replace(regex, replacement)</code> - Replaces all occurrences of the regular expression <code>regex</code> in the variable&#8217;s value with the given <code>replacement</code> string. (since <code>cobigen-core v1.1.0</code>)</p>
</li>
<li>
<p><code>?removeSuffix(suffix)</code> - Removes the given <code>suffix</code> in the variable&#8217;s value iff the variable&#8217;s value ends with the given <code>suffix</code>. Otherwise nothing will happen. (since <code>cobigen-core v1.1.0</code>)</p>
</li>
<li>
<p><code>?removePrefix(prefix)</code> - Analogue to <code>?removeSuffix</code> but removes the prefix of the variable&#8217;s value. (since <code>cobigen-core v1.1.0</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>The attribute <code>templateFile</code> describes the relative path dependent on the template folder specified in the <a href="#trigger-node">trigger</a> to the template file to be generated.</p>
</li>
<li>
<p>The attribute <code>mergeStrategy</code> <em>(optional)</em> can be <em>optionally</em> specified and declares the type of merge mechanism to be used, when the <code>destinationPath</code> points to an already existing file. CobiGen by itself just comes with a <code>mergeStrategy</code> <code>override</code>, which enforces file regeneration in total. Additional available merge strategies have to be obtained from the different plug-in&#8217;s documentations (see here for <a href="cobigen-javaplugin#merger-extensions.adoc">java</a>, <a href="cobigen-xmlplugin#merger-extensions.adoc">XML</a>, <a href="cobigen-propertyplugin#merger-extensions.adoc">properties</a>, and <a href="cobigen-textmerger#merger-extensions.adoc">text</a>). Default: <em>not set</em> (means not mergeable)</p>
</li>
<li>
<p>The attribute <code>targetCharset</code> <em>(optional)</em> can be <em>optionally</em> specified and declares the encoding with which the contents will be written into the destination file. This also includes reading an existing file at the destination path for merging its contents with the newly generated ones. Default: <em>UTF-8</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>(Since version 4.1.0)</em> It is possible to reference external <code>template</code> (templates defined on another trigger), thanks to using <code>&lt;incrementRef &#8230;&#8203;&gt;</code> that are explained <a href="#increment-node">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_template_scan_node"><a class="anchor" href="#_template_scan_node"></a>Template Scan Node</h5>
<div class="paragraph">
<p><em>(since <code>cobigen-core-v1.2.0</code>)</em></p>
</div>
<div class="paragraph">
<p>The second configuration style for template meta-data is driven by initially scanning all available templates and automatically configure them with a default set of meta-data. A scanning configuration might look like this:</p>
</div>
<div class="listingblock">
<div class="title">Example of Template-scan configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;templatesConfiguration xmlns="http://capgemini.com"
                        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        version="1.2"&gt;
    &lt;templateScans&gt;
        &lt;templateScan templatePath="templates" templateNamePrefix="prefix_" destinationPath="src/main/java"/&gt;
    &lt;/templateScans&gt;
&lt;/templatesConfiguration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify multiple <code>&lt;templateScan &#8230;&#8203;&gt;</code> nodes for different <code>templatePaths</code> and different <code>templateNamePrefixes</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>name</code> can be specified to later on reference the templates found by a template-scan within an <a href="#increment-node">increment</a>. <em>(since <code>cobigen-core-v2.1.</code>)</em></p>
</li>
<li>
<p>The <code>templatePath</code> specifies the relative path from the <code>templates.xml</code> to the root folder from which the template scan should be performed.</p>
</li>
<li>
<p>The <code>templateNamePrefix</code> <em>(optional)</em> defines a common id prefix, which will be added to all found and automatically configured templates.</p>
</li>
<li>
<p>The <code>destinationPath</code> defines the root folder all found templates should be generated to, whereas the root folder will be a prefix for all found and automatically configured templates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>templateScan</code> will result in the following <strong>default configuration of templates</strong>. For each file found, new <a href="#template-node">template</a> will be created virtually with the following default values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: file name without <code>.ftl</code> extension prefixed by <code>templateNamePrefix</code> from <code>template-scan</code></p>
</li>
<li>
<p><code>destinationPath</code>: relative file path of the file found with the prefix defined by <code>destinationPath</code> from <code>template-scan</code>. Furthermore,</p>
<div class="ulist">
<ul>
<li>
<p>it is possible to use the syntax for accessing and modifying variables as described for the attribute <code>destinationPath</code> of the <a href="#template-node">template node</a>, besides the only difference, that due to file system restrictions you have to replace all <code>?</code>-signs (for built-ins) with <code>#</code>-signs.</p>
</li>
<li>
<p>the files to be scanned, should provide their final file extension by the following file naming convention: <code>&lt;filename&gt;.&lt;extension&gt;.ftl</code> Thus the file extension <code>.ftl</code> will be removed after generation.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>templateFile</code>: relative path to the file found</p>
</li>
<li>
<p><code>mergeStrategy</code>: <em>(optional)</em> not set means not mergeable</p>
</li>
<li>
<p><code>targetCharset</code>:  <em>(optional)</em> defaults to UTF-8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>(Since version 4.1.0)</em> It is possible to reference external <code>templateScan</code> (<code>templateScans</code> defined on another trigger), thanks to using <code>&lt;incrementRef &#8230;&#8203;&gt;</code> that are explained <a href="#increment-node">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_template_extension_node"><a class="anchor" href="#_template_extension_node"></a>Template Extension Node</h5>
<div class="paragraph">
<p><em>(since <code>cobigen-core-v1.2.0</code>)</em></p>
</div>
<div class="paragraph">
<p>Additionally to the <code><a href="#templatescan-node">templateScan declaration</a></code> it is easily possible to rewrite specific attributes for any scanned and automatically configured template.</p>
</div>
<div class="listingblock">
<div class="title">Example Configuration of a <code>TemplateExtension</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;templates&gt;
    &lt;templateExtension ref="prefix_FooClass.java" mergeStrategy="javamerge" /&gt;
&lt;/templates&gt;

&lt;templateScans&gt;
    &lt;templateScan templatePath="foo" templateNamePrefix="prefix_" destinationPath="src/main/java/foo"/&gt;
&lt;/templateScans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lets assume, that the above example declares a <code>template-scan</code> for the folder <code>foo</code>, which contains a file <code>FooClass.java.ftl</code> in any folder depth. Thus the template scan will automatically create a virtual <a href="#template-node">template</a> declaration with <code>id=prefix_FooClass.java</code> and further <code><a href="#templatescan-node">default configuration</a></code>.</p>
</div>
<div class="paragraph">
<p>Using the <code>templateExtension</code> declaration above will reference the scanned template by the attribute <code>ref</code> and overrides the <code>mergeStrategy</code> of the automatically configured template by the value <code>javamerge</code>. Thus we are able to minimize the needed templates configuration.</p>
</div>
<div class="paragraph">
<p><em>(Since version 4.1.0)</em> It is possible to reference external <code>templateExtension</code> (<code>templateExtensions</code> defined on another trigger), thanks to using <code>&lt;incrementRef &#8230;&#8203;&gt;</code> that are explained <a href="#increment-node">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_increment_node"><a class="anchor" href="#_increment_node"></a>Increment Node</h5>
<div class="paragraph">
<p>The <code>&lt;increments&gt;</code> node groups multiple <code>&lt;increment&gt;</code> nodes, which can be seen as a collection of templates to be generated. An increment will be defined by a unique <code>id</code> and a human readable <code>description</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;increments&gt;
    &lt;increment id="..." description="..."&gt;
        &lt;incrementRef ref="..." /&gt;
        &lt;templateRef ref="..." /&gt;
        &lt;templateScanRef ref="..." /&gt;
    &lt;/increment&gt;
&lt;/increments&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>An increment might contain multiple increments and/or templates, which will be referenced using <code>&lt;incrementRef &#8230;&#8203;&gt;</code>, <code>&lt;templateRef &#8230;&#8203;&gt;</code>, resp. <code>&lt;templateScanRef &#8230;&#8203;&gt;</code> nodes. These nodes only declare the attribute <code>ref</code>, which will reference an increment, a template, or a template-scan by its <code>id</code> or <code>name</code>.</p>
</div>
<div class="paragraph">
<p><em>(Since version 4.1.0)</em>  An special case of <code>&lt;incrementRef &#8230;&#8203;&gt;</code> is the external <code>incrementsRef</code>. By default, <code>&lt;incrementRef &#8230;&#8203;&gt;</code> are used to reference increments defined in the same <code>templates.xml</code> file. So for example, we could have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;increments&gt;
    &lt;increment id="incA" description="..."&gt;
        &lt;incrementRef ref="incB" /&gt;
    &lt;/increment&gt;
    &lt;increment id="incB" description="..."&gt;
        &lt;templateRef .... /&gt;
        &lt;templateScan .... /&gt;
    &lt;/increment&gt;
&lt;/increments&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if we want to reference an increment that it is not defined inside our <code>templates.xml</code> (an increment defined for another trigger), then we can use external <code>incrementRef</code> as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;increment name="..." description="..."&gt;
    &lt;incrementRef ref="trigger_id::increment_id"/&gt;
&lt;/increment&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ref string is split using as delimiter <code>::</code>. The first part of the string, is the <code>trigger_id</code> to reference. That trigger contains an <code>increment_id</code>. Currently, this functionality only works when both templates use the same kind of input file.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_template_logic"><a class="anchor" href="#_java_template_logic"></a>Java Template Logic</h4>
<div class="paragraph">
<p><em>since <code>cobigen-core-3.0.0</code> which is included in the Eclipse and Maven Plugin since version 2.0.0</em>
In addition, it is possible to implement more complex template logic by custom Java code. To enable this feature, you can simply import the the <code>CobiGen_Templates</code> by clicking on <em>Adapt Templates</em>, turn it into a simple maven project (if it is not already) and implement any Java logic in the common maven layout (e.g. in the source folder <code>src/main/java</code>). Each Java class will be instantiated by CobiGen for each generation process. Thus, you can even store any state within a Java class instance during generation. However, there is currently no guarantee according to the template processing order.</p>
</div>
<div class="paragraph">
<p>As a consequence, you have to implement your Java classes with a public default (non-parameter) constructor to be used by any template. Methods of the implemented Java classes can be called within templates by the simple standard FreeMarker expression for calling Bean methods: <code>SimpleType.methodName(param1)</code>. Until now, CobiGen will shadow multiple types with the same simple name non-deterministically. So please prevent yourself from that situation.</p>
</div>
<div class="paragraph">
<p>Finally, if you would like to do some reflection within your Java code accessing any type of the template project or any type referenced by the input, you should load classes by making use of the classloader of the util classes. CobiGen will take care of the correct classloader building including the classpath of the input source as well as of the classpath of the template project. If you use any other classloader or build it by your own, there will be no guarantee, that generation succeeds.</p>
</div>
</div>
<div class="sect3">
<h4 id="_template_properties"><a class="anchor" href="#_template_properties"></a>Template Properties</h4>
<div class="paragraph">
<p><em>since <code>cobigen-core-4.0.0`</em>
Using a configuration with `<a href="#templatescan-node">template scan</a></code>, you can make use of properties in templates specified in property files named <code>cobigen.properties</code> next to the templates. The property files are specified as <a href="https://en.wikipedia.org/wiki/.properties">Java property files</a>. Property files can be nested in sub-folders. Properties will be resolved including property shading. Properties defined nearest to the template to be generated will take precedence.
In addition, a <code>cobigen.properties</code> file can be specified in the target folder root (in eclipse plugin, this is equal to the source project root). These properties take precedence over template properties specified in the template folder.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is not allowed to override context variables in <code>cobigen.properties</code> specifications as we have not found any interesting use case. This is most probably an error of the template designer, CobiGen will raise an error in this case.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_multi_module_support_or_template_target_path_redirects"><a class="anchor" href="#_multi_module_support_or_template_target_path_redirects"></a>Multi module support or template target path redirects</h5>
<div class="paragraph">
<p><em>since <code>cobigen-core-4.0.0`</em>
One special property you can specify in the template properties is the property `relocate</code>. It will cause the current folder and its sub-folders to be relocated at destination path resolution time. Take the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>folder
  - sub1
    Template.java.ftl
    cobigen.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let the <code>cobigen.properties</code> file contain the line <code>relocate=../sub2/${cwd}</code>. Given that, the relative destination path of <code>Template.java.ftl</code> will be resolved to <code>folder/sub2/Template.java</code>. Compare <code><a href="#templatescan-node">template scan</a></code> configuration for more information about basic path resolution. The <code>relocate</code> property specifies a relative path from the location of the <code>cobigen.properties</code>. The <code>${cwd}</code> placeholder will contain the remaining relative path from the <code>cobigen.properties</code> location to the template file. In this basic example it just contains <code>Template.java.ftl</code>, but it may even be any relative path including sub-folders of sub1 and its templates.
Given the <code>relocate</code> feature, you can even step out of the root path, which in general is the project/maven module the input is located in. This enables template designers to even address, e.g., maven modules located next to the module the input is coming from.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_basic_template_model"><a class="anchor" href="#_basic_template_model"></a>Basic Template Model</h4>
<div class="paragraph">
<p>In addition to what is served by the different model builders of the different plug-ins, CobiGen provides a minimal model based on context variables as well as CobiGen properties. The following model is independent of the input format and will be served as a template model all the time:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>variables</p>
<div class="ulist">
<ul>
<li>
<p>all triggered <code><a href="#variableassignment-node.adoc" class="page unresolved">context variables</a></code> mapped to its assigned/mapped value</p>
</li>
<li>
<p>all <a href="#template-properties.adoc" class="page unresolved">template properties</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>all simple names of <a href="#java-template-logic.adoc" class="page unresolved">Java template logic</a> implementation classes</p>
</li>
<li>
<p>all full qualified names of <a href="#java-template-logic.adoc" class="page unresolved">Java template logic</a> implementation classes</p>
</li>
<li>
<p>further input related model, e.g. <a href="cobigen-javaplugin#template-object-model.adoc">model from Java inputs</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_plugin_mechanism"><a class="anchor" href="#_plugin_mechanism"></a>Plugin Mechanism</h4>
<div class="paragraph">
<p>Since <code>cobigen-core 4.1.0</code>, we changed the plug-in discovery mechanism. So far it was necessary to register new plugins programmatically, which introduces the need to let every tool integration, i.e. for eclipse or maven, be dependent on every plug-in, which should be released. This made release cycles take long time as all plug-ins have to be integrated into a final release of maven or eclipse integration.</p>
</div>
<div class="paragraph">
<p>Now, plug-ins are automatically discovered by the Java <a href="https://docs.oracle.com/javase/tutorial/ext/basics/spi.html">Service Loader</a> mechanism from the classpath. This also effects the setup of <a href="cobigen-eclipse_installation#upgrading-to-v3.adoc">eclipse</a> and <a href="cobigen-maven_configuration#additions-since-v3.adoc">maven</a> integration to allow modular releases of CobiGen in future. We are now able to provide faster rollouts of bug-fixes in any of the plug-ins as they can be released completely independently.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plug_ins"><a class="anchor" href="#_plug_ins"></a>Plug-ins</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>==Java Plug-in
The CobiGen Java Plug-in comes with a new input reader for java artifacts, new java related trigger and matchers, as well as a merging mechanism for Java sources.</p>
</div>
<div class="sect4">
<h5 id="_trigger_extension"><a class="anchor" href="#_trigger_extension"></a>Trigger extension</h5>
<div class="paragraph">
<p>The Java Plug-in provides a new trigger for Java related inputs. It accepts different representations as inputs (see <a href="#java-input-reader">Java input reader</a>) and provides additional matching and variable assignment mechanisms. The configuration in the <code>context.xml</code> for this trigger looks like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type 'java'</p>
<div class="listingblock">
<div class="title">Example of a java trigger definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="java" templateFolder="..."&gt;
    ...
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger type enables Java elements as inputs.</p>
</div>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_matcher_types"><a class="anchor" href="#_matcher_types"></a>Matcher types</h6>
<div class="paragraph">
<p>With the trigger you might define matchers, which restrict the input upon specific aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type <code>fqn</code> &#8594; full qualified name matching</p>
<div class="listingblock">
<div class="title">Example of a java trigger definition with a full qualified name matcher</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="java" templateFolder="..."&gt;
    &lt;matcher type="fqn" value="(.+)\.persistence\.([^\.]+)\.entity\.([^\.]+)"&gt;
        ...
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger will be enabled if the full qualified name (<code>fqn</code>) of the declaring input class matches the given regular expression (<code>value</code>).</p>
</div>
</li>
<li>
<p>type 'package' &#8594; package name of the input</p>
<div class="listingblock">
<div class="title">Example of a java trigger definition with a package name matcher</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="java" templateFolder="..."&gt;
    &lt;matcher type="package" value="(.+)\.persistence\.([^\.]+)\.entity"&gt;
        ...
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger will be enabled if the package name (<code>package</code>) of the declaring input class matches the given regular expression (<code>value</code>).</p>
</div>
</li>
<li>
<p>type 'expression'</p>
<div class="listingblock">
<div class="title">Example of a java trigger definition with a package name matcher</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="java" templateFolder="..."&gt;
    &lt;matcher type="expression" value="instanceof java.lang.String"&gt;
        ...
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger will be enabled if the expression evaluates to true. Valid expressions are</p>
</div>
</li>
<li>
<p><code>instanceof fqn</code>: checks an 'is a' relation of the input type</p>
</li>
<li>
<p><code>isAbstract</code>: checks, whether the input type is declared abstract</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_container_matcher_types"><a class="anchor" href="#_container_matcher_types"></a>Container Matcher types</h6>
<div class="paragraph">
<p>Additionally, the java plugin provides the ability to match packages (containers) as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type 'package'</p>
<div class="listingblock">
<div class="title">Example of a java trigger definition with a container matcher for packages</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="java" templateFolder="..."&gt;
    &lt;containerMatcher type="package" value="com\.example\.app\.component1\.persistence.entity" /&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The container matcher matches packages provided by the type <code>com.capgemini.cobigen.javaplugin.inputreader.to.PackageFolder</code> with a regular expression stated in the <code>value</code> attribute. (See <a href="cobigen-core_configuration#containermatcher-node.adoc"><code>containerMatcher</code> semantics</a> to get more information about <code>containerMatchers</code> itself.)</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_variable_assignment_types"><a class="anchor" href="#_variable_assignment_types"></a>Variable Assignment types</h6>
<div class="paragraph">
<p>Furthermore, it provides the ability to extract information from each input for further processing in the templates. The values assigned by variable assignments will be made available in template and the <code>destinationPath</code> of <code>context.xml</code> through the namespace <code>variables.&lt;key&gt;</code>. The Java Plug-in currently provides two different mechanisms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type 'regex' &#8594; regular expression group</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="java" templateFolder="..."&gt;
    &lt;matcher type="fqn" value="(.+)\.persistence\.([^\.]+)\.entity\.([^\.]+)"&gt;
        &lt;variableAssignment type="regex" key="rootPackage" value="1" /&gt;
        &lt;variableAssignment type="regex" key="component" value="2" /&gt;
        &lt;variableAssignment type="regex" key="pojoName" value="3" /&gt;
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This variable assignment assigns the value of the given regular expression group number to the given <code>key</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type 'constant' &#8594; constant parameter</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="java" templateFolder="..."&gt;
    &lt;matcher type="fqn" value="(.+)\.persistence\.([^\.]+)\.entity\.([^\.]+)"&gt;
        &lt;variableAssignment type="constant" key="domain" value="restaurant" /&gt;
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This variable assignment assigns the <code>value</code> to the <code>key</code> as a constant.</p>
</div>
</div>
<div class="sect5">
<h6 id="_java_input_reader"><a class="anchor" href="#_java_input_reader"></a>Java input reader</h6>
<div class="paragraph">
<p>The CobiGen Java Plug-in implements an input reader for parsed java sources as well as for java <code>Class&lt;?&gt;</code> objects (loaded by reflection). So API user can pass <code>Class&lt;?&gt;</code> objects as well as <code>JavaClass</code> objects for generation. The latter depends on <a href="https://github.com/paul-hammant/qdox">QDox</a>, which will be used for parsing and merging java sources. For getting the right parsed java inputs you can easily use the <code>JavaParserUtil</code>, which provides static functionality to parse java files and get the appropriate <code>JavaClass</code> object.</p>
</div>
<div class="paragraph">
<p>Furthermore, due to restrictions on both inputs according to model building (see below), it is also possible to provide an array of length two as an input, which contains the <code>Class&lt;?&gt;</code> as well as the <code>JavaClass</code> object of the same class.</p>
</div>
<div class="sect6">
<h7 id="_template_object_model"><a class="anchor" href="#_template_object_model"></a>Template object model</h7>
<div class="paragraph">
<p>No matter whether you use reflection objects or parsed java classes as input, you will get the following object model for template creation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>classObject</code></strong> ('Class' :: Class object of the Java input)</p>
</li>
<li>
<p><strong>POJO</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>name</strong> ('String' :: Simple name of the input class)</p>
</li>
<li>
<p><strong>package</strong> ('String' :: Package name of the input class)</p>
</li>
<li>
<p><strong><code>canonicalName</code></strong> ('String' :: Full qualified name of the input class)</p>
</li>
<li>
<p><strong>annotations</strong> ('Map&lt;String, Object&gt;' :: Annotations, which will be represented by a mapping of the full qualified type of an annotation to its value. To gain template compatibility, the key will be stored with '_' instead of '.' in the full qualified annotation type. Furthermore, the annotation might be recursively defined and thus be accessed using the same type of mapping. Example <code>${pojo.annotations.javax_persistence_Id}</code>)</p>
</li>
<li>
<p><strong>JavaDoc</strong> ('Map&lt;String, Object&gt;') :: A generic way of addressing all available JavaDoc doclets and comments. The only fixed variable is <code>comment</code> (see below). All other provided variables depend on the doclets found while parsing. The value of a doclet can be accessed by the doclets name (e.g. <code>${&#8230;&#8203;JavaDoc.author}</code>). In case of doclet tags that can be declared multiple times (currently <code>@param</code> and <code>@throws</code>), you will get a map, which you access in a specific way (see below).</p>
<div class="ulist">
<ul>
<li>
<p><strong>comment</strong> ('String' :: JavaDoc comment, which does not include any doclets)</p>
</li>
<li>
<p><strong>params</strong> ('Map&lt;String,String&gt; :: JavaDoc parameter info. If the comment follows proper conventions, the key will be the name of the parameter and the value being its description. You can also access the parameters by their number, as in <code>arg0</code>, <code>arg1</code> etc, following the order of declaration in the signature, not in order of JavaDoc)</p>
</li>
<li>
<p><strong>throws</strong> ('Map&lt;String,String&gt; :: JavaDoc exception info. If the comment follows proper conventions, the key will be the name of the thrown exception and the value being its description)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>extendedType</code></strong> ('Map&lt;String, Object&gt;' :: The supertype, represented by a set of mappings <em>(since <code>cobigen-javaplugin v1.1.0</code>)</em></p>
<div class="ulist">
<ul>
<li>
<p><strong>name</strong> ('String' :: Simple name of the supertype)</p>
</li>
<li>
<p><strong><code>canonicalName</code></strong> ('String' :: Full qualified name of the supertype)</p>
</li>
<li>
<p><strong>package</strong> ('String' :: Package name of the supertype)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code><strong>implementedTypes</strong></code> ('List&lt;Map&lt;String, Object&gt;&gt;' :: A list of all <code>implementedTypes</code> (interfaces) represented by a set of mappings <em>(since <code>cobigen-javaplugin v1.1.0</code>)</em></p>
<div class="ulist">
<ul>
<li>
<p><strong>interface</strong> ('Map&lt;String, Object&gt;' :: List element)</p>
<div class="ulist">
<ul>
<li>
<p><strong>name</strong> ('String' :: Simple name of the interface)</p>
</li>
<li>
<p><strong><code>canonicalName</code></strong> ('String' :: Full qualified name of the interface)</p>
</li>
<li>
<p><strong>package</strong> ('String' :: Package name of the interface)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>fields</strong> ('List&lt;Map&lt;String, Object&gt;&gt;' :: List of fields of the input class) <em>(renamed since <code>cobigen-javaplugin v1.2.0</code>; previously <strong>attributes</strong>)</em></p>
<div class="ulist">
<ul>
<li>
<p>field ('Map&lt;String, Object&gt;' :: List element)</p>
<div class="ulist">
<ul>
<li>
<p><strong>name</strong> ('String' :: Name of the Java field)</p>
</li>
<li>
<p><strong>type</strong> ('String' :: Type of the Java field)</p>
</li>
<li>
<p><code><strong>canonicalType</strong></code> ('String' :: Full qualified type declaration of the Java field&#8217;s type)</p>
</li>
<li>
<p>'<strong><code>isId</code></strong>' (<code>Deprecated</code> :: <code>boolean</code> :: true if the Java field or its setter or its getter is annotated with the <code>javax.persistence.Id</code> annotation, false otherwise. Equivalent to <code>${pojo.attributes[i].annotations.javax_persistence_Id?has_content}</code>)</p>
</li>
<li>
<p><strong>JavaDoc</strong> (see <code>pojo.JavaDoc</code>)</p>
</li>
<li>
<p><strong>annotations</strong> (see <code>pojo.annotations</code> with the remark, that for fields all annotations of its setter and getter will also be collected)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code><strong>methodAccessibleFields</strong></code> ('List&lt;Map&lt;String, Object&gt;&gt;' :: List of fields of the input class or its inherited classes, which are accessible using setter and getter methods)</p>
<div class="ulist">
<ul>
<li>
<p>same as for <em>field</em> (but without JavaDoc!)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>methods</strong> ('List&lt;Map&lt;String, Object&gt;&gt;' :: The list of all methods, whereas one method will be represented by a set of property mappings)</p>
<div class="ulist">
<ul>
<li>
<p>method ('Map&lt;String, Object&gt;' :: List element)</p>
<div class="ulist">
<ul>
<li>
<p><strong>name</strong> ('String' :: Name of the method)</p>
</li>
<li>
<p><strong>JavaDoc</strong> (see <code>pojo.JavaDoc</code>)</p>
</li>
<li>
<p><strong>annotations</strong> (see <code>pojo.annotations</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, when providing a <code>Class&lt;?&gt;</code> object as input, the Java Plug-in will provide additional functionalities as template methods <em>(deprecated)</em>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>isAbstract(String fqn)</code> (Checks whether the type with the given full qualified name is an abstract class. Returns a Boolean value.) <em>(since <code>cobigen-javaplugin v1.1.1</code>)</em>  <em>(deprecated)</em></p>
</li>
<li>
<p><code>isSubtypeOf(String subType, String superType)</code> (Checks whether the <code>subType</code> declared by its full qualified name is a sub type of the <code>superType</code> declared by its full qualified name. Equals the Java expression <code>subType instanceof superType</code> and so also returns a Boolean value.) <em>(since <code>cobigen-javaplugin v1.1.1</code>)</em>  <em>(deprecated)</em></p>
</li>
</ol>
</div>
</div>
<div class="sect6">
<h7 id="_model_restrictions"><a class="anchor" href="#_model_restrictions"></a>Model Restrictions</h7>
<div class="paragraph">
<p>As stated before both inputs (<code>Class&lt;?&gt;</code> objects and <code>JavaClass</code> objects ) have their restrictions according to model building. In the following these restrictions are listed for both models, the <code>ParsedJava</code> Model which results from an <code>JavaClass</code> input and the <code>ReflectedJava</code> Model, which results from a Class&lt;?&gt; input.</p>
</div>
<div class="paragraph">
<p>It is important to understand, that these restrictions are only present if you work with either Parsed Model <strong>OR</strong> the Reflected Model. If you use the <em>Maven Build Plug-in</em> or <em>Eclipse Plug-in</em> these two models are merged together so that they can mutually compensate their weaknesses.</p>
</div>
<div class="sect7">
<h8 id="_parsed_model"><a class="anchor" href="#_parsed_model"></a>Parsed Model</h8>
<div class="ulist">
<ul>
<li>
<p>annotations of the input&#8217;s supertype are not accessible due to restrictions in the <a href="https://github.com/paul-hammant/qdox">QDox</a> library. So <code>pojo.methodAccessibleFields[i].annotations</code> will always be empty for super type fields.</p>
</li>
<li>
<p>annotations' parameter values are available as Strings only (e.g. the Boolean value <code>true</code> is transformed into <code>"true"</code>). This also holds for the Reflected Model.</p>
</li>
<li>
<p>fields of "supertypes" of the input <code>JavaClass</code> are not available at all. So <code>pojo.methodAccessibleFields</code> will only contain the input type&#8217;s and the direct superclass&#8217;s fields.</p>
</li>
<li>
<p>[resolved, since <code>cobigen-javaplugin 1.3.1</code>] field types of supertypes are always canonical. So <code>pojo.methodAccessibleFields[i].type</code> will always provide the same value as <code>pojo.methodAccessibleFields[i].canonicalType</code> (e.g. <code>java.lang.String</code> instead of the expected <code>String</code>) for super type fields.</p>
</li>
</ul>
</div>
</div>
<div class="sect7">
<h8 id="_reflected_model"><a class="anchor" href="#_reflected_model"></a>Reflected Model</h8>
<div class="ulist">
<ul>
<li>
<p>annotations' parameter values are available as Strings only (e.g. the Boolean value <code>true</code> is transformed into <code>"true"</code>). This also holds for the Parsed Model.</p>
</li>
<li>
<p>annotations are only available if the respective annotation has <code>@Retention(value=RUNTIME)</code>, otherwise the annotations are to be discarded by the compiler or by the VM at run time. For more information see <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html">RetentionPolicy</a>.</p>
</li>
<li>
<p>information about generic types is lost. E.g. a field&#8217;s/ methodAccessibleField&#8217;s type for <code>List&lt;String&gt;</code> can only be provided as <code>List&lt;?&gt;</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_merger_extensions"><a class="anchor" href="#_merger_extensions"></a>Merger extensions</h5>
<div class="paragraph">
<p>The Java Plug-in provides two additional merging strategies for Java sources, which can be configured in the <code>templates.xml</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Merge strategy <code>javamerge</code> (merges two Java resources and keeps the existing Java elements on conflicts)</p>
</li>
<li>
<p>Merge strategy <code>javamerge_override</code> (merges two Java resources and overrides the existing Java elements on conflicts)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general merging of two Java sources will be processed as follows:</p>
</div>
<div class="paragraph">
<p>Precondition of processing a merge of generated contents and existing ones is a common Java root class resp. surrounding class. If this is the case this class and all further inner classes will be merged recursively. Therefore, the following Java elements will be merged and conflicts will be resolved according to the configured merge strategy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>extends</code> and <code>implements</code> relations of a class: Conflicts can only occur for the extends relation.</p>
</li>
<li>
<p>Annotations of a class: Conflicted if an annotation declaration already exists.</p>
</li>
<li>
<p>Fields of a class: Conflicted if there is already a field with the same name in the existing sources. (Will be replaced / ignored in total, also including annotations)</p>
</li>
<li>
<p>Methods of a class: Conflicted if there is already a method with the same signature in the existing sources. (Will be replaced / ignored in total, also including annotations)</p>
</li>
</ul>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==Property Plug-in
The CobiGen Property Plug-in currently only provides different merge mechanisms for documents written in <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html">Java property syntax</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_merger_extensions_2"><a class="anchor" href="#_merger_extensions_2"></a>Merger extensions</h5>
<div class="paragraph">
<p>There are two merge strategies for Java properties, which can be configured in the templates.xml:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Merge strategy <code>propertymerge</code> (merges two properties documents and keeps the existing properties on conflicts)</p>
</li>
<li>
<p>Merge strategy <code>propertymerge_override</code> (merges two properties documents and overrides the existing properties on conflicts)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both documents (base and patch) will be parsed using the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html">Java 7 API</a> and will be compared according their keys. Conflicts will occur if a key in the patch already exists in the base document.</p>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==XML Plug-in
The CobiGen XML Plug-in comes with an input reader for XML artifacts, XML related trigger and matchers and provides different merge mechanisms for XML result documents.</p>
</div>
</div>
<div class="sect4">
<h5 id="_trigger_extension_2"><a class="anchor" href="#_trigger_extension_2"></a>Trigger extension</h5>
<div class="paragraph">
<p><em>(since <code>cobigen-xmlplugin v2.0.0</code>)</em></p>
</div>
<div class="paragraph">
<p>The XML Plug-in provides a trigger for XML related inputs. It accepts XML documents as input (see <code><a href="#xml-input-reader">XML input reader</a></code>) and provides additional matching and variable assignment mechanisms. The configuration in the <code>context.xml</code> for this trigger looks like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type 'xml'</p>
<div class="listingblock">
<div class="title">Example of a XML trigger definition.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="xml" templateFolder="..."&gt;
    ...
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger type enables XML documents as inputs.</p>
</div>
</li>
<li>
<p>type <code>xpath</code></p>
<div class="listingblock">
<div class="title">Example of a <code>xpath</code> trigger definition.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="xpath" templateFolder="..."&gt;
    ...
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger type enables XML documents as container inputs, which consists of several sub-documents.</p>
</div>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_container_matcher_type"><a class="anchor" href="#_container_matcher_type"></a>Container Matcher type</h6>
<div class="paragraph">
<p>A <code>ContainerMatcher</code> check if the input is a valid container.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>xpath</code>: type: <code>xpath</code></p>
<div class="listingblock">
<div class="title">Example of a XML trigger definition with a node name matcher.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="xml" templateFolder="..."&gt;
    &lt;containerMatcher type="xpath" value="./uml:Model//packagedElement[@xmi:type='uml:Class']"&gt;
        ...
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before applying any Matcher, this <code>containerMatcher</code> checks if the XML file contains a node <code>uml:Model</code> with a childnode <code>packagedElement</code> which contains an attribute <code>xmi:type</code> with the value <code>uml:Class</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_matcher_types_2"><a class="anchor" href="#_matcher_types_2"></a>Matcher types</h6>
<div class="paragraph">
<p>With the trigger you might define matchers, which restrict the input upon specific aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XML: type <code>nodename</code> &#8594; document&#8217;s root name matching</p>
<div class="listingblock">
<div class="title">Example of a XML trigger definition with a node name matcher</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="xml" templateFolder="..."&gt;
    &lt;matcher type="nodename" value="\D\w*"&gt;
        ...
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger will be enabled if the root name of the declaring input document matches the given regular expression (<code>value</code>).</p>
</div>
</li>
<li>
<p><code>xpath</code>: type: <code>xpath</code> &#8594; matching a node with a <code>xpath</code> value</p>
<div class="listingblock">
<div class="title">Example of a <code>xpath</code> trigger definition with a <code>xpath</code> matcher.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="xml" templateFolder="..."&gt;
    &lt;matcher type="xpath" value="/packagedElement[@xmi:type='uml:Class']"&gt;
        ...
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trigger will be enabled if the XML file contains a node <code>/packagedElement</code> where the <code>xmi:type</code> property equals <code>uml:Class</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_variable_assignment_types_2"><a class="anchor" href="#_variable_assignment_types_2"></a>Variable Assignment types</h6>
<div class="paragraph">
<p>Furthermore, it provides the ability to extract information from each input for further processing in the templates. The values assigned by variable assignments will be made available in template and the <code>destinationPath</code> of <code>context.xml</code> through the namespace <code>variables.&lt;key&gt;</code>. The XML Plug-in currently provides only one mechanism:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type 'constant' &#8594; constant parameter</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;trigger id="..." type="xml" templateFolder="..."&gt;
    &lt;matcher type="nodename" value="\D\w*"&gt;
        &lt;variableAssignment type="constant" key="domain" value="restaurant" /&gt;
    &lt;/matcher&gt;
&lt;/trigger&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This variable assignment assigns the <code>value</code> to the <code>key</code> as a constant.</p>
</div>
</div>
<div class="sect5">
<h6 id="_xml_input_reader"><a class="anchor" href="#_xml_input_reader"></a>XML input reader</h6>
<div class="paragraph">
<p>The CobiGen XML Plug-in implements an input reader for parsed XML documents. So API user can pass <code>org.w3c.dom.Document</code> objects for generation. For getting the right parsed XML inputs you can easily use the <code>xmlplugin.util.XmlUtil</code>, which provides static functionality to parse XML files or input streams and get the appropriate <code>Document</code> object.</p>
</div>
<div class="sect6">
<h7 id="_template_object"><a class="anchor" href="#_template_object"></a>Template object</h7>
<div class="paragraph">
<p>Due to the heterogeneous structure an XML document can have, the XML input reader does not always create exactly the same model structure (in contrast to the java input reader). For example the model&#8217;s depth differs strongly, according to it&#8217;s input document. To allow navigational access to the nodes, the model also depends on the document&#8217;s element&#8217;s node names. All child elements with unique names, are directly accessible via their names. In addition it is possible to iterate over all child elements with held of the child list <code>Children</code>. So it is also possible to access child elements with non unique names.</p>
</div>
<div class="paragraph">
<p>The XML input reader will create the following object model for template creation (<code><sub>EXAMPLEROOT</sub>, <sub>EXAMPLENODE1</sub>, <sub>EXAMPLENODE2</sub>, <sub>EXAMPLEATTR1</sub>,&#8230;&#8203;</code> are just used here as examples. Of course they will be replaced later by the actual node or attribute names):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>~EXAMPLEROOT~</code></strong> ('Map&lt;String, Object&gt;' :: common element structure)</p>
<div class="ulist">
<ul>
<li>
<p><strong><code>_nodeName_</code></strong> ('String' :: Simple name of the root node)</p>
</li>
<li>
<p><strong><code>_text_</code></strong> ('String' :: Concatenated text content (<code>PCDATA</code>) of the root node)</p>
</li>
<li>
<p><strong><code>TextNodes</code></strong> ('List&lt;String&gt;' :: List of all the root&#8217;s text node contents)</p>
</li>
<li>
<p><strong><code>_at_~EXAMPLEATTR1~</code></strong> ('String' :: String representation of the attribute&#8217;s value)</p>
</li>
<li>
<p><strong><code>_at_~EXAMPLEATTR2~</code></strong> ('String' :: String representation of the attribute&#8217;s value)</p>
</li>
<li>
<p><strong>_at_&#8230;&#8203;</strong></p>
</li>
<li>
<p><strong>Attributes</strong> ('List&lt;Map&lt;String, Object&gt;&gt;' :: List of the root&#8217;s attributes</p>
<div class="ulist">
<ul>
<li>
<p>at ('Map&lt;String, Object&gt;' :: List element)</p>
<div class="ulist">
<ul>
<li>
<p><code><strong>_attName_</strong> ('String' :: Name of the attribute)</code></p>
</li>
<li>
<p><code><strong>_attValue_</strong> ('String' :: String representation of the attribute&#8217;s value)</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Children</strong> ('List&lt;Map&lt;String, Object&gt;&gt;' :: List of the root&#8217;s child elements</p>
<div class="ulist">
<ul>
<li>
<p>child ('Map&lt;String, Object&gt;' :: List element)</p>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;common element sub structure&#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>~EXAMPLENODE1~</code></strong> ('Map&lt;String, Object&gt;' :: One of the root&#8217;s child nodes)</p>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;common element structure&#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>~EXAMPLENODE2~</code></strong> ('Map&lt;String, Object&gt;' :: One of the root&#8217;s child nodes)</p>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;common element sub structure&#8230;&#8203;</p>
</li>
<li>
<p><strong><code>~EXAMPLENODE21~</code></strong> ('Map&lt;String, Object&gt;' :: One of the nodes' child nodes)</p>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;common element structure&#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>~EXAMPLENODE&#8230;&#8203;~</code></strong></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>~EXAMPLENODE&#8230;&#8203;~</code></strong></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In contrast to the java input reader, this XML input reader does currently not provide any additional template methods.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_merger_extensions_3"><a class="anchor" href="#_merger_extensions_3"></a>Merger extensions</h5>
<div class="paragraph">
<p>The XML plugin uses the <a href="https://github.com/maybeec/lexeme"><code>LeXeMe</code></a> merger library to produce semantically correct merge products. The merge strategies can be found in the <a href="https://github.com/devonfw/cobigen/blob/master/cobigen/cobigen-xmlplugin/src/main/java/com/devonfw/cobigen/xmlplugin/merger/delegates/MergeType.java#L11"><code>MergeType enum</code></a> and can be configured in the <code>templates.xml</code> as a <code>mergeStrategy</code> attribute:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>mergeStrategy xmlmerge</code></p>
<div class="listingblock">
<div class="title">Example of a template using the <code>mergeStrategy</code> <code>xmlmerge</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;templates&gt;
	&lt;template name="..." destinationPath="..." templateFile="..." mergeStrategy="xmlmerge"/&gt;
&lt;/templates&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Currently only the document types included in LeXeMe are supported.
On how the merger works consult the <a href="https://github.com/maybeec/lexeme/wiki">LeXeMe Wiki</a>.</p>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==Text Merger Plug-in
The Text Merger Plug-in enables merging result free text documents to existing free text documents. Therefore, the algorithms are also very rudimentary.</p>
</div>
</div>
<div class="sect4">
<h5 id="extensions"><a class="anchor" href="#extensions"></a>Merger extensions</h5>
<div class="paragraph">
<p>There are currently three main merge strategies that apply for the whole document:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>merge strategy <code>textmerge_append</code> (appends the text directly to the end of the existing document)
_Remark_: If no anchors are defined, this will simply append the patch.</p>
</li>
<li>
<p>merge strategy <code>textmerge_appendWithNewLine</code> (appends the text after adding a new line break to the existing document)
_Remark_: empty patches will not result in appending a new line any more since v1.0.1
<em>Remark</em>: Only suitable if no anchors are defined, otherwise it will simply act as <code>textmerge_append</code></p>
</li>
<li>
<p>merge strategy <code>textmerge_override</code> (replaces the contents of the existing file with the patch)
_Remark_: If anchors are defined, override is set as the default <code>mergestrategy</code> for every text block if not redefined in an anchor specification.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_anchor_functionality"><a class="anchor" href="#_anchor_functionality"></a>Anchor functionality</h5>
<div class="paragraph">
<p>If a template contains text that fits the definition of <code>anchor:${documentpart}:${mergestrategy}:anchorend</code> or more specifically the regular expression <code>(.*)anchor:([<sup>:]+):(newline_)?([</sup>:]+)(_newline)?:anchorend\\s*(\\r\\n|\\r|\\n)</code>, some additional functionality becomes available about specific parts of the incoming text and the way it will be merged with the existing text. These anchors always change things about the text to come up until the next anchor, text before it is ignored.</p>
</div>
<div class="paragraph">
<p>If no anchors are defined, the complete patch will be appended depending on your choice for the template in the file <code>templates.xml</code>.</p>
</div>
<div class="paragraph">
<p>[[<code>anchordef</code>]]</p>
</div>
<div class="sect5">
<h6 id="_anchor_definition"><a class="anchor" href="#_anchor_definition"></a>Anchor Definition</h6>
<div class="paragraph">
<p>Anchors should always be defined as a comment of the language the template results in, as you do not want them to appear in your readable version, but cannot define them as FreeMarker comments in the template, or the merger will not know about them.
Anchors will also be read when they are not comments due to the merger being able to merge multiple types of text-based languages, thus making it practically impossible to filter for the correct comment declaration. <strong>That is why anchors have to always be followed by line breaks</strong>. That way there is a universal way to filter anchors that should have anchor functionality and ones that should appear in the text.
<em>Remark:</em> If the resulting language has closing tags for comments, they have to appear in the next line.
<em>Remark:</em> If you do not put the anchor into a new line, all the text that appears before it will be added to the anchor.</p>
</div>
</div>
<div class="sect5">
<h6 id="_document_parts"><a class="anchor" href="#_document_parts"></a>Document parts</h6>
<div class="paragraph">
<p>In general, <code>${documentpart}</code> is an id to mark a part of the document, that way the merger knows what parts of the text to merge with which parts of the patch (e.g. if the existing text contains <code>anchor:table:${}:anchorend</code> that part will be merged with the part tagged <code>anchor:table:${}:anchorend</code> of the patch).</p>
</div>
<div class="paragraph">
<p>If the same <code>documentpart</code> is defined multiple times, it can lead to errors, so instead of defining <code>table</code> multiple times, use <code>table1</code>, <code>table2</code>, <code>table3</code> etc.</p>
</div>
<div class="paragraph">
<p>If a <code>${documentpart}</code> is defined in the document but not in the patch and they are in the same position, it is processed in the following way: If only the <code>documentparts header</code>, <code>test</code> and <code>footer</code> are defined in the document in that order, and the patch contains <code>header</code>, <code>order</code> and <code>footer</code>, the resulting order will be <code>header</code>, <code>test</code>, <code>order</code> then <code>footer</code>.</p>
</div>
<div class="paragraph">
<p>The following <code>documentparts</code> have default functionality:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>anchor:header:${mergestrategy}:anchorend</code> marks the beginning of a header, that will be added once when the document is created, but not again.
<em>Remark:</em> This is only done once, if you have <code>header</code> in another anchor, it will be ignored</p>
</li>
<li>
<p><code>anchor:footer:${mergestrategy}:anchorend</code> marks the beginning of a footer, that will be added once when the document is created, but not again. Once this is invoked, all following text will be included in the footer, including other anchors.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>[[<code>mergestrategies</code>]]</p>
</div>
</div>
<div class="sect5">
<h6 id="_mergestrategies"><a class="anchor" href="#_mergestrategies"></a><code>Mergestrategies</code></h6>
<div class="paragraph">
<p><code>Mergestrategies</code> are only relevant in the patch, as the merger is only interested in how text in the patch should be managed, not how it was managed in the past.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>anchor:${documentpart}::anchorend</code> will use the merge strategy from <code>templates.xml</code>, see <a href="#extensions">Merger-Extensions</a>.</p>
</li>
<li>
<p><code>anchor:${}:${mergestrategy}_newline:anchorend</code> or <code>anchor:${}:newline_${mergestrategy}:anchorend</code> states that a new line should be appended before or after this anchors text, depending on where the newline is (before or after the <code>mergestrategy</code>). <code>anchor:${documentpart}:newline:anchorend</code> puts a new line after the anchors text.
<em>Remark:</em> Only works with appending strategies, not merging/replacing ones. These strategies currently include: <code>appendbefore</code>, <code>append</code>/<code>appendafter</code></p>
</li>
<li>
<p><code>anchor:${documentpart}:override:anchorend</code> means that the new text of this <code>documentpart</code> will replace the existing one completely</p>
</li>
<li>
<p><code>anchor:${documentpart}:appendbefore:anchorend</code> or <code>anchor:${documentpart}:appendafter:anchorend</code>/<code>anchor:${documentpart}:append:anchorend</code> specifies whether the text of the patch should come before the existing text or after.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_usage_examples"><a class="anchor" href="#_usage_examples"></a>Usage Examples</h5>
<div class="sect5">
<h6 id="_general"><a class="anchor" href="#_general"></a>General</h6>
<div class="paragraph">
<p>Below you can see how a file with anchors might look like (using adoc comment tags), with examples of what you might want to use the different functions for.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// anchor:header:append:anchorend

Table of contents
Introduction/Header

// anchor:part1:appendafter:anchorend

Lists
Table entries

// anchor:part2:nomerge:anchorend

Document Separators
adoc table definitions

// anchor:part3:override:anchorend

Anything that you only want once but changes from time to time

// anchor:footer:append:anchorend

Copyright Info
Imprint</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_merging"><a class="anchor" href="#_merging"></a>Merging</h6>
<div class="paragraph">
<p>In this section you will see a comparison on what files look like before and after merging</p>
</div>
<div class="sect6">
<h7 id="_override"><a class="anchor" href="#_override"></a>override</h7>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre>// anchor:part:override:anchorend
Lorem Ipsum</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Patch</div>
<div class="content">
<pre>// anchor:part:override:anchorend
Dolor Sit</pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre>// anchor:part:override:anchorend
Dolor Sit</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_appending"><a class="anchor" href="#_appending"></a>Appending</h7>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre>// anchor:part:append:anchorend
Lorem Ipsum
// anchor:part2:appendafter:anchorend
Lorem Ipsum
// anchor:part3:appendbefore:anchorend
Lorem Ipsum</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Patch</div>
<div class="content">
<pre>// anchor:part:append:anchorend
Dolor Sit
// anchor:part2:appendafter:anchorend
Dolor Sit
// anchor:part3:appendbefore:anchorend
Dolor Sit</pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre>// anchor:part:append:anchorend
Lorem Ipsum
Dolor Sit
// anchor:part2:appendafter:anchorend
Lorem Ipsum
Dolor Sit
// anchor:part3:appendbefore:anchorend
Dolor Sit
Lorem Ipsum</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_newline"><a class="anchor" href="#_newline"></a>Newline</h7>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre>// anchor:part:newline_append:anchorend
Lorem Ipsum
// anchor:part:append_newline:anchorend
Lorem Ipsum
(end of file)</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Patch</div>
<div class="content">
<pre>// anchor:part:newline_append:anchorend
Dolor Sit
// anchor:part:append_newline:anchorend
Dolor Sit
(end of file)</pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre>// anchor:part:newline_append:anchorend
Lorem Ipsum

Dolor Sit
// anchor:part:append_newline:anchorend
Lorem Ipsum
Dolor Sit

(end of file)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_error_list"><a class="anchor" href="#_error_list"></a>Error List</h5>
<div class="ulist">
<ul>
<li>
<p>If there are anchors in the text, but either base or patch do not start with one, the merging process will be aborted, as text might go missing this way.</p>
</li>
<li>
<p>Using <code>_newline</code> or <code>newline_</code> with <code>mergestrategies</code> that don&#8217;t support it , like <code>override</code>, will abort the merging process. See &lt;&lt;`mergestrategies`,Merge Strategies&gt;&gt; &#8594;2 for details.</p>
</li>
<li>
<p>Using undefined <code>mergestrategies</code> will abort the merging process.</p>
</li>
<li>
<p>Wrong anchor definitions, for example <code>anchor:${}:anchorend</code> will abort the merging process, see &lt;&lt;`anchordef`,Anchor Definition&gt;&gt; for details.</p>
</li>
</ul>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==JSON Plug-in
At the moment the plug-in can be used for merge generic JSON files depending on the merge strategy defined at the templates.</p>
</div>
</div>
<div class="sect4">
<h5 id="_merger_extensions_4"><a class="anchor" href="#_merger_extensions_4"></a>Merger extensions</h5>
<div class="paragraph">
<p>There are currently these merge strategies:</p>
</div>
<div class="paragraph">
<p><strong>Generic JSON Merge</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>merge strategy <code>jsonmerge</code>(add the new code respecting the existent is case of conflict)</p>
</li>
<li>
<p>merge strategy <code>jsonmerge_override</code> (add the new code overwriting the existent in case of conflict)</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>JsonArray&#8217;s</code> will be ignored / replaced in total</p>
</li>
<li>
<p><code>JsonObjects</code> in conflict will be processed recursively ignoring adding non existent elements.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_merge_process"><a class="anchor" href="#_merge_process"></a>Merge Process</h5>
<div class="sect5">
<h6 id="_generic_json_merging"><a class="anchor" href="#_generic_json_merging"></a>Generic JSON Merging</h6>
<div class="paragraph">
<p>The merge process will be:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add non existent JSON Objects from patch file to base file.</p>
</li>
<li>
<p>For existent object in both files, will add non existent keys from patch to base object. This process will be done recursively for all existent objects.</p>
</li>
<li>
<p>For JSON Arrays existent in both files, the arrays will be just concatenated.</p>
</li>
</ol>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==TypeScript Plug-in</p>
</div>
<div class="paragraph">
<p>The TypeScript Plug-in enables merging result TS files to existing ones. This plug-in is used at the moment for generate an Angular2 client with all CRUD functionalities enabled. The plug-in also generates i18n functionality just appending at the end of the word the <code>ES</code> or <code>EN</code> suffixes, to put into the developer knowledge that this words must been translated to the correspondent language. Currently, the generation of Angular2 client requires an <code>ETO</code> java object as input so, there is no need to implement an input reader for ts artifacts for the moment.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_trigger_extensions"><a class="anchor" href="#_trigger_extensions"></a>Trigger Extensions</h5>
<div class="paragraph">
<p>As for the Angular2 generation the input is a java object, the trigger expressions (including matchers and variable assignments) are implemented as <a href="https://github.com/devonfw/cobigen/wiki/cobigen-javaplugin#trigger-extension">Java</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_merger_extensions_5"><a class="anchor" href="#_merger_extensions_5"></a>Merger extensions</h5>
<div class="paragraph">
<p>This plugin uses the <a href="https://github.com/devonfw/ts-merger">TypeScript Merger</a> to merge files. There are currently two merge strategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>merge strategy <code>tsmerge</code> (add the new code respecting the existing is case of conflict)</p>
</li>
<li>
<p>merge strategy <code>tsmerge_override</code> (add the new code overwriting the existent in case of conflict)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
The merge algorithm mainly handles the following <code>AST</code> nodes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>ImportDeclaration</code></strong></p>
<div class="ulist">
<ul>
<li>
<p>Will add non existent imports whatever the merge strategy is.</p>
</li>
<li>
<p>For different imports from same module, the import clauses will be merged.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ts hljs" data-lang="ts">import { a } from 'b';
import { c } from 'b';
//Result
import { a, c } from 'b';</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>ClassDeclaration</code></strong></p>
<div class="ulist">
<ul>
<li>
<p>Adds non existent base properties from patch based on the name property.</p>
</li>
<li>
<p>Adds non existent base methods from patch based on the name signature.</p>
</li>
<li>
<p>Adds non existent annotations to class, properties and methods.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>PropertyDeclaration</code></strong></p>
<div class="ulist">
<ul>
<li>
<p>Adds non existent decorators.</p>
</li>
<li>
<p>Merge existent decorators.</p>
</li>
<li>
<p>With override strategy, the value of the property will be replaced by the patch value.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>MethodDeclaration</code></strong></p>
<div class="ulist">
<ul>
<li>
<p>With override strategy, the body will be replaced.</p>
</li>
<li>
<p>The parameters will be merged.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>ParameterDeclaration</code></strong></p>
<div class="ulist">
<ul>
<li>
<p>Replace type and modifiers with override merge strategy, adding non existent from patch into base.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>ConstructorDeclaration</code></strong></p>
<div class="ulist">
<ul>
<li>
<p>Merged in the same way as Method is.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>FunctionDeclaration</code></strong></p>
<div class="ulist">
<ul>
<li>
<p>Merged in the same way as Method is.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_input_reader"><a class="anchor" href="#_input_reader"></a>Input reader</h5>
<div class="paragraph">
<p>The TypeScript input reader is based on the one that the <a href="https://github.com/devonfw/ts-merger">TypeScript merger</a> uses. The current extensions are additional module fields giving from which library any entity originates.
<code>module: null</code> specifies a standard entity or type as <code>string</code> or <code>number</code>.</p>
</div>
<div class="sect5">
<h6 id="_object_model"><a class="anchor" href="#_object_model"></a>Object model</h6>
<div class="paragraph">
<p>To get a first impression of the created object after parsing, let us start with analyzing a small example, namely the parsing of a simple <a href="https://typeorm.io/#/">type-orm</a> model written in TypeScript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Typescript hljs" data-lang="Typescript">import {Entity, PrimaryGeneratedColumn, Column} from "typeorm";

@Entity()
export class User {

    @PrimaryGeneratedColumn()
    id: number;

    @Column()
    firstName: string;

    @Column()
    lastName: string;

    @Column()
    age: number;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The returned object has the following structure</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "importDeclarations": [
    {
      "module": "typeorm",
      "named": [
        "Entity",
        "PrimaryGeneratedColumn",
        "Column"
      ],
      "spaceBinding": true
    }
  ],
  "classes": [
    {
      "identifier": "User",
      "modifiers": [
        "export"
      ],
      "decorators": [
        {
          "identifier": {
            "name": "Entity",
            "module": "typeorm"
          },
          "isCallExpression": true
        }
      ],
      "properties": [
        {
          "identifier": "id",
          "type": {
            "name": "number",
            "module": null
          },
          "decorators": [
            {
              "identifier": {
                "name": "PrimaryGeneratedColumn",
                "module": "typeorm"
              },
              "isCallExpression": true
            }
          ]
        },
        {
          "identifier": "firstName",
          "type": {
            "name": "string",
            "module": null
          },
          "decorators": [
            {
              "identifier": {
                "name": "Column",
                "module": "typeorm"
              },
              "isCallExpression": true
            }
          ]
        },
        {
          "identifier": "lastName",
          "type": {
            "name": "string",
            "module": null
          },
          "decorators": [
            {
              "identifier": {
                "name": "Column",
                "module": "typeorm"
              },
              "isCallExpression": true
            }
          ]
        },
        {
          "identifier": "age",
          "type": {
            "name": "number",
            "module": null
          },
          "decorators": [
            {
              "identifier": {
                "name": "Column",
                "module": "typeorm"
              },
              "isCallExpression": true
            }
          ]
        }
      ]
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we only consider the first level of the JSON response, we spot two lists of <code>imports</code> and <code>classes</code>, providing information about the only import statement and the only <strong>User</strong> class, respectively. Moving one level deeper we observe that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Every import statement is translated to an import declaration entry in the declarations list, containing the module name, as well as a list of entities imported from the given module.</p>
</li>
<li>
<p>Every class entry provides besides the class identifier, its decoration(s), modifier(s), as well as a list of properties that the original class contains.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that, for each given type, the module from which it is imported is also given as in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">  "identifier": {
    "name": "Column",
    "module": "typeorm"
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returning to the general case, independently from the given TypeScript file, an object having the following Structure will be created.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>importDeclarations</code></strong>: A list of import statement as described above</p>
</li>
<li>
<p><strong><code>exportDeclarations</code></strong>: A list of export declarations</p>
</li>
<li>
<p><strong>classes</strong>: A list of classes extracted from the given file, where each entry is full of class specific fields, describing its properties and decorator for example.</p>
</li>
<li>
<p><strong>interfaces</strong>: A list of interfaces.</p>
</li>
<li>
<p><strong>variables</strong>: A list of variables.</p>
</li>
<li>
<p><strong>functions</strong>: A list of functions.</p>
</li>
<li>
<p><strong>enums</strong>: A list of enumerations.</p>
</li>
</ul>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==HTML Plug-in</p>
</div>
<div class="paragraph">
<p>The HTML Plug-in enables merging result HTML files to existing ones. This plug-in is used at the moment for generate an Angular2 client. Currently, the generation of Angular2 client requires an ETO java object as input so, there is no need to implement an input reader for ts artifacts for the moment.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_trigger_extensions_2"><a class="anchor" href="#_trigger_extensions_2"></a>Trigger Extensions</h5>
<div class="paragraph">
<p>As for the Angular2 generation the input is a java object, the trigger expressions (including matchers and variable assignments) are implemented as <a href="https://github.com/devonfw/cobigen/wiki/cobigen-javaplugin#trigger-extension">Java</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_merger_extensions_6"><a class="anchor" href="#_merger_extensions_6"></a>Merger extensions</h5>
<div class="paragraph">
<p>There are currently two merge strategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>merge strategy <code>html-ng*</code> (add the new code respecting the existing is case of conflict)</p>
</li>
<li>
<p>merge strategy <code>html-ng*_override</code> (add the new code overwriting the existent in case of conflict)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The merging of two Angular2 files will be processed as follows:</p>
</div>
<div class="paragraph">
<p>The merge algorithm handles the following AST nodes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>md-nav-list</p>
</li>
<li>
<p>a</p>
</li>
<li>
<p>form</p>
</li>
<li>
<p>md-input-container</p>
</li>
<li>
<p>input</p>
</li>
<li>
<p>name (for name attribute)</p>
</li>
<li>
<p>ngIf</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Be aware, that the HTML merger is not generic and only handles the described tags needed for merging code of a basic Angular client implementation. For future versions, it is planned to implement a more generic solution.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maven_build_integration"><a class="anchor" href="#_maven_build_integration"></a>Maven Build Integration</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>==Maven Build Integration</p>
</div>
<div class="paragraph">
<p>For maven integration of CobiGen you can include the following build plugin into your build:</p>
</div>
<div class="listingblock">
<div class="title">Build integration of CobiGen</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
      &lt;artifactId&gt;cobigen-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;VERSION-YOU-LIKE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;cobigen-generate&lt;/id&gt;
          &lt;phase&gt;generate-resources&lt;/phase&gt;
          &lt;goals&gt;
            &lt;goal&gt;generate&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Available goals</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>generate</code>: Generates contents configured by the standard non-compiled configuration folder. Thus generation can be controlled/configured due to an location URI of the configuration and template or increment ids to be generated for a set of inputs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Available phases</strong> are all phases, which already provide compiled sources such that CobiGen can perform reflection on it. Thus possible phases are for example package, site.</p>
</div>
<div class="sect3">
<h4 id="_provide_template_set"><a class="anchor" href="#_provide_template_set"></a>Provide Template Set</h4>
<div class="paragraph">
<p>For generation using the CobiGen maven plug-in, the CobiGen configuration can be provided in two different styles:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>By a <code>configurationFolder</code>, which should be available on the file system whenever you are running the generation. The value of <code>configurationFolder</code> should correspond to the maven file path syntax.</p>
<div class="listingblock">
<div class="title">Provide CobiGen configuration by configuration folder (file)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      ...
      &lt;configuration&gt;
        &lt;configurationFolder&gt;cobigen-templates&lt;/configurationFolder&gt;
      &lt;/configuration&gt;
       ...
     &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>By maven dependency, whereas the maven dependency should stick on the same conventions as the configuration folder. This explicitly means that it should contain non-compiled resources as well as the <code>context.xml</code> on top-level.</p>
<div class="listingblock">
<div class="title">Provide CobiGen configuration by maven dependency (jar)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      ...
      &lt;dependencies&gt;
        &lt;dependency&gt;
          &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
          &lt;artifactId&gt;templates-XYZ&lt;/artifactId&gt;
          &lt;version&gt;VERSION-YOU-LIKE&lt;/version&gt;
        &lt;/dependency&gt;
      &lt;/dependencies&gt;
      ...
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We currently provide a generic deployed version of the templates on the devonfw-nexus for Register Factory (<code>&lt;artifactId&gt;cobigen-templates-rf&lt;/artifactId&gt;</code>) and for the devonfw itself (<code>&lt;artifactId&gt;cobigen-templates-devonfw&lt;/artifactId&gt;</code>).</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_build_configuration"><a class="anchor" href="#_build_configuration"></a>Build Configuration</h4>
<div class="paragraph">
<p>Using the following configuration you will be able to customize your generation as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;destinationRoot&gt;</code> specifies the root directory the relative <code>destinationPath</code> of <a href="cobigen-core_configuration#Templates-configuration.adoc">CobiGen templates configuration</a> should depend on. <em>Default ${basedir}</em></p>
</li>
<li>
<p><code>&lt;inputPackage&gt;</code> declares a package name to be used as input for batch generation. This refers directly to the CobiGen Java Plug-in <a href="cobigen-javaplugin#<code>ContainerMatcher</code>-types.adoc">container matchers of type package</a> configuration.</p>
</li>
<li>
<p><code>&lt;inputFile&gt;</code> declares a file to be used as input. The CobiGen maven plug-in will try to parse this file to get an appropriate input to be interpreted by any CobiGen plug-in.</p>
</li>
<li>
<p><code>&lt;increment&gt;</code> specifies an <a href="cobigen-core_configuration#increment-node.adoc">increment</a> ID to be generated. You can specify one single increment with content <code>ALL</code> to generate all increments matching the input(s).</p>
</li>
<li>
<p><code>&lt;template&gt;</code> specifies a <a href="cobigen-core_configuration#increment-node.adoc">template</a> ID to be generated. You can specify one single template with content <code>ALL</code> to generate all templates matching the input(s).</p>
</li>
<li>
<p><code>&lt;forceOverride&gt;</code> specifies an overriding behavior, which enables non-mergeable resources to be completely rewritten by generated contents. For mergeable resources this flag indicates, that conflicting fragments during merge will be replaced by generated content. <em>Default: false</em></p>
</li>
<li>
<p><code>&lt;failOnNothingGenerated&gt;</code> specifies whether the build should fail if the execution does not generate anything.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example for a simple build configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
       ...
      &lt;configuration&gt;
        &lt;destinationRoot&gt;${basedir}&lt;/destinationRoot&gt;
        &lt;inputPackages&gt;
          &lt;inputPackage&gt;package.to.be.used.as.input&lt;/inputPackage&gt;
        &lt;/inputPackages&gt;
        &lt;inputFiles&gt;
          &lt;inputFile&gt;path/to/file/to/be/used/as/input&lt;/inputFile&gt;
        &lt;/inputFiles&gt;
        &lt;increments&gt;
          &lt;increment&gt;IncrementID&lt;/increment&gt;
        &lt;/increments&gt;
        &lt;templates&gt;
          &lt;template&gt;TemplateID&lt;/template&gt;
        &lt;/templates&gt;
        &lt;forceOverride&gt;false&lt;/forceOverride&gt;
      &lt;/configuration&gt;
        ...
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_plugin_injection_since_v3"><a class="anchor" href="#_plugin_injection_since_v3"></a>Plugin Injection Since v3</h4>
<div class="paragraph">
<p>Since version 3.0.0, the <a href="cobigen-core_configuration#plugin-mechanism.adoc">plug-in mechanism</a> has changed to support modular releases of the CobiGen plug-ins. Therefore, you need to add all plug-ins to be used for generation. Take the following example to get the idea:</p>
</div>
<div class="listingblock">
<div class="title">Example of a full configuration including plugins</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
      &lt;artifactId&gt;cobigen-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;VERSION-YOU-LIKE&lt;/version&gt;
      &lt;executions&gt;
        ...
      &lt;/executions&gt;
      &lt;configuration&gt;
        ...
      &lt;/configuration&gt;
      &lt;dependencies&gt;
        &lt;dependency&gt;
          &lt;groupId&gt;com.devonfw.cobigen&lt;groupId&gt;
          &lt;artifactId&gt;templates-devon4j&lt;/artifactId&gt;
          &lt;version&gt;2.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
          &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
          &lt;artifactId&gt;tempeng-freemarker&lt;/artifactId&gt;
          &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
          &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
          &lt;artifactId&gt;javaplugin&lt;/artifactId&gt;
          &lt;version&gt;1.6.0&lt;/version&gt;
        &lt;/dependency&gt;
      &lt;/dependencies&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_a_full_example"><a class="anchor" href="#_a_full_example"></a>A full example</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A complete maven configuration example</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
      &lt;artifactId&gt;cobigen-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;6.0.0&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;generate&lt;/id&gt;
          &lt;phase&gt;package&lt;/phase&gt;
          &lt;goals&gt;
            &lt;goal&gt;generate&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
      &lt;configuration&gt;
        &lt;inputFiles&gt;
          &lt;inputFile&gt;src/main/java/io/github/devonfw/cobigen/generator/dataaccess/api/InputEntity.java&lt;/inputFile&gt;
        &lt;/inputFiles&gt;
        &lt;increments&gt;
          &lt;increment&gt;dataaccess_infrastructure&lt;/increment&gt;
          &lt;increment&gt;daos&lt;/increment&gt;
        &lt;/increments&gt;
        &lt;failOnNothingGenerated&gt;false&lt;/failOnNothingGenerated&gt;
      &lt;/configuration&gt;
      &lt;dependencies&gt;
        &lt;dependency&gt;
          &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
          &lt;artifactId&gt;templates-devon4j&lt;/artifactId&gt;
          &lt;version&gt;2.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
          &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
          &lt;artifactId&gt;tempeng-freemarker&lt;/artifactId&gt;
          &lt;version&gt;2.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
          &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
          &lt;artifactId&gt;javaplugin&lt;/artifactId&gt;
          &lt;version&gt;1.6.0&lt;/version&gt;
        &lt;/dependency&gt;
      &lt;/dependencies&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_eclipse_integration"><a class="anchor" href="#_eclipse_integration"></a>Eclipse Integration</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>==Installation</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Remark:</strong> CobiGen is preinstalled in the <a href="https://github.com/devonfw/devon-ide">devonfw/devon-ide</a>.</p>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="_preconditions"><a class="anchor" href="#_preconditions"></a>Preconditions</h4>
<div class="ulist">
<ul>
<li>
<p>Eclipse 4.x</p>
</li>
<li>
<p>Java 7 Runtime (for starting eclipse with CobiGen). This is independent from the target version of your developed code.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_installation_steps"><a class="anchor" href="#_installation_steps"></a>Installation steps</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the eclipse installation dialog<br>
menu bar &#8594; <em>Help</em> &#8594; <em>Install new Software&#8230;&#8203;</em></p>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/installation/01-install-new-software.png" alt="01 install new software"></span></p>
</div>
</li>
<li>
<p>Open CobiGen&#8217;s update site<br>
Insert the update site of your interest into the filed <em>Work with</em> and press <em>Add &#8230;&#8203;</em><br>
Unless you know what you are doing we recommend you install every plugin as shown in the picture below.</p>
<div class="ulist">
<ul>
<li>
<p>Stable releases: <a href="https://devonfw.com/cobigen/updatesite/stable/" class="bare">https://devonfw.com/cobigen/updatesite/stable/</a><br>
<span class="image"><img src="_images/images/howtos/installation/02-select-update-site.png" alt="02 select update site"></span></p>
</li>
</ul>
</div>
</li>
<li>
<p>Follow the installation wizard<br>
Select <em>CobiGen Eclipse Plug-in</em> &#8594; <em>Next</em> &#8594; <em>Next</em> &#8594; accept the license &#8594; <em>Finish</em> &#8594; <em>OK</em> &#8594; <em>Yes</em></p>
</li>
<li>
<p>Once installed, a new menu entry named "CobiGen" will show up in the <em>Package Explorer&#8217;s</em> context menu. In the sub menu there will the <em>Generate&#8230;&#8203;</em> command, which may ask you to update the templates, and then you can start the generation wizard of CobiGen. You can adapt the templates by clicking on <em>Adapt Templates</em> which will give you the possibility to import the <em>CobiGen_Templates</em> automatically so that you can modified them.</p>
</li>
<li>
<p>Checkout (clone) your project&#8217;s templates folder or use the current templates released with CobiGen (<a href="https://github.com/devonfw/cobigen/tree/master/cobigen-templates" class="bare">https://github.com/devonfw/cobigen/tree/master/cobigen-templates</a>) and then choose Import -&gt; General -&gt; Existing Projects into Workspace to import the templates into your workspace.<br></p>
</li>
<li>
<p>Now you can start generating. To get an introduction of CobiGen try the devon4j templates and work on the devon4j sample application. There you might want to start with Entity objects as a selection to run CobiGen with, which will give you a good overview of what CobiGen can be used for right out of the box in devon4j based development. If you need some more introduction in how to come up with your templates and increments, please be referred to the documentation of the <a href="cobigen-core_configuration#context-configuration.adoc">context configuration</a> and the <a href="cobigen-core_configuration#templates-configuration">templates configuration</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dependent on your context configuration menu entry <em>Generate&#8230;&#8203;</em> may be gray out or not. See  for more information about valid selections for generation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_updating"><a class="anchor" href="#_updating"></a>Updating</h4>
<div class="paragraph">
<p>In general updating CobiGen for eclipse is done via the update mechanism of eclipse directly, as shown on image below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/installation/03-update-software.png" alt="03 update software"></span></p>
</div>
<div class="paragraph">
<p>Upgrading eclipse CobiGen plug-in to v3.0.0 needs some more attention of the user due to a changed plug-in architecture of CobiGen&#8217;s <a href="cobigen-core_configuration#plugin-mechanism.adoc">core module</a> and the eclipse integration. Eventually, we were able to provide any plug-in of CobiGen separately as its own eclipse bundle (fragment), which is automatically discovered by the main CobiGen Eclipse plug-in after installation.</p>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==Usage</p>
</div>
<div class="paragraph">
<p>CobiGen has two different generation modes depending on the input selected for generation. The first one is the <em>simple mode</em>, which will be started if the input contains only one input artifact, e.g. for Java an input artifact currently is a Java file. The second one is the <em>batch  mode</em>, which will be started if the input contains multiple input artifacts, e.g. for Java this means a list of files. In general this means also that the batch mode might be started when selecting complex models as inputs, which contain multiple input artifacts. The latter scenario has only been covered in the research group,yet.</p>
</div>
</div>
<div class="sect3">
<h4 id="_simple_mode"><a class="anchor" href="#_simple_mode"></a>Simple Mode</h4>
<div class="paragraph">
<p>Selecting the menu entry <em>Generate&#8230;&#8203;</em> the generation wizard will be opened:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/generate_wizard_page1.png" alt="generate wizard page1"></span></p>
</div>
<div class="paragraph">
<p>The left side of the wizard shows all available increments, which can be selected to be generated. Increments are a container like concept encompassing multiple files to be generated, which should result in a semantically closed generation output.
On the right side of the wizard all files are shown, which might be effected by the generation - dependent on the increment selection of files on the left side. The type of modification of each file will be encoded into following color scheme if the files are selected for generation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>green:</strong> files, which are currently non-existent in the file system. These files will be created during generation</p>
</li>
<li>
<p><strong>yellow:</strong> files, which are currently existent in the file system and which are configured to be merged with generated contents.</p>
</li>
<li>
<p><strong>red:</strong> files, which are currently existent in the file system. These files will be overwritten if manually selected.</p>
</li>
<li>
<p><strong>no color:</strong> files, which are currently existent in the file system. Additionally files, which were deselected and thus will be ignored during generation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Selecting an increment on the left side will initialize the selection of all shown files to be generated on the right side, whereas green and yellow categorized files will be selected initially. A manual modification of the pre-selection can be performed by switching to the customization tree using the <em>Customize</em> button on the right lower corner.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Optional:</strong> If you want to customize the generation object model of a Java input class, you might continue with the <em>Next &gt;</em> button instead of finishing the generation wizard. The next generation wizard page is currently available for Java file inputs and lists all non-static fields of the input. deselecting entries will lead to an adapted object model for generation, such that deselected fields will be removed in the object model for generation. By default all fields will be included in the object model.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Using the <em>Finish</em> button, the generation will be performed. Finally, CobiGen runs the eclipse internal <em>organize imports</em> and <em>format source code</em> for all generated sources and modified sources. Thus it is possible, that---especially <em>organize imports</em> opens a dialog if some types could not be determined automatically. This dialog can be easily closed by pressing on <em>Continue</em>. If the generation is finished, the <em>Success!</em> dialog will pop up.</p>
</div>
</div>
<div class="sect3">
<h4 id="_batch_mode"><a class="anchor" href="#_batch_mode"></a>Batch mode</h4>
<div class="paragraph">
<p>If there are multiple input elements selected, e.g., Java files, CobiGen will be started in batch mode. For the generation wizard dialog this means, that the generation preview will be constrained to the first selected input element. It does <em>not</em> preview the generation for each element of the selection or of a complex input. The selection of the files to be generated will be generated for each input element analogously afterwards.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/generate_wizard_page1_batch.png" alt="generate wizard page1 batch"></span></p>
</div>
<div class="paragraph">
<p>Thus the color encoding differs also a little bit:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>yellow:</strong> files, which are configured to be merged.</p>
</li>
<li>
<p><strong>red:</strong> files, which are not configured with any merge strategy and thus will be created if the file does not exist or overwritten if the file already exists</p>
</li>
<li>
<p><strong>no color:</strong> files, which will be ignored during generation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Initially all possible files to be generated will be selected.</p>
</div>
</div>
<div class="sect3">
<h4 id="_health_check"><a class="anchor" href="#_health_check"></a>Health Check</h4>
<div class="paragraph">
<p>To check whether CobiGen runs appropriately for the selected element(s) the user can perform a <em>Health Check</em> by activating the respective menu entry as shown below.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/health_check_menu_entry.png" alt="health check menu entry"></span></p>
</div>
<div class="paragraph">
<p>The simple <em>Health Check</em> includes 3 checks. As long as any of these steps fails, the <em>Generate</em> menu entry is grayed out.</p>
</div>
<div class="paragraph">
<p>The first step is to check whether the generation configuration is available at all. If this check fails you will see the following message:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/health_check_no_templates.png" alt="health check no templates"></span></p>
</div>
<div class="paragraph">
<p>This indicates, that there is no Project named <em>CobiGen_Templates</em> available in the current workspace. To run CobiGen appropriately, it is necessary to have a configuration project named <em>CobiGen_Templates</em> imported into your workspace. For more information see chapter <a href="cobigen-eclipse_installation#Installation-steps.adoc">Eclipse Installation</a>.</p>
</div>
<div class="paragraph">
<p>The second step is to check whether the template project includes a valid <em>context.xml</em>. If this check fails, you will see the following message:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/health_check_invalid_config.png" alt="health check invalid config"></span></p>
</div>
<div class="paragraph">
<p>This means that either your <em>context.xml</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>does not exist (or has another name)</p>
</li>
<li>
<p>or it is not valid one in any released version of CobiGen</p>
</li>
<li>
<p>or there is simply no automatic routine of upgrading your context configuration to a valid state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If all this is not the case, such as, there is a <em>context.xml</em>, which can be successfully read by CobiGen, you might get the following information:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/health_check_old_context.png" alt="health check old context"></span></p>
</div>
<div class="paragraph">
<p>This means that your <em>context.xml</em> is available with the correct name but it is outdated (belongs to an older CobiGen version). In this case just click on <em>Upgrade Context Configuration</em> to get the latest version.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Remark:</strong> This will create a backup of your current context configuration and converts your old configuration to the new format. The upgrade will remove all comments from the file, which could be retrieved later on again from the backup.
If the creation of the backup fails, you will be asked to continue or to abort.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The third step checks whether there are templates for the selected element(s). If this check fails, you will see the following message:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/health_check_no_matching_triggers.png" alt="health check no matching triggers"></span></p>
</div>
<div class="paragraph">
<p>This indicates, that there no trigger has been activated, which matches the current selection. The reason might be that your selection is faulty or that you imported the wrong template project (e.g. you are working on a devon4j project, but imported the Templates for the Register Factory). If you are a template developer, have a look at the  <a href="cobigen-core_configuration#trigger-node.adoc">trigger configuration</a> and at the corresponding available plug-in implementations of triggers, like e.g., <a href="cobigen-javaplugin#Trigger-extension.adoc">Java Plug-in</a> or <a href="cobigen-xmlplugin#Trigger-extension.adoc">XML Plug-in</a>.</p>
</div>
<div class="paragraph">
<p>If all the checks are passed you see the following message:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/health_check_all_OK.png" alt="health check all OK"></span></p>
</div>
<div class="paragraph">
<p>In this case everything is OK and the <em>Generate</em> button is not grayed out anymore so that you are able to trigger it and see the <a href="#simple-mode">[simple-mode]</a>.</p>
</div>
<div class="paragraph">
<p>In addition to the basic check of the context configuration, you also have the opportunity to perform an  <em>Advanced Health Check</em>, which will check all available templates configurations (<em>templates.xml</em>) of path-depth=1 from the configuration project root according to their compatibility.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/howtos/eclipse/health_check_advanced_up_to_date.png" alt="health check advanced up to date"></span></p>
</div>
<div class="paragraph">
<p>Analogous to the upgrade of the <em>context configuration</em>, the <em>Advanced Health Check</em> will also provide upgrade functionality for <em>templates configurations</em> if available.</p>
</div>
</div>
<div class="sect3">
<h4 id="_update_templates"><a class="anchor" href="#_update_templates"></a>Update Templates</h4>
<div class="paragraph">
<p>Update Template: Select Entity file and right click then select CobiGen Update Templates after that click on download then download successfully message will be come .</p>
</div>
</div>
<div class="sect3">
<h4 id="_adapt_templates"><a class="anchor" href="#_adapt_templates"></a>Adapt Templates</h4>
<div class="paragraph">
<p>Adapt Template: Select any file and right click, then select `cobigen &#8594; <em>Adapt Templates</em> `.If CobiGen templates jar is not available then it downloads them automatically. If CobiGen templates is already present then it will override existing template in workspace and click on OK then imported template successfully message will be come.</p>
</div>
<div class="paragraph">
<p>Finally, please change the Java version of the project to 1.8 so that you don&#8217;t have any compilation errors.</p>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p>==Logging</p>
</div>
<div class="paragraph">
<p>If you have any problem with the CobiGen eclipse plug-in, you might want to enable logging to provide more information for further problem analysis. This can be done easily by adding the <code>logback.xml</code> to the root of the CobiGen_templates configuration folder. The file should contain at least the following contents, whereas you should specify an absolute path to the target log file (at the <code>TODO</code>). If you are using the (<a href="https://github.com/devonfw/cobigen/tree/master/cobigen-templates">cobigen-templates</a> project, you might have the contents already specified but partially commented.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- This file is for logback classic. The file contains the configuration for sl4j logging --&gt;
&lt;configuration&gt;
    &lt;appender name="FILE" class="ch.qos.logback.core.FileAppender"&gt;
        &lt;file&gt;&lt;!-- TODO choose your log file location --&gt;&lt;/file&gt;
        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;Pattern&gt;%n%date %d{HH:mm:ss.SSS} [%thread] %-5level %logger - %msg%n
            &lt;/Pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;
    &lt;root level="DEBUG"&gt;
        &lt;appender-ref ref="FILE" /&gt;
    &lt;/root&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_template_development"><a class="anchor" href="#_template_development"></a>Template Development</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="_helpful_links_for_template_development"><a class="anchor" href="#_helpful_links_for_template_development"></a>Helpful links for template development</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://freemarker.org/">FreeMarker Root Page</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://freemarker.org/docs/dgui_template_exp.html#exp_cheatsheet">Expressions Cheat Sheet</a></p>
</li>
<li>
<p><a href="http://freemarker.org/docs/ref.html">Complete Language reference</a></p>
</li>
<li>
<p><a href="https://try.freemarker.apache.org/">FreeMarker Template Tester</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="cobigen-javaplugin#template-object-model.adoc">Variables to access Java source model</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
