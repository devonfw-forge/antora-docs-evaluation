<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="my-thai-star" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">My-thai-star</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shop-floor/1.0/index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shop-floor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/my-thai-star/edit/develop/modules/ROOT/pages/sap-hana-guide.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_sap_hana">SAP HANA</a></li>
<li><a href="#_downloadinstall_vmwaresap_hana">Download/Install VMware/SAP HANA</a></li>
<li><a href="#_run_sap_hana_database_server">Run SAP HANA Database Server</a></li>
<li><a href="#_setting_up_database_for_mtsj">Setting up Database for MTSJ</a></li>
<li><a href="#_connect_to_db">Connect to DB</a></li>
<li><a href="#_enabling_the_script_server">Enabling the script server</a></li>
<li><a href="#_creating_a_user_on_hxe">Creating a User on HXE</a></li>
<li><a href="#_setting_up_mtsj_java_back_end">Setting up MTSJ Java back-end</a></li>
<li><a href="#_enabling_prediction_usecase_in_mtsj">Enabling prediction UseCase in MTSJ</a></li>
<li><a href="#_setting_up_mtsj_angular">Setting up MTSJ angular</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_sap_hana"><a class="anchor" href="#_sap_hana"></a>SAP HANA</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_downloadinstall_vmwaresap_hana"><a class="anchor" href="#_downloadinstall_vmwaresap_hana"></a>Download/Install VMware/SAP HANA</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Download VMware Workstation Player to run SAP HANA database <a href="https://www.vmware.com/in/products/workstation-player/workstation-player-evaluation.html" class="bare">https://www.vmware.com/in/products/workstation-player/workstation-player-evaluation.html</a></p>
</li>
<li>
<p>Install VMware and open. Using VMware browse check if you can find hxe.ova file. This file is not visible through windows explorer. This is the SAP HANA Express Edition image to be run inside VMware. If available open it in VMware. Otherwise, download Download Manager for SAP HANA from the link below. It may ask to register which is a simple process.
<a href="https://www.sap.com/cmp/ft/crm-xu16-dat-hddedft/typ.html" class="bare">https://www.sap.com/cmp/ft/crm-xu16-dat-hddedft/typ.html</a></p>
</li>
<li>
<p>Run the download manager and on the screen use the defaults and click download.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_sap_hana_database_server"><a class="anchor" href="#_run_sap_hana_database_server"></a>Run SAP HANA Database Server</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Once the .ova file has been opened inside VMware workstation. Click on the image and go to Edit Virtual Machine Settings. Set the memory allocation to 5GB. And Network Connection to NAT . NAT shows the IP for the virtual machine which will be used to establish JDBC connection</p>
</li>
<li>
<p>Click Play Virtual Machine. When first time the virtual machine runs it display following. Copy the IP address which will be used for JDBC connection</p>
</li>
<li>
<p>Type hxeadm, which is the username and hit Enter. Next it will ask for password which is HXEHana1. Once successfully logged in it will ask to set a new password. Choose a new password and remember.</p>
</li>
<li>
<p>You need to set Master password for SAP HANA database. Set it as you like and remember.</p>
</li>
<li>
<p>For “proceed with configuration” type y and hit Enter. HANA database has started in the background.</p>
</li>
<li>
<p>Try connecting with following command, replace the password with the master password</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>hxehost:hxeadm&gt;hdbsql
   \c -d SYSTEMDB -n localhost:39013 -u SYSTEM -p &lt;&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_database_for_mtsj"><a class="anchor" href="#_setting_up_database_for_mtsj"></a>Setting up Database for MTSJ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have install SAP HANA with VMware , you need to setup the DB.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connect_to_db"><a class="anchor" href="#_connect_to_db"></a>Connect to DB</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>After you start VMware, login with hxeadm as login and the password.
At the prompt  - hxehost:hxeadm&gt;hdbsql
Please note the IP address, that need to be put in MTSJ java back-end</p>
</li>
<li>
<p>On prompt hdbsql&gt; type below to connect to the DB</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>\c -d SYSTEMDB -n localhost:39013 -u SYSTEM -p &lt;password&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Type below query to see, if you have access to tenant database i.e. HXE</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT DATABASE_NAME,  ACTIVE_STATUS FROM SYS.M_DATABASES ORDER BY 1;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_the_script_server"><a class="anchor" href="#_enabling_the_script_server"></a>Enabling the script server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run the below for enabling the script server</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-SQL hljs" data-lang="SQL">ALTER DATABASE HXE ADD 'scriptserver'</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check if the script server is enable, execute below statement</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-SQL hljs" data-lang="SQL">SELECT SERVICE_NAME, PORT, ACTIVE_STATUS FROM SYS.M_SERVICES ORDER BY 1;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It should see the <code>scriptserver</code> in it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_user_on_hxe"><a class="anchor" href="#_creating_a_user_on_hxe"></a>Creating a User on HXE</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Connect using the below</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>\c -d hxe -n localhost:39013 -u system -p &lt;password&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To create a user</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Create user hanauser1 password &lt;password&gt; no force_first_password_change</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Grant below permission to the user</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>GRANT AFLPM_CREATOR_ERASER_EXECUTE TO hanauser1
GRANT AFL__SYS_AFL_AFLPAL_EXECUTE TO hanauser1 – here we have 2 underscore
grant AFL__SYS_AFL_AFLPAL_EXECUTE_WITH_GRANT_OPTION to hanauser1
grant AFLPM_CREATOR_ERASER_EXECUTE to hanauser
GRANT DATA ADMIN TO hanauser1
GRANT IMPORT TO hanauser1

GRANT EXECUTE on _SYS_REPO.GRANT_ACTIVATED_ROLE TO hanauser1
GRANT EXECUTE ON system.afl_wrapper_generator to hanauser1

GRANT EXECUTE ON system.afl_wrapper_eraser to hanauser1
GRANT MODELING TO hanauser1</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Now connect to HXE tenant using below</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>\c -d hxe -n localhost:39013 -u hanauser1 -p &lt;password&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_mtsj_java_back_end"><a class="anchor" href="#_setting_up_mtsj_java_back_end"></a>Setting up MTSJ Java back-end</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Update application.properties file</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">##update the below
`spring.flyway.locations=classpath:db/migration,classpath:db/specific/hana`
##Add the below
spring.jpa.database=default
spring.jpa.database-platform=org.hibernate.dialect.HANAColumnStoreDialect
spring.datasource.driver-class-name=com.sap.db.jdbc.Driver
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

#Comment the below
#spring.profiles.active=h2mem

spring.profiles.active=hana</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Update config/application.properties file</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">##update the below
spring.flyway.locations=classpath:db/migration,classpath:db/specific/hana
spring.datasource.url=jdbc:sap://ip:port/?databaseName=hxe
spring.datasource.username=username
spring.datasource.password=password</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_prediction_usecase_in_mtsj"><a class="anchor" href="#_enabling_prediction_usecase_in_mtsj"></a>Enabling prediction UseCase in MTSJ</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_setting_up_mtsj_angular"><a class="anchor" href="#_setting_up_mtsj_angular"></a>Setting up MTSJ angular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>update the following property in config file in <code>my-thai-star\angular\src\app\core\config</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">enablePrediction: true,</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting up data for Predictive use case, please refer to <code><a href="https://github.com/SAP/hana-my-thai-star-data-generator" class="bare">https://github.com/SAP/hana-my-thai-star-data-generator</a></code></p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
