<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="shop-floor" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Shop-floor</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/shop-floor/edit/develop/modules/ROOT/pages/dsf-azure-sonarqube-integration.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_integrate_the_sonarqube_plugin_in_an_azure_devops_pipeline"><a class="anchor" href="#_integrate_the_sonarqube_plugin_in_an_azure_devops_pipeline"></a>Integrate the SonarQube plugin in an Azure DevOps pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of this readme is that you can configure your Azure Devops pipeline in order to be able to run a code analysis, analyse the code coverage and publish the results through the Sonar plugin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_do_it"><a class="anchor" href="#_how_to_do_it"></a>How to do it</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_step_1_create_a_service_connection"><a class="anchor" href="#_step_1_create_a_service_connection"></a>==  Step 1: Create a service connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first thing to do is to declare your SonarQube server as a service endpoint in your Azure DevOps project settings.</p>
</div>
<div class="paragraph">
<p>Go to project settings &#8594; pipelines &#8594; service connections and <strong>create</strong> and choose 'SonarQube'.</p>
</div>
<div class="paragraph">
<p><strong>Create service connection</strong></p>
</div>
<div class="paragraph">
<p>Specify the server url and the connection name of your SonarQube server and the token Auth
Go to your SonarQube server and log in as admin,
once inside, go to administration &#8594; Security &#8594; Users &#8594; Administrator &#8594; Tokens&#8594; And <strong>generate</strong> the token.
Copy the generated token(once created it will never appear again so don&#8217;t lose it) and paste it and click on <strong>save</strong> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/azure-sonarqube/ServiceConnection.png" alt="ServiceConnection">
</div>
</div>
<div class="paragraph">
<p>The service connection has been created.
Once this step is done your service creation will appear now in the <em>service connections</em> side bar.</p>
</div>
<div class="paragraph">
<p>For more info regarding the Authentication part please read the <a href="https://docs.sonarqube.org/latest/user-guide/user-token/">official documentation</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_2_add_the_required_tasks_in_the_azure_pipeline"><a class="anchor" href="#_step_2_add_the_required_tasks_in_the_azure_pipeline"></a>==  Step 2: Add the required tasks in the azure pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to integrate the SonarQube in the pipeline, 3 steps or <strong>tasks</strong> are required(Depending on the different solutions like .NET, Java, C..etc some of this tasks can be optional), this tasks are:</p>
</div>
<div class="paragraph">
<p>Prepare Analysis configuration
Run Code Analysis
Publish Quality Gate result</p>
</div>
<div class="paragraph">
<p>We can use the wizard to create this in an easy way, search "SonarQube" and let&#8217;s configure the tasks one by one.</p>
</div>
<div class="paragraph">
<p><strong>Prepare Analysis configuration:</strong></p>
</div>
<div class="paragraph">
<p>Fill the required fields and click on <strong>add</strong></p>
</div>
<div class="paragraph">
<p>The <strong>prepare</strong> task will be now shown in the pipeline code:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/azure-sonarqube/sonarprepare.png" alt="sonarprepare">
</div>
</div>
<div class="paragraph">
<p>Follow the <a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-azure-devops/">official documentation</a> if you have doubts while filling the fields:</p>
</div>
<div class="paragraph">
<p>Once the <strong>prepare</strong> is done, continue with the code analysis.</p>
</div>
<div class="paragraph">
<p><strong>Run Code Analysis</strong></p>
</div>
<div class="paragraph">
<p>Select this from the task assistant and just like happened with the first task, the code will appear in your pipeline.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/azure-sonarqube/runAnalysis.png" alt="runAnalysis">
</div>
</div>
<div class="paragraph">
<p>Now, let&#8217;s publish the result of the analysis.</p>
</div>
<div class="paragraph">
<p><strong>Publish quality gate result</strong></p>
</div>
<div class="paragraph">
<p>Same as we did before, select in the display the publish extension and add it</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/azure-sonarqube/publish.png" alt="publish">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_3_run_the_pipeline"><a class="anchor" href="#_step_3_run_the_pipeline"></a>==  Step 3: Run the pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With this, all the required steps to integrate SonarQube in your Azure DevOps pipeline are done, the last thing you need to do is <strong>run</strong> your pipeline and your code will be analyzed and the results published.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
