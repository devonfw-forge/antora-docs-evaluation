<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="shop-floor" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Shop-floor</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/shop-floor/edit/develop/modules/ROOT/pages/dsf-mirabaud-jenkins-nexus-integration.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_jenkins_nexus_integration"><a class="anchor" href="#_jenkins_nexus_integration"></a>Jenkins - Nexus integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nexus is used to both host dependencies for devonfw projects to download (common Maven ones, custom ones such as <code>ojdb</code> and even devonfw so-far-IP modules). Moreover, it will host our projects' build artifacts (<code>.jar</code>, <code>.war</code>, &#8230;&#8203;) and expose them for us to download, wget and so on. A team should have a bidirectional relation with its Nexus repository.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_1_jenkins_credentials_to_access_nexus"><a class="anchor" href="#_1_jenkins_credentials_to_access_nexus"></a>1. Jenkins credentials to access Nexus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, when Nexus is installed, it contains 3 user credentials for different purposes. The admin ones look like this: <code>admin/admin123</code>. There are also other 2: <code>deployment/deployment123</code> and <code>TODO</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// ADD USER TABLE IMAGE FROM NEXUS</pre>
</div>
</div>
<div class="paragraph">
<p>In this case, let&#8217;s use the ones with the greater permissions: <code>admin/admin123</code>.</p>
</div>
<div class="paragraph">
<p>Go to <code>Credentials &gt; System</code> (left sidebar of Jenkins) then to <code>Global credentials (unrestricted)</code> on the page table and on the left sidebar again click on <code>Add Credentials</code>.</p>
</div>
<div class="paragraph">
<p>This should be shown in your Jenkins:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/jenkins-nexus/jenkins-new-nexus-credentials.png" alt="jenkins new nexus credentials">
</div>
</div>
<div class="paragraph">
<p>Fill the form like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/jenkins-nexus/jenkins-new-nexus-credentials-filled.png" alt="jenkins new nexus credentials filled">
</div>
</div>
<div class="paragraph">
<p>And click in OK to create them. Check if the whole thing went as expected:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/jenkins-nexus/jenkins-new-nexus-credentials-completed.png" alt="jenkins new nexus credentials completed">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_jenkins_maven_settings"><a class="anchor" href="#_2_jenkins_maven_settings"></a>2. Jenkins Maven Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Those settings are also configured (or maybe not-yet-configured) in our <strong>devonfw distributions</strong> in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>/${devonfw-dist-path}
    /software
        /maven
            /conf
                settings.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go to <code>Manage Jenkins &gt; Managed files</code> and select <code>Add a new Config</code> in the left sidebar.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/jenkins-nexus/jenkins-new-maven-settings.png" alt="jenkins new maven settings">
</div>
</div>
<div class="paragraph">
<p>The ID field will get automatically filled with a unique value if you don&#8217;t set it up. No problems about that. Click on <code>Submit</code> and let&#8217;s create some Servers Credentials:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/jenkins-nexus/jenkins-new-maven-settings-servers.png" alt="jenkins new maven settings servers">
</div>
</div>
<div class="paragraph">
<p>Those <strong>Server Credentials</strong> will allow Jenkins to access to the different repositories/servers that are going to be declared afterwards.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s create 4 server credentials.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>my.nexus</code>: Will serve as general profile for <strong>Maven</strong>.</p>
</li>
<li>
<p><code>mynexus.releases</code>: When a <code>mvn deploy</code> process is executed, this will tell <strong>Maven</strong> where to push <strong>releases</strong> to.</p>
</li>
<li>
<p><code>mynexus.snapshots</code>: The same as before, but with <strong>snapshots</strong> instead.</p>
</li>
<li>
<p><code>mynexus.central</code>: Just in case we want to install an specific dependency that is not by default in the Maven Central repository (such as <code>ojdbc</code>), Maven will point to it instead.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/others/jenkins-nexus/jenkins-new-maven-settings-servers-credentials.png" alt="jenkins new maven settings servers credentials">
</div>
</div>
<div class="paragraph">
<p>A more or less complete Jenkins Maven settings would look look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;

    &lt;mirrors&gt;
        &lt;mirror&gt;
            &lt;id&gt;mynexus.central&lt;/id&gt;
            &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
            &lt;name&gt;central&lt;/name&gt;
            &lt;url&gt;http://${URL-TO-YOUR-NEXUS-REPOS}/central&lt;/url&gt;
        &lt;/mirror&gt;
    &lt;/mirrors&gt;

    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;my.nexus&lt;/id&gt;
            &lt;!-- 3 REPOS ARE DECLARED --&gt;
            &lt;repositories&gt;
                &lt;repository&gt;
                    &lt;id&gt;mynexus.releases&lt;/id&gt;
                    &lt;name&gt;mynexus Releases&lt;/name&gt;
                    &lt;url&gt;http://${URL-TO-YOUR-NEXUS-REPOS}/releases&lt;/url&gt;
                    &lt;releases&gt;
                        &lt;enabled&gt;true&lt;/enabled&gt;
                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
                    &lt;/releases&gt;
                    &lt;snapshots&gt;
                        &lt;enabled&gt;false&lt;/enabled&gt;
                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
                    &lt;/snapshots&gt;
                &lt;/repository&gt;
                &lt;repository&gt;
                    &lt;id&gt;mynexus.snapshots&lt;/id&gt;
                    &lt;name&gt;mynexus Snapshots&lt;/name&gt;
                    &lt;url&gt;http://${URL-TO-YOUR-NEXUS-REPOS}/snapshots&lt;/url&gt;
                    &lt;releases&gt;
                        &lt;enabled&gt;false&lt;/enabled&gt;
                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
                    &lt;/releases&gt;
                    &lt;snapshots&gt;
                        &lt;enabled&gt;true&lt;/enabled&gt;
                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
                    &lt;/snapshots&gt;
                &lt;/repository&gt;
            &lt;/repositories&gt;
            &lt;pluginRepositories&gt;
                &lt;pluginRepository&gt;
                    &lt;id&gt;public&lt;/id&gt;
                    &lt;name&gt;Public Repositories&lt;/name&gt;
                    &lt;url&gt;http://${URL-TO-YOUR-NEXUS}/nexus/content/groups/public/&lt;/url&gt;
                    &lt;releases&gt;
                        &lt;enabled&gt;true&lt;/enabled&gt;
                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
                    &lt;/releases&gt;
                    &lt;snapshots&gt;
                        &lt;enabled&gt;true&lt;/enabled&gt;
                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
                    &lt;/snapshots&gt;
                &lt;/pluginRepository&gt;
            &lt;/pluginRepositories&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
    &lt;!-- HERE IS WHERE WE TELL MAVEN TO CHOOSE THE my.nexus PROFILE --&gt;
    &lt;activeProfiles&gt;
        &lt;activeProfile&gt;my.nexus&lt;/activeProfile&gt;
    &lt;/activeProfiles&gt;
&lt;/settings&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_use_it_in_jenkins_pipelines"><a class="anchor" href="#_3_use_it_in_jenkins_pipelines"></a>3. Use it in Jenkins Pipelines</h2>
<div class="sectionbody">

</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
