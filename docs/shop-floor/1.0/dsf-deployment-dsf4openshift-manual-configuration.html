<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Devonfw.github.io Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Devonfw.github.io Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="shop-floor" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Shop-floor</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../architecture-guidelines/1.0/index.html">Architecture-guidelines</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-guidelines/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cicdgen/1.0/index.html">Cicdgen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cicdgen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cobigen/1.0/index.html">Cobigen</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cobigen/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dashboard/1.0/index.html">Dashboard</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dashboard/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4j/1.0/index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4j/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4net/1.0/index.html">Devon4net</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4net/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ng/1.0/index.html">Devon4ng</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ng/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4node/1.0/index.html">Devon4node</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4node/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4quarkus/1.0/index.html">Devon4quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4quarkus/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devon4ts/1.0/index.html">Devon4ts</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devon4ts/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devonfw.github.io/1.0/index.html">devonfw.github.io</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devonfw.github.io/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../getting-started/1.0/index.html">Getting-started</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../getting-started/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../github/1.0/index.html">Github</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../github/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hangar/1.0/index.html">Hangar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hangar/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ide/1.0/index.html">IDE</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ide/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../jump-the-queue/1.0/index.html">Jump-the-queue</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../jump-the-queue/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mrchecker/1.0/index.html">Mrchecker</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mrchecker/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../my-thai-star/1.0/index.html">My-thai-star</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../my-thai-star/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../production-line/1.0/index.html">Production-line</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../production-line/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Shop-floor</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solicitor/1.0/index.html">Solicitor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solicitor/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sonar-devon4j-plugin/1.0/index.html">Sonar-devon4j-plugin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sonar-devon4j-plugin/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../devonfw.github.io/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/MarvDan/shop-floor/edit/develop/modules/ROOT/pages/dsf-deployment-dsf4openshift-manual-configuration.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_openshift_deployment_environment_manual_configuration"><a class="anchor" href="#_openshift_deployment_environment_manual_configuration"></a>OpenShift deployment environment manual configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section you will see how you can create a new environment instance in your OpenShift cluster to deploy devonfw projects using docker images.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_devonfw_project"><a class="anchor" href="#_devonfw_project"></a>devonfw project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Yo need to have a devonfw project in a git repository or a docker image uploaded to a docker registry.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comunication_between_components"><a class="anchor" href="#_comunication_between_components"></a>Comunication between components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Openshift must have access to docker registry.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_download_openshift_client_tools"><a class="anchor" href="#_download_openshift_client_tools"></a>Download OpenShift Client Tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First of all you need to download the OpenShift client, you can find it <a href="https://www.okd.io/download.html">here</a>.</p>
</div>
<div class="paragraph">
<p>Remember that what you need to download <strong>oc Client Tools</strong> and not <em>OKD Server</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This tutorial has been made with the version 3.10.0 of the client, it is recommended to use the most current client, but if it does not work, it is possible that the instructions have become obsolete or that the OpenShift used needs another older/newer version of the client. To download a specific version of the client you can find here the <a href="https://github.com/openshift/origin/releases/">older versions</a> and the <a href="https://github.com/openshift/origin/releases/tag/v3.10.0">version 3.10.0</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_oc_client_to_path"><a class="anchor" href="#_add_oc_client_to_path"></a>Add oc client to path</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have downloaded the client you have to add it to the <strong>PATH</strong> environment variable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_log_into_openshift_with_admin_account"><a class="anchor" href="#_log_into_openshift_with_admin_account"></a>Log into OpenShift with admin account</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can log using a terminal and executing the next instructions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc login $OpenShiftUrl</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need a valid user to log in.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_select_the_project_where_you_are_going_to_create_the_environment"><a class="anchor" href="#_select_the_project_where_you_are_going_to_create_the_environment"></a>Select the project where you are going to create the environment</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc project $projectName</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_all_the_secrets_that_you_need"><a class="anchor" href="#_add_all_the_secrets_that_you_need"></a>Add all the secrets that you need</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For example, to create a secret for a nexus repository you should execute the next commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc create secret docker-registry $nameForSecret --docker-server=${dockerRegistry} --docker-username=${user} --docker-password=${pass} --docker-email=no-reply@email.com</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_openshift"><a class="anchor" href="#_configure_openshift"></a>Configure OpenShift</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_configure_builds_to_create_docker_image_using_openshift"><a class="anchor" href="#_configure_builds_to_create_docker_image_using_openshift"></a>Configure builds to create docker image using OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need to create docker images of your projects you could use OpenShift to do it <em>(Off course only if you have enough rights)</em>.</p>
</div>
<div class="paragraph">
<p>To do it, follow the next steps.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_new_builds_configs"><a class="anchor" href="#_create_new_builds_configs"></a>==  Create new builds configs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first thing you need to do for create a new environment is prepare the buildconfigs for the front and for the middleware and rise default memory limits for the middleware. You can do it using a terminal and executing the next instructions:</p>
</div>
<div class="paragraph">
<p>These are a summary about the parameters used in our commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>${dockerRegistry}</strong>: The url of the docker repository.</p>
</li>
<li>
<p><strong>${props.name}</strong>: The name of the project (for example could be find on package.json)</p>
</li>
<li>
<p><strong>${dockerTag}</strong>: The tag of the image</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
From now on you will refer to the name that you are going to give to the environment as <strong>$enviroment</strong>. Remember to modify it for the correct value in all instructions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_devon4ng_build_config"><a class="anchor" href="#_devon4ng_build_config"></a>== devon4ng build config</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need to create nginx build config with docker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc new-build --strategy docker --binary --docker-image nginx:alpine-perl --name=${props.name}-$environment --to=${dockerRegistry}/${props.name}:${dockerTag} --to-docker=true</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need nginx:alpine-perl to read the environment config file in openshift, if you are not going to use it, you could use nginx:latest instead.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_devon4node_build_config"><a class="anchor" href="#_devon4node_build_config"></a>== devon4node build config</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc new-build --strategy docker --binary --docker-image node:lts --name=${props.name}-$environment --to=${dockerRegistry}/${props.name}:${dockerTag} --to-docker=true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_devon4j_build_config"><a class="anchor" href="#_devon4j_build_config"></a>== devon4j build config</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc new-build --strategy docker --binary --docker-image openjdk:&lt;version&gt; --name=${props.name}-$environment --to=${dockerRegistry}/${props.name}:${dockerTag} --to-docker=true</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need to specify the &lt;version&gt; of java used for your project. Also you can use the -alpine image. This image is based on the popular <a href="https://alpinelinux.org/">Alpine Linux project</a>. Alpine Linux is much smaller than most distribution base images (~5MB), and thus leads to much slimmer images in general. More information on <a href="https://hub.docker.com/_/openjdk/">docker hub</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_use_the_build"><a class="anchor" href="#_how_to_use_the_build"></a>== How to use the build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this step is where you will build a docker image from a compiled application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisite"><a class="anchor" href="#_prerequisite"></a>== ==  Prerequisite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build the source in OpenShift, first of all you need to compile your source and <strong>obtain the artifacts</strong> <em>"dist folder"</em> or download it from a repository. Normally the artifacts have been built on Jenkins and have been stored in Nexus.</p>
</div>
<div class="paragraph">
<p>To download it, you can access to your registry, select the last version and download the <em>".tar"</em>. The next image shows an example of where is the link to download it, marked in yellow:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/configuration/nexus-stored-artifacts.png" alt="nexus stored artifacts">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build_in_openshift"><a class="anchor" href="#_build_in_openshift"></a>== ==  Build in OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you have the artifacts, you can send them to your openshift and build them using your buildconfig that you created on the previous step. This is going to create a new docker image and push it to your registry.</p>
</div>
<div class="paragraph">
<p>If your docker registry need credentials you should use a secret. You could add it to your buildconfig using the next command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc set build-secret --push bc/${props.name}-$environment ${nameForSecret}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can use your build config and push the docker image to your registry. To do it you need to use a terminal and execute the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc start-build ${props.name}-$environment --from-dir=${artifactsPath} --follow</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
${artifactsPath} is the path where you have the artifacts of the prerequisite (On jenkins is the dist folder generated by the build).
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Maybe you need to <a href="dsf-deployment-dsf4openshift#Raise/decrease-memory-or-CPU-limits.adoc">raise your memory or CPU limits</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_new_environment"><a class="anchor" href="#_configure_new_environment"></a>Configure new environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now it is time to configure the environment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisite_2"><a class="anchor" href="#_prerequisite_2"></a>==  Prerequisite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need a docker image of your application. You could create it using OpenShift as you see in the last step.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_new_app_on_openshift"><a class="anchor" href="#_create_new_app_on_openshift"></a>==  Create new app on OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To create new app you need to use the next command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc new-app --docker-image=${artifactsPath} --name=${props.name}-$environment --source-secret=${nameForSecret}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You could add environment variables using <code>-e $name=$value</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you do not need to use a secret remove the end part of the command <code>--source-secret=${nameForSecret}</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_routes"><a class="anchor" href="#_create_routes"></a>==  Create routes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally, you need add a route to access the service.</p>
</div>
<div class="paragraph">
<p><strong>Add http route</strong></p>
</div>
<div class="paragraph">
<p>If you want to create an http route execute the following command in a terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc expose svc/${props.name}-$environment</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Add https route</strong></p>
</div>
<div class="paragraph">
<p>If you want to create an https route you can do it executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc create route edge --service=${props.name}-$environment</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to change the default route path you can use the command --hostname=$url. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc expose svc/${props.name}-$environment --hostname=$url

oc create route edge --service=${props.name}-$environment --hostname=$url</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_import_new_images_from_registry"><a class="anchor" href="#_import_new_images_from_registry"></a>Import new images from registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you have new images in the registry you must import them to OpenShift. You could do it executing the next commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc import-image ${props.name}-$environment --from=${dockerRegistry}/${props.name}:${dockerTag} --confirm</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Maybe you need to raise your memory or CPU limits. It is explained below.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_raisedecrease_memory_or_cpu_limits"><a class="anchor" href="#_raisedecrease_memory_or_cpu_limits"></a>Raise/decrease memory or CPU limits</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need to raise (or decrease) the memory or CPU limits that you need you could do it for your deployments and builders configurations following the next steps.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_for_deployments"><a class="anchor" href="#_for_deployments"></a>==  For deployments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You could do it in OpenShift using the user interface. To do it you should enter in OpenShift and go to deployments.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/configuration/openshift-deployments-menu.png" alt="openshift deployments menu">
</div>
</div>
<div class="paragraph">
<p>At the right top, you could see a drop down actions, click on it and you could edit the resource limits of the container.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/configuration/openshift-deployments-actions.png" alt="openshift deployments actions">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/configuration/openshift-deployments-resource-limits.png" alt="openshift deployments resource limits">
</div>
</div>
<div class="paragraph">
<p>Maybe you should modify the resource limits of the pod too. To do it you should click on drop down actions and go to edit YAML. Then you could see something like the next image.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/configuration/openshift-deployments-yaml-resources.png" alt="openshift deployments yaml resources">
</div>
</div>
<div class="paragraph">
<p>In the image, you could see that appear resources two times. One at the bottom of the image, this are the container resources that you modified on the previous paragraph and another one at the top of the image. The resources of the top are for the pod, you should give to it at least the same of the sum for all containers that the pod use.</p>
</div>
<div class="paragraph">
<p>Also you could do it using command line interface and executing the next command:</p>
</div>
<div class="paragraph">
<p><strong>To modify pod limits</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc patch dc/boat-frontend-test --patch '{"spec":{"strategy":{"resources":{"limits":{"cpu": "100m", "memory": "100Mi"}, "requests":{"cpu": "100m", "memory": "100Mi"}}}}}'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>To modify container limits</strong></p>
</div>
<div class="paragraph">
<p>When this guide was written Openshift have a bug and you cannot do it from command line interface.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If that command did not work and you received an error like this <code>error: unable to parse "'{spec:&#8230;&#8203;": yaml: found unexpected end of stream</code>, try to use the patch using "" instead of ''. It looks like this: <code>--patch "{\"spec\":&#8230;&#8203;\"}}}}"</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_for_builders"><a class="anchor" href="#_for_builders"></a>==  For builders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You could do it using command line interface and executing the next command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Shell hljs" data-lang="Shell">oc patch bc/${props.name}${APP_NAME_SUFFIX} --patch '{"spec":{"resources":{"limits":{"cpu": "125m", "memory": "400Mi"},"requests":{"cpu": "125m", "memory": "400Mi"}}}}'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If that command did not work and you received an error like this <code>error: unable to parse "'{spec:&#8230;&#8203;": yaml: found unexpected end of stream</code>, try to use the patch using "" instead of ''. It looks like this: <code>--patch "{\"spec\":&#8230;&#8203;\"}}}}"</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
